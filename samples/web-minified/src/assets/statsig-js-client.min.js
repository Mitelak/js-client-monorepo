!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Statsig=e():t.Statsig=e()}(this,()=>(()=>{"use strict";var $Q=(e)=>Object.defineProperty(e,"__esModule",{value:!0});var $Q2=(a,b,c)=>Object.defineProperty(a,b,c);var $P=(a,b)=>Object.assign(a,b);var $A=()=>((t,r,u,l)=>{return new(u=u||Promise)(function(n,e){function i(t){try{s(l.next(t))}catch(t){e(t)}}function o(t){try{s(l.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(i,o)}s((l=l.apply(t,r||[])).next())})});var i={496:(t,i,e)=>{$Q2(i,"__esModule",{value:!0}),i.t=i.dn=i.i=void 0,i.i=()=>__STATSIG__||u,i.dn=t=>(0,i.i)()[t];i.t=t=>{var e=(0,i.i)();return t?e.instances&&e.instances[t]:e.lastInstance};var n,s="__STATSIG__",o="undefined"!=typeof window?window:{},e=void 0!==e.g?e.g:{},r="undefined"!=typeof globalThis?globalThis:{};const u=null!=(n=null!=(n=null!=(n=o[s])?n:e[s])?n:r[s])?n:{instance:i.t};o[s]=u,e[s]=u,r[s]=u},707:(t,e,i)=>{$Q(e),e.o=e.u=void 0;const n=i(832);function s(t,e,i){return i?i(t,e):(e=["uid:"+(null!=(i=null==e?void 0:e.userID)?i:""),"cids:"+Object.entries(null!=(i=null==e?void 0:e.customIDs)?i:{}).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>t+"-"+e).join(","),"k:"+t],(0,n.oi)(e.join("|")))}e.u=s,e.o=function(t,e,i){return e?s(t,e,i):(0,n.oi)("k:"+t)}},856:(t,e)=>{$Q(e)},320:function(t,e,i){var s=this&&this.__awaiter||$A();$Q(e),e.DataAdapterCore=void 0;const l=i(780),a=i(604),o=i(296),r=i(444),c=i(412);function d(t,e,i,n){return{source:t,data:e,receivedAt:Date.now(),stableID:i,fullUserHash:(0,o.vn)(n)}}e.DataAdapterCore=class{constructor(t,e){this.l=t,this.h=e,this.v=null,this._=null,this.p="statsig.last_modified_time."+e,this.S=new n}attach(t,e){this._=t,this.v=e}getDataSync(t){var e=this.m(t),i=this.S.get(e,t);return i||((i=this.O(e))?(this.S.add(e,i),this.S.get(e,t)):null)}setData(t,e){var e=e&&(0,o.T)(e,null==(e=this.v)?void 0:e.environment),i=this.m(e);this.S.add(i,d("Bootstrap",t,null,e))}__primeInMemoryCache(t){this.S.merge(t)}I(e,i,n){return s(this,void 0,void 0,function*(){var t=null!=e?e:this.getDataSync(i),t=[this.A(t,i,n)];return null!=n&&n.timeoutMs&&t.push(new Promise(t=>setTimeout(t,n.timeoutMs)).then(()=>(l.Log.debug("Fetching latest value timed out"),null))),yield Promise.race(t)})}M(i,n){return s(this,void 0,void 0,function*(){var t=this.m(i),e=yield this.I(null,i,n);e&&this.S.add(t,$P($P({},e),{source:"Prefetch"}))})}A(o,r,u){return s(this,void 0,void 0,function*(){let t=null;o&&this.fn(o,r)&&(t=o.data);var e=yield this.D(t,r,u);if(!e)return l.Log.debug("No response returned for latest value"),null;var i=(0,c.ui)(e,"has_updates","Response"),n=this.G(),n=yield a.StableID.get(n);let s=null;if(!0===(null==i?void 0:i.has_updates))s=d("Network",e,n,r);else{if(!t||!1!==(null==i?void 0:i.has_updates))return null;s=d("NetworkNotModified",t,n,r)}e=this.m(r);return this.S.add(e,s),yield this.k(e,s),s})}G(){return null!=this._?this._:(l.Log.error(this.l+" is not attached to a Client"),"")}O(t){var e=null==(e=r.Storage.N)?void 0:e.call(r.Storage,t);return null!=e&&(t=(0,c.ui)(e,"source","Cached Result"))?$P($P({},t),{source:"Cache"}):null}k(t,e){return s(this,void 0,void 0,function*(){yield r.Storage.C(t,JSON.stringify(e)),yield this.R(t)})}R(i){var n;return s(this,void 0,void 0,function*(){var t=null!=(n=yield(0,r.P)(this.p))?n:{},e=(t[i]=Date.now(),Object.entries(t));e.length<=10||(delete t[(e=e.reduce((t,e)=>e[1]<t[1]?e:t))[0]],yield r.Storage.F(e[0])),yield(0,r.U)(this.p,t)})}};class n{constructor(){this.ii={}}get(t,e){var t=this.ii[t],i=null==t?void 0:t.stableID,e=null==(e=null==e?void 0:e.customIDs)?void 0:e.stableID;return e&&i&&e!==i?(l.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):t}add(t,e){var i=Object.entries(this.ii);i.length<10||([i]=i.reduce((t,e)=>e[1]<t[1]?e:t),delete this.ii[i]),this.ii[t]=e}merge(t){this.ii=$P($P({},this.ii),t)}}},280:(t,e)=>{$Q(e),e.Diagnostics=void 0;e.Diagnostics=class{static mark(){}}},184:(t,e)=>{$Q(e)},512:function(t,u,e){var i=this&&this.__awaiter||$A();$Q2(u,"__esModule",{value:!0}),u.ErrorBoundary=u.EXCEPTION_ENDPOINT=void 0;const n=e(780),l=e(360),a=e(972),c=(u.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception","[Statsig] UnknownError");u.ErrorBoundary=class{constructor(t,e,i){this._=t,this.v=e,this.K=i,this.L=new Set}wrap(n){try{const t=n;!function(t){const e=new Set;let i=Object.getPrototypeOf(t);for(;i&&i!==Object.prototype;)Object.getOwnPropertyNames(i).filter(t=>"function"==typeof(null===i||void 0===i?void 0:i[t])).forEach(t=>e.add(t)),i=Object.getPrototypeOf(i);return Array.from(e)}(t).forEach(e=>{const i=t[e];"$EB"in i||(t[e]=(...t)=>this.ci(e,()=>i.apply(n,t)),t[e].$EB=!0)})}catch(t){this.q("eb:wrap",t)}}logError(t,e){this.q(t,e)}ci(e,t){try{var i=t();return i&&i instanceof Promise?i.catch(t=>this.q(e,t)):i}catch(t){return this.q(e,t),null}}q(o,r){try{n.Log.warn("Caught error in "+o,{error:r});i(this,void 0,void 0,function*(){var t,e,i=r||Error(c),n=i instanceof Error,s=n?i.name:"No Name";this.L.has(s)||(this.L.add(s),null!=(t=null==(t=this.v)?void 0:t.networkConfig)&&t.preventAllNetworkTraffic?null!=(t=this.K)&&t.call(this,{name:"error",error:r}):(t=l.SDKType.J(this._),e=a.StatsigMetadataProvider.get(),n=n?i.stack:function(t){try{return JSON.stringify(t)}catch(t){return c}}(i),i=JSON.stringify($P({tag:o,exception:s,info:n},$P($P({},e),{sdkType:t}))),yield(null!=(s=null==(n=null==(s=this.v)?void 0:s.networkConfig)?void 0:n.networkOverrideFunc)?s:fetch)(u.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._,"STATSIG-SDK-TYPE":String(t),"STATSIG-SDK-VERSION":String(e.sdkVersion),"Content-Type":"application/json"},body:i}),null!=(n=this.K)&&n.call(this,{name:"error",error:r})))}).then(()=>{}).catch(()=>{})}catch(t){}}}},500:(t,e)=>{$Q(e)},788:(t,e)=>{$Q(e)},728:function(t,e,i){var n=this&&this.__awaiter||$A();$Q(e),e.EventLogger=void 0;const s=i(832),o=i(780),r=i(716),u=i(48),l=i(876),a=i(444),c=i(84),d=i(100),h={},v=t=>{null!=(t=h[t])&&t.flush().catch(()=>{})};e.EventLogger=class{constructor(e,t,i,n){this._=e,this.K=t,this.V=i,this.v=n,this.B=[],this.$={},this.H={},this.W=!1,this.Y=Date.now(),(h[e]=this).X=!0===(null==n?void 0:n.disableLogging),this.Z=null!=(t=null==n?void 0:n.loggingBufferMaxSize)?t:50;i=null==n?void 0:n.networkConfig;this.et=(0,c.it)(null==i?void 0:i.logEventUrl,null==i?void 0:i.api,"/rgstr",r.NetworkDefault.eventsApi),(0,d.st)(t=>{"background"===t&&v(e)}),this.rt(),this.ni()}setLoggingDisabled(t){this.X=t}enqueue(t){this.ot(t)&&(this.ut(t),this.lt(),this.B.length>this.Z)&&v(this._)}incrementNonExposureCount(t){var e=null!=(e=this.H[t])?e:0;this.H[t]=e+1}reset(){this.$={}}shutdown(){return n(this,void 0,void 0,function*(){this.tt&&(clearInterval(this.tt),this.tt=null),yield this.flush()})}flush(){return n(this,void 0,void 0,function*(){var t;if(this.ct(),0!==this.B.length)return t=this.B,this.B=[],this.dt(t)})}lt(){this.W||(this.W=!0,200<Date.now()-this.Y)||setTimeout(()=>v(this._),200)}ot(t){if((0,l.ht)(t)){var e=t.user||{},i=t.metadata||{},t=[t.eventName,e.userID,i.gate,i.config,i.ruleID].join("|"),e=this.$[t],i=Date.now();if(e&&i-e<6e4)return!1;1e3<Object.keys(this.$).length&&(this.$={}),this.$[t]=i}return!0}dt(t){var e,i;return n(this,void 0,void 0,function*(){if(this.X)this.vt(t);else try{(!(0,d._t)()&&this.V.isBeaconSupported()&&null==(null==(i=null==(e=this.v)?void 0:e.networkConfig)?void 0:i.networkOverrideFunc)?yield this.ft(t):yield this.gt(t)).success?this.K({name:"logs_flushed",events:t}):this.vt(t)}catch(t){o.Log.warn("Failed to flush events.")}})}gt(e){var i;return n(this,void 0,void 0,function*(){var t=yield this.V.post(this.si(e)),t=null!=(i=null==t?void 0:t.code)?i:-1;return{success:200<=t&&t<300}})}ft(t){return n(this,void 0,void 0,function*(){return{success:yield this.V.beacon(this.si(t))}})}si(t){return{sdkKey:this._,data:{events:t},url:this.et,retries:3,isCompressable:!0,params:{[r.NetworkParam.EventCount]:String(t.length)}}}vt(t){for(;500<t.length;)t.shift();var e=this.o();(0,a.U)(e,t).catch(()=>{o.Log.warn("Unable to save failed logs to storage")})}rt(){const e=this.o();n(this,void 0,void 0,function*(){var t=yield(0,a.P)(e);t&&(yield a.Storage.F(e),yield this.dt(t))}).catch(()=>{o.Log.warn("Failed to flush stored logs")})}o(){return"statsig.failed_logs."+(0,s.oi)(this._)}ut(t){t.user&&(t.user=$P({},t.user),delete t.user.privateAttributes);var e={},i=this.bt(),i=(i&&(e.statsigMetadata={currentPage:i}),$P($P({},t),e));o.Log.debug("Enqueued Event:",i),this.B.push(i)}ct(){0!==Object.keys(this.H).length&&(this.ut({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:$P({},this.H)}}),this.H={})}bt(){var t;if(!1!==(null==(t=this.v)?void 0:t.includeCurrentPageUrlWithEvents))return(0,u.yt)()}ni(){if((0,u.Et)()){var t=null!=(t=null==(t=this.v)?void 0:t.loggingIntervalMs)?t:1e4;const e=setInterval(()=>{h[this._].tt!==e?clearInterval(e):v(this._)},t);this.tt=e}}}},832:(t,e)=>{$Q(e),e.li=e.oi=void 0;e.oi=e=>{let i=0;for(let t=0;t<e.length;t++){var n=e.charCodeAt(t);i=(i<<5)-i+n,i&=i}return String(i>>>0)};e.li=t=>(0,e.oi)(JSON.stringify(s(t)));const s=i=>{if(null==i)return null;var t=Object.keys(i).sort();const n={};return t.forEach(t=>{let e=i[t];!Array.isArray(e)&&e instanceof Object&&(e=s(e)),n[t]=e}),n}},664:(t,e)=>{$Q(e)},780:(t,e)=>{function i(t){return t.unshift("[Statsig]"),t}var n,s;$Q(e),e.Log=e.LogLevel=void 0,(s=n||(e.LogLevel=n={}))[s.None=0]="None",s[s.Error=1]="Error",s[s.Warn=2]="Warn",s[s.Info=3]="Info",s[s.Debug=4]="Debug";class o{static info(...t){this.level>=n.Info&&console.info(...i(t))}static debug(...t){this.level>=n.Debug&&console.debug(...i(t))}static warn(...t){this.level>=n.Warn&&console.warn(...i(t))}static error(...t){this.level>=n.Error&&console.error(...i(t))}}(e.Log=o).level=n.Error},716:(t,e)=>{$Q(e),e.NetworkParam=e.NetworkDefault=void 0,e.NetworkDefault={eventsApi:"https://prodregistryv2.org/v1",initializeApi:"https://featureassets.org/v1",specsApi:"https://assetsconfigcdn.org/v1"},e.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}},188:function(t,e,i){var r=this&&this.__awaiter||$A();$Q(e),e.NetworkCore=void 0,i(496);const u=i(496),_=i(280),y=i(780),l=i(716),o=i(360),a=i(48),c=i(612),d=i(604),h=i(972),b=i(100);e.NetworkCore=class{constructor(t,e){this.K=e,this.St=1e4,this.ri={},this.v={},t&&(this.v=t),this.v.networkConfig&&(this.ri=this.v.networkConfig),this.ri.networkTimeoutMs&&(this.St=this.ri.networkTimeoutMs)}post(e){return r(this,void 0,void 0,function*(){let t=yield this.Ot(e);return e.isStatsigEncodable?t=this.Tt(e,t):e.isCompressable&&(t=yield this.hn(e,t)),this.jt($P({method:"POST",body:t},e))})}get(t){return this.jt($P({method:"GET"},t))}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}beacon(n){return r(this,void 0,void 0,function*(){var t,e,i;return!!g(n)&&(t=yield this.Ot(n),t=yield this.hn(n,t),e=yield this.wt(n),(i=navigator).sendBeacon.bind(i)(e,t))})}jt(h){var v,f;return r(this,void 0,void 0,function*(){if(!g(h))return null;if(this.ri.preventAllNetworkTraffic)return null;var{method:e,body:i,retries:n}=h;const s="undefined"!=typeof AbortController?new AbortController:null;var t=setTimeout(()=>null===s||void 0===s?void 0:s.abort(`Timeout of ${this.St}ms expired.`),this.St),o=yield this.wt(h),r=null,u=(0,b.ti)();try{var l,a,c,d={method:e,body:i,headers:$P({},h.headers),signal:null===s||void 0===s?void 0:s.signal,priority:h.priority,keepalive:u},r=yield(null!=(v=this.ri.networkOverrideFunc)?v:fetch)(o,d);if(clearTimeout(t),r.ok)return c=yield r.text(),_.Diagnostics.mark(),{body:c,code:r.status};throw l=yield r.text().catch(()=>"No Text"),(a=new Error(`NetworkError: ${o} `+l)).name="NetworkError",a}catch(t){i=function(t,e){if(null!=t&&t.signal.aborted&&"string"==typeof t.signal.reason)return t.signal.reason;if("string"==typeof e)return e;if(e instanceof Error)return e.name+": "+e.message;return"Unknown Error"}(s,t);return _.Diagnostics.mark(),!n||n<=0?(null!=(f=this.K)&&f.call(this,{name:"error",error:t}),y.Log.error(`A networking error occured during ${e} request to ${o}.`,i,t),null):this.jt($P($P({},h),{retries:n-1}))}})}wt(e){return r(this,void 0,void 0,function*(){var t=$P({[l.NetworkParam.SdkKey]:e.sdkKey,[l.NetworkParam.SdkType]:o.SDKType.J(e.sdkKey),[l.NetworkParam.SdkVersion]:h.SDK_VERSION,[l.NetworkParam.Time]:String(Date.now()),[l.NetworkParam.SessionID]:yield c.SessionID.get(e.sdkKey)},e.params),t=Object.entries(t).map(([t,e])=>encodeURIComponent(t)+"="+encodeURIComponent(e)).join("&");return e.url+(t?"?"+t:"")})}Ot(s){return r(this,void 0,void 0,function*(){var{data:t,sdkKey:e}=s,i=yield d.StableID.get(e),n=yield c.SessionID.get(e),e=o.SDKType.J(e);return JSON.stringify($P($P({},t),{statsigMetadata:$P($P({},h.StatsigMetadataProvider.get()),{stableID:i,sessionID:n,sdkType:e})}))})}Tt(t,e){var i,n,s=(0,a.It)();if(!t.isStatsigEncodable||this.v.disableStatsigEncoding||null!=(0,u.dn)("no-encode")||null==s||!s.btoa)return e;try{var o=null!=(i=s.btoa(e).split("").reverse().join(""))?i:e;return t.params=$P($P({},null!=(n=t.params)?n:{}),{[l.NetworkParam.StatsigEncoded]:"1"}),o}catch(t){return y.Log.warn("/initialize request encoding failed"),e}}hn(n,s){var o;return r(this,void 0,void 0,function*(){var t,e,i;return!n.isCompressable||this.v.disableCompression||null!=(0,u.dn)("no-compress")||"undefined"==typeof CompressionStream||"undefined"==typeof TextEncoder?s:(t=(new TextEncoder).encode(s),(i=(e=new CompressionStream("gzip")).writable.getWriter()).write(t).catch(y.Log.error),i.close().catch(y.Log.error),n.params=$P($P({},null!=(o=n.params)?o:{}),{[l.NetworkParam.IsGzipped]:"1"}),yield new Response(e.readable).arrayBuffer())})}};const g=t=>!!t.sdkKey||(y.Log.warn("Unable to make request without an SDK key"),!1)},264:(t,e)=>{$Q(e)},360:(t,e)=>{$Q(e),e.SDKType=void 0;const i={};let n;e.SDKType={J:t=>{return(null!=(t=i[t])?t:"js-mono")+(null!==n&&void 0!==n?n:"")},At(t,e){i[t]=e},Mt(t){n&&"-react"!==n||(n="-"+t)}}},48:(t,n)=>{$Q2(n,"__esModule",{value:!0}),n.yt=n.xt=n.Dt=n.Et=n.kt=n.It=void 0;n.It=()=>"undefined"!=typeof window?window:null,n.kt=()=>{var t=(0,n.It)();return null!=(t=null==t?void 0:t.document)?t:null},n.Et=()=>null!=(0,n.kt)(),n.Dt=(t,e)=>{var i=(0,n.It)();"function"==typeof(null==i?void 0:i.addEventListener)&&i.addEventListener(t,e)},n.xt=(t,e)=>{var i=(0,n.kt)();"function"==typeof(null==i?void 0:i.addEventListener)&&i.addEventListener(t,e)};n.yt=()=>{var t;try{return null==(t=(0,n.It)())?void 0:t.location.href.split(/[?#]/)[0]}catch(t){}}},612:function(t,e,i){var r=this&&this.__awaiter||$A();$Q(e),e.StatsigSession=e.SessionID=void 0;const n=i(707),u=i(780),l=i(444),a=i(556),c=18e5,d=144e5,h={};function v(e,t){return setTimeout(()=>{var t=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(e);t&&t.$emt({name:"session_expired"})},t)}function f(t){return"statsig.session_id."+(0,n.o)(t)}e.SessionID={get:t=>r(void 0,void 0,void 0,function*(){return e.StatsigSession.get(t).then(t=>t.data.sessionID)})},e.StatsigSession={get:o=>r(void 0,void 0,void 0,function*(){null==h[o]&&(h[o]=function(i){return r(this,void 0,void 0,function*(){let t=yield function(t){t=f(t);return(0,l.P)(t)}(i);var e=Date.now();return{data:t=t||{sessionID:(0,a.getUUID)(),startTime:e,lastUpdate:e},sdkKey:i}})}(o));var t=yield h[o],e=Date.now(),i=t.data,n=((function({lastUpdate:t}){return Date.now()-t>c}(i)||function({startTime:t}){return Date.now()-t>d}(i))&&(i.sessionID=(0,a.getUUID)(),i.startTime=e),i.lastUpdate=e,i),s=t.sdkKey;return s=f(s),(0,l.U)(s,n).catch(()=>{u.Log.warn("Failed to save SessionID")}),clearTimeout(t.idleTimeoutID),clearTimeout(t.ageTimeoutID),e-=i.startTime,i=t.sdkKey,t.idleTimeoutID=v(i,c),t.ageTimeoutID=v(i,d-e),t})}},604:function(t,e,i){var n=this&&this.__awaiter||$A();$Q(e),e.StableID=void 0;const s=i(707),o=i(780),r=i(444),u=i(556),l={};function a(t){return"statsig.stable_id."+(0,s.o)(t)}function c(t,e){e=a(e);(0,r.U)(e,t).catch(()=>{o.Log.warn("Failed to save StableID")})}e.StableID={get:e=>n(void 0,void 0,void 0,function*(){return null==l[e]&&(l[e]=function(t){t=a(t);return(0,r.P)(t)}(e).then(t=>{return null!=t||c(t=(0,u.getUUID)(),e),t})),l[e]}),setOverride:(t,e)=>{l[e]=Promise.resolve(t),c(t,e)}}},688:function(t,e,i){var n=this&&this.__awaiter||$A();$Q(e),e.StatsigClientBase=void 0,i(496);const r=i(496),u=i(512),l=i(728),a=i(780),c=i(48),d=i(444);e.StatsigClientBase=class{constructor(t,e,i,n){this.loadingStatus="Uninitialized",this.Gt={};var s,o=this.$emt.bind(this);null!=(null==n?void 0:n.logLevel)&&(a.Log.level=n.logLevel),null!=n&&n.disableStorage&&d.Storage.Nt(!0),this._=t,this.v=null!=n?n:{},this.Rt=null!=(s=null==n?void 0:n.overrideAdapter)?s:null,this.Pt=new l.EventLogger(t,o,i,n),this.Ct=new u.ErrorBoundary(t,n,o),this.Ct.wrap(this),this.Ct.wrap(i),this.Ct.wrap(e),this.Ct.wrap(this.Pt),(0,c.Et)()&&(null!=(i=null!=(o=(s=(0,r.i)()).instances)?o:{})[t]&&a.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys."),i[t]=this,s.lastInstance=this,s.instances=i,__STATSIG__=s),this.dataAdapter=e,this.dataAdapter.attach(t,n),this.Ft()}updateRuntimeOptions(t){null!=t.disableLogging&&(this.v.disableLogging=t.disableLogging,this.Pt.setLoggingDisabled(t.disableLogging)),null!=t.disableStorage&&(this.v.disableStorage=t.disableStorage,d.Storage.Nt(t.disableStorage))}flush(){return this.Pt.flush()}shutdown(){return n(this,void 0,void 0,function*(){this.$emt({name:"pre_shutdown"}),yield this.Pt.shutdown()})}on(t,e){this.Gt[t]||(this.Gt[t]=[]),this.Gt[t].push(e)}off(t,e){this.Gt[t]&&-1!==(e=this.Gt[t].indexOf(e))&&this.Gt[t].splice(e,1)}$on(t,e){e.__isInternal=!0,this.on(t,e)}$emt(i){var t;const e=e=>{try{e(i)}catch(t){!0===e.__isInternal?this.Ct.logError("__emit:"+i.name,t):a.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",i)}};this.Gt[i.name]&&this.Gt[i.name].forEach(t=>e(t)),null!=(t=this.Gt["*"])&&t.forEach(e)}Ut(t,e){this.loadingStatus=t,this.$emt({name:"values_updated",status:t,values:e})}Kt(t,e,i){!0===(null==i?void 0:i.disableExposureLog)?this.Pt.incrementNonExposureCount(t):this.Pt.enqueue(e)}}},808:(t,e)=>{$Q(e)},283:(t,e)=>{$Q(e),e.DataAdapterCachePrefix=void 0,e.DataAdapterCachePrefix="statsig.cached"},876:(t,e)=>{$Q(e),e.Lt=e.qt=e.Jt=e.ht=void 0;const i="statsig::config_exposure",n="statsig::gate_exposure",l=(t,e,i,n,s)=>({eventName:t,user:e,value:null,metadata:o(i,n),secondaryExposures:s,time:Date.now()});e.ht=({eventName:t})=>t===n||t===i,e.Jt=(t,e)=>{return l(n,t,e.details,{gate:e.name,gateValue:String(e.value),ruleID:e.ruleID},null!=(e=null==(t=e.__evaluation)?void 0:t.secondary_exposures)?e:[])},e.qt=(t,e)=>{return l(i,t,e.details,{config:e.name,ruleID:e.ruleID},null!=(e=null==(t=e.__evaluation)?void 0:t.secondary_exposures)?e:[])};e.Lt=(t,e,i)=>{var n,s=e.__evaluation,o=!0===(null==(o=null==s?void 0:s.explicit_parameters)?void 0:o.includes(i));let r="",u=null!=(n=null==s?void 0:s.undelegated_secondary_exposures)?n:[];return o&&(r=null!=(n=s.allocated_experiment_name)?n:"",u=s.secondary_exposures),l("statsig::layer_exposure",t,e.details,{config:e.name,parameterName:i,ruleID:e.ruleID,allocatedExperiment:r,isExplicitParameter:String(o)},u)};const o=(t,e)=>(e.reason=t.reason,t.lcut&&(e.lcut=String(t.lcut)),t.receivedAt&&(e.receivedAt=String(t.receivedAt)),e)},972:(t,e)=>{$Q(e),e.StatsigMetadataProvider=e.SDK_VERSION=void 0,e.SDK_VERSION="1.0.0";let i={sdkVersion:e.SDK_VERSION,sdkType:"js-mono"};e.StatsigMetadataProvider={get:()=>i,add:t=>{i=$P($P({},i),t)}}},384:(t,e)=>{$Q(e)},396:(t,e)=>{$Q(e),e.Vt=e.zt=e.Bt=e.$t=void 0;const s="default";function o(t,e,i,n){return{name:t,details:e,ruleID:null!=(t=null==i?void 0:i.rule_id)?t:s,__evaluation:i,value:n}}function r(o,r){return(t,e)=>{var i,n,s=null!=(s=null==o?void 0:o[t])?s:null;return null==s||null!=e&&(i=e,(n=t=>Array.isArray(t)?"array":typeof t)(s)!==n(i))?null!=e?e:null:(null!=r&&r(t),s)}}e.$t=function(t,e,i){return o(t,e,i,!0===(null==i?void 0:i.value))},e.Bt=function(t,e,i){return $P($P({},o(t,e,i,null!=(t=null==i?void 0:i.value)?t:{})),{groupName:null,get:r(null==i?void 0:i.value)})},e.zt=function(t,e,i,n){return $P($P({},o(t,e,i,void 0)),{get:r(null==i?void 0:i.value,n),groupName:null!=(t=null==i?void 0:i.group_name)?t:null,__value:null!=(e=null==i?void 0:i.value)?e:{}})},e.Vt=function(t,e,i,n){return $P($P($P({},t),e),{get:r(i,n)})}},136:(t,e)=>{$Q(e)},296:(t,e,i)=>{$Q(e),e.vn=e.T=void 0;const n=i(832),s=i(780);e.T=function(t,e){try{var i=JSON.parse(JSON.stringify(t));return null!=e&&(i.statsigEnvironment=e),i}catch(t){return s.Log.error("Failed to JSON.stringify user"),{}}},e.vn=function(t){return t?(0,n.li)(t):null}},444:function(t,i,e){var n=this&&this.__awaiter||$A(),s=($Q2(i,"__esModule",{value:!0}),i.U=i.P=i.Storage=void 0,e(780)),e=e(48);const o={},r=t=>Promise.resolve(t),u={Ht:()=>"InMemory",N:t=>o[t]||null,Wt:t=>r(o[t]||null),C:(t,e)=>(o[t]=e,r()),F:t=>(delete o[t],r()),Yt:()=>r(Object.keys(o))};let l=null;try{const h=(0,e.It)();h&&h.localStorage&&"function"==typeof h.localStorage.getItem&&(l={Ht:()=>"LocalStorage",N:t=>h.localStorage.getItem(t),Wt:t=>r(h.localStorage.getItem(t)),C:(t,e)=>(h.localStorage.setItem(t,e),r()),F:t=>(h.localStorage.removeItem(t),r()),Yt:()=>r(Object.keys(h.localStorage))})}catch(t){s.Log.warn("Failed to setup localStorageProvider.")}let a=null!==l&&void 0!==l?l:u,c=a;function d(t){try{return t()}catch(t){if(t instanceof Error&&"SecurityError"===t.name)return i.Storage.Qt(u),null;throw t}}i.Storage={Ht:()=>c.Ht(),Wt:t=>n(void 0,void 0,void 0,function*(){return d(()=>c.Wt(t))}),N:t=>d(()=>c.N?c.N(t):null),C:(t,e)=>c.C(t,e),F:t=>c.F(t),Yt:()=>c.Yt(),Qt:t=>{a=t,c=t},Nt:t=>{c=t?u:a}},i.P=function(e){return n(this,void 0,void 0,function*(){var t=yield i.Storage.Wt(e);return JSON.parse(null!=t?t:"null")})},i.U=function(t,e){return n(this,void 0,void 0,function*(){yield i.Storage.C(t,JSON.stringify(e))})}},412:(t,e,i)=>{$Q(e),e.ui=void 0;const s=i(780);e.ui=function(t,e,i){try{var n=JSON.parse(t);return"object"==typeof n&&0 in n,n}catch(t){}return s.Log.error("Failed to parse "+i),null}},556:(t,e)=>{$Q(e),e.getUUID=void 0,e.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let i=(new Date).getTime(),n="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(4*Math.random())]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,t=>{let e=16*Math.random();return 0<i?(e=(i+e)%16|0,i=Math.floor(i/16)):(e=(n+e)%16|0,n=Math.floor(n/16)),("x"===t?e:7&e|8).toString(16)})}},84:(t,e)=>{$Q(e),e.it=void 0,e.it=function(t,e,i,n){return t||(e?""+e+i:""+n+i)}},539:(t,e)=>{$Q(e)},100:(t,e,i)=>{$Q(e),e.Xt=e.st=e.ti=e._t=void 0;i=i(48);const n="foreground",s="background",o=[];let r=n,u=!1;e._t=()=>r===n,e.ti=()=>u,e.st=t=>{o.unshift(t)};e.Xt=e=>{e!==r&&(r=e,o.forEach(t=>t(e)))},(0,i.Dt)("focus",()=>{(u=!1,e.Xt)(n)}),(0,i.Dt)("blur",()=>(0,e.Xt)(s)),(0,i.Dt)("beforeunload",()=>{u=!0,(0,e.Xt)(s)}),(0,i.xt)("visibilitychange",()=>{(0,e.Xt)("visible"===document.visibilityState?n:s)})},464:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(e,i);s&&("get"in s?e.__esModule:!s.writable&&!s.configurable)||(s={enumerable:!0,get:function(){return e[i]}}),$Q2(t,n,s)}:function(t,e,i,n){t[n=void 0===n?i:n]=e[i]}),s=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};$Q(e),e.Log=e.Storage=e.EventLogger=void 0,i(496);const o=i(728),r=($Q2(e,"EventLogger",{enumerable:!0,get:function(){return o.EventLogger}}),i(780));$Q2(e,"Log",{enumerable:!0,get:function(){return r.Log}});var u=i(972);const l=i(444);$Q2(e,"Storage",{enumerable:!0,get:function(){return l.Storage}}),s(i(496),e),s(i(707),e),s(i(856),e),s(i(320),e),s(i(184),e),s(i(512),e),s(i(500),e),s(i(788),e),s(i(832),e),s(i(664),e),s(i(780),e),s(i(188),e),s(i(716),e),s(i(264),e),s(i(48),e),s(i(360),e),s(i(612),e),s(i(604),e),s(i(688),e),s(i(808),e),s(i(283),e),s(i(876),e),s(i(972),e),s(i(384),e),s(i(396),e),s(i(136),e),s(i(296),e),s(i(444),e),s(i(412),e),s(i(84),e),s(i(539),e),s(i(556),e),s(i(100),e),__STATSIG__=$P($P({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{Log:r.Log,SDK_VERSION:u.SDK_VERSION})},696:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(e,i);s&&("get"in s?e.__esModule:!s.writable&&!s.configurable)||(s={enumerable:!0,get:function(){return e[i]}}),$Q2(t,n,s)}:function(t,e,i,n){t[n=void 0===n?i:n]=e[i]}),s=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};$Q(e),s(i(208),e),e.default=__STATSIG__},96:(t,e,i)=>{$Q(e),e.ai=void 0;const n=i(464);function s(t,e){null!=t&&t.forEach(t=>{delete e[t]})}e.ai=function(t,e){var i;return(e=(0,n.ui)(e,"checksum","DeltasEvaluationResponse"))?(t=t,i=e,t=$P($P($P({},t),i),{feature_gates:$P($P({},t.feature_gates),i.feature_gates),layer_configs:$P($P({},t.layer_configs),i.layer_configs),dynamic_configs:$P($P({},t.dynamic_configs),i.dynamic_configs)}),s((t=i=t).deleted_gates,t.feature_gates),delete t.deleted_gates,s(i.deleted_configs,t.dynamic_configs),delete t.deleted_configs,s(i.deleted_layers,t.layer_configs),delete t.deleted_layers,i=t,(t=(0,n.li)({feature_gates:i.feature_gates,dynamic_configs:i.dynamic_configs,layer_configs:i.layer_configs}))===e.checksum?JSON.stringify(i):{hadBadDeltaChecksum:!0,badChecksum:t,badMergedConfigs:i,badFullResponse:e.deltas_full_response}):{hadBadDeltaChecksum:!0}}},536:(t,e,i)=>{$Q(e);const n=i(464);e.default=class{constructor(){this.Zt=null,this.te=null,this.ee="Uninitialized",this.ie=0,this.ne=0}reset(){this.te=null,this.Zt=null,this.ee="Loading",this.ie=0,this.ne=0}finalize(){this.te||(this.ee="NoValues")}getValues(){return this.Zt?(0,n.ui)(this.Zt,"has_updates","EvaluationStoreValues"):null}setValues(t){var e;t&&!0===(null==(e=(0,n.ui)(t.data,"has_updates","EvaluationResponse"))?void 0:e.has_updates)&&(this.Zt=t.data,this.ie=e.time,this.ne=t.receivedAt,this.ee=t.source,this.te=e)}getGate(t){var e,t=null!=(e=null==(e=this.te)?void 0:e.feature_gates[t])?e:null;return this.se(t)}getConfig(t){var e,t=null!=(e=null==(e=this.te)?void 0:e.dynamic_configs[t])?e:null;return this.se(t)}getLayer(t){var e,t=null!=(e=null==(e=this.te)?void 0:e.layer_configs[t])?e:null;return this.se(t)}se(t){return{evaluation:t,details:this.re(null==t)}}re(t){return"Uninitialized"===this.ee||"NoValues"===this.ee?{reason:this.ee}:{reason:this.ee+":"+(t?"Unrecognized":"Recognized"),lcut:this.ie,receivedAt:this.ne}}}},400:function(t,e,i){var r=this&&this.__awaiter||$A();$Q(e);const u=i(464),l=i(96);class n extends u.NetworkCore{constructor(t,e){super(t,e);e=null==t?void 0:t.networkConfig;this.oe=(0,u.it)(null==e?void 0:e.initializeUrl,null==e?void 0:e.api,"/initialize",u.NetworkDefault.initializeApi)}fetchEvaluations(i,n,s,o){return r(this,void 0,void 0,function*(){var t=n?(0,u.ui)(n,"has_updates","InitializeResponse"):null;let e={user:o,hash:"djb2",deltasResponseRequested:!1};return null!=t&&t.has_updates&&(e=$P($P({},e),{sinceTime:t.time,previousDerivedFields:"derived_fields"in t?t.derived_fields:{},deltasResponseRequested:!0})),this.ue(i,t,e,s)})}ue(e,i,n,s){var o;return r(this,void 0,void 0,function*(){var t=yield this.post({sdkKey:e,url:this.oe,data:n,retries:2,isStatsigEncodable:!0,priority:s});return 204===(null==t?void 0:t.code)?'{"has_updates": false}':200!==(null==t?void 0:t.code)?null!=(o=null==t?void 0:t.body)?o:null:!0!==(null==i?void 0:i.has_updates)||!0!==(null==(o=t.body)?void 0:o.includes('"is_delta":true'))?t.body:"string"==typeof(t=(0,l.ai)(i,t.body))?t:this.ue(e,i,$P($P($P({},n),t),{deltasResponseRequested:!1}),s)})}}e.default=n},520:function(t,e,i){var s=this&&this.__awaiter||$A();$Q(e);const r=i(464),o=i(536),u=i(400),l=i(364);class n extends r.StatsigClientBase{static instance(t){var e=(0,r.i)().instance(t);return e instanceof n?e:(r.Log.warn((0,r.Et)()?"Unable to find StatsigClient instance":"StatsigClient.instance is not supported in server environments"),new n(null!=t?t:"",{}))}constructor(t,e,i=null){r.SDKType.At(t,"javascript-client");var n=new u.default(i,t=>{this.$emt(t)});super(t,null!=(t=null==i?void 0:i.dataAdapter)?t:new l.StatsigEvaluationsDataAdapter,n,i),this.le=new o.default,this.ae=e}initializeSync(){this.updateUserSync(this.ae)}initializeAsync(t){return this.updateUserAsync(this.ae,t)}updateUserSync(t){this.ce(t);t=this.dataAdapter.getDataSync(this.ae);this.le.setValues(t),this.de(t),this.he(null!=t?t:null,this.ae)}updateUserAsync(i,n){return s(this,void 0,void 0,function*(){this.ce(i);var t=this.ae,e=this.dataAdapter.getDataSync(t);this.Ut("Loading",e),this.le.setValues(e),e=yield this.dataAdapter.getDataAsync(e,t,n),t===this.ae&&(this.le.setValues(e),this.de(e))})}getContext(){return{sdkKey:this._,options:this.v,values:this.le.getValues(),user:JSON.parse(JSON.stringify(this.ae)),errorBoundary:this.Ct}}getAsyncContext(){return s(this,void 0,void 0,function*(){return $P($P({},this.getContext()),{session:yield r.StatsigSession.get(this._),stableID:yield r.StableID.get(this._)})})}checkGate(t,e){return this.getFeatureGate(t,e).value}getFeatureGate(t,e){var i=(0,r.oi)(t),{evaluation:i,details:n}=this.le.getGate(i),n=(0,r.$t)(t,n,i),s=null==(s=null==(i=this.Rt)?void 0:i.getGateOverride)?void 0:s.call(i,n,this.ae,e),i=null!=s?s:n;return this.Kt(t,(0,r.Jt)(this.ae,i),e),this.$emt({name:"gate_evaluation",gate:i}),i}getDynamicConfig(t,e){t=this.ve("dynamic_config",t,e);return this.$emt({name:"dynamic_config_evaluation",dynamicConfig:t}),t}getExperiment(t,e){t=this.ve("experiment",t,e);return this.$emt({name:"experiment_evaluation",experiment:t}),t}getLayer(e,i){var t=(0,r.oi)(e),{evaluation:t,details:n}=this.le.getLayer(t),n=(0,r.zt)(e,n,t),s=null==(s=null==(t=this.Rt)?void 0:t.getLayerOverride)?void 0:s.call(t,n,this.ae,i);const o=(0,r.Vt)(n,s,null!=(t=null==s?void 0:s.__value)?t:n.__value,t=>{this.Kt(e,(0,r.Lt)(this.ae,o,t),i)});return this.$emt({name:"layer_evaluation",layer:o}),o}logEvent(t,e,i){this.Pt.enqueue($P($P({},"string"==typeof t?{eventName:t,value:e,metadata:i}:t),{user:this.ae,time:Date.now()}))}Ft(){this.$on("error",()=>{"Loading"===this.loadingStatus&&this.de(null)})}de(t){this.le.finalize(),this.Ut("Ready",t)}he(t,e){this.dataAdapter.getDataAsync(t,e,{priority:"low"}).catch(t=>{r.Log.error("An error occurred after update.",t)})}ce(t){this.Pt.reset(),this.le.reset(),this.ae=(0,r.T)(t,this.v.environment);t=null==(t=this.ae.customIDs)?void 0:t.stableID;t&&r.StableID.setOverride(t,this._)}ve(t,e,i){var n=(0,r.oi)(e),{evaluation:n,details:s}=this.le.getConfig(n),s=(0,r.Bt)(e,s,n),n="experiment"===t?null==(t=null==(n=this.Rt)?void 0:n.getExperimentOverride)?void 0:t.call(n,s,this.ae,i):null==(n=null==(t=this.Rt)?void 0:t.getDynamicConfigOverride)?void 0:n.call(t,s,this.ae,i),t=null!=n?n:s;return this.Kt(e,(0,r.qt)(this.ae,t),i),t}}e.default=n},364:function(t,e,i){var o=this&&this.__awaiter||$A();$Q(e),e.StatsigEvaluationsDataAdapter=void 0;const n=i(464),s=i(400);class r extends n.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this.V=null,this.v=null}attach(t,e){super.attach(t,e),this.V=new s.default(null!=e?e:{})}getDataAsync(t,e,i){return this.I(t,e,i)}prefetchData(t,e){return this.M(t,e)}setData(t){var e=(0,n.ui)(t,"has_updates","data");e&&"user"in e?super.setData(t,e.user):n.Log.error("StatsigUser not found")}setDataLegacy(t,e){super.setData(t,e)}D(e,i,n){var s;return o(this,void 0,void 0,function*(){var t=yield null==(s=this.V)?void 0:s.fetchEvaluations(this.G(),e,null==n?void 0:n.priority,i);return null!=t?t:null})}m(t){t=(0,n.o)(this.G(),t,null==(t=this.v)?void 0:t.customUserCacheKeyFunc);return`${n.DataAdapterCachePrefix}.${this.h}.`+t}fn(t,e){return null!=t.fullUserHash&&t.fullUserHash===(0,n.vn)(e)}}e.StatsigEvaluationsDataAdapter=r},208:(t,e,i)=>{$Q(e),e.StatsigClient=void 0;i=i(520);e.StatsigClient=i.default,__STATSIG__=$P($P({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{StatsigClient:i.default}),e.default=__STATSIG__}},n={};function s(t){var e=n[t];return void 0!==e||(e=n[t]={exports:{}},i[t].call(e.exports,e,e.exports,s)),e.exports}return s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s(696).default})());