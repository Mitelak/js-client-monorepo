!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Statsig=e():t.Statsig=e()}(this,()=>(()=>{"use strict";var $Q=(e)=>Object.defineProperty(e,"__esModule",{value:!0});var $Q2=(a,b,c)=>Object.defineProperty(a,b,c);var $P=(a,b)=>Object.assign(a,b);var $A=()=>((t,r,u,l)=>{return new(u=u||Promise)(function(n,e){function i(t){try{s(l.next(t))}catch(t){e(t)}}function o(t){try{s(l.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(i,o)}s((l=l.apply(t,r||[])).next())})});var n={496:(t,n,e)=>{$Q2(n,"__esModule",{value:!0}),n.t=n.i=n.o=void 0,n.o=()=>__STATSIG__||u,n.i=t=>(0,n.o)()[t];n.t=t=>{var e=(0,n.o)();return t?e.instances&&e.instances[t]:e.lastInstance};var i,s="__STATSIG__",r="undefined"!=typeof window?window:{},e=void 0!==e.g?e.g:{},o="undefined"!=typeof globalThis?globalThis:{};const u=null!=(i=null!=(i=null!=(i=r[s])?i:e[s])?i:o[s])?i:{instance:n.t};r[s]=u,e[s]=u,o[s]=u},707:(t,e,n)=>{$Q(e),e.u=e.l=void 0;const s=n(832);function i(t,e,n){if(n)return n(t,e);const i=e&&e.customIDs?e.customIDs:{};e=["uid:"+(null!=(n=null==e?void 0:e.userID)?n:""),"cids:"+Object.keys(i).sort((t,e)=>t.localeCompare(e)).map(t=>t+"-"+i[t]).join(","),"k:"+t];return(0,s.h)(e.join("|"))}e.l=i,e.u=function(t,e,n){return e?i(t,e,n):(0,s.h)("k:"+t)}},856:(t,e)=>{$Q(e)},320:function(t,e,n){var s=this&&this.__awaiter||$A();$Q(e),e.DataAdapterCore=void 0;const l=n(780),a=n(604),r=n(296),o=n(444),c=n(412);function d(t,e,n,i){return{source:t,data:e,receivedAt:Date.now(),stableID:n,fullUserHash:(0,r.v)(i)}}e.DataAdapterCore=class{constructor(t,e){this._=t,this.p=e,this.O=null,this.m=null,this.j="statsig.last_modified_time."+e,this.S=new i}attach(t,e){this.m=t,this.O=e}getDataSync(t){var e=this.T(t),n=this.S.get(e,t);return n||((n=this.I(e))?(this.S.add(e,n),this.S.get(e,t)):null)}setData(t,e){var e=e&&(0,r.M)(e,null==(e=this.O)?void 0:e.environment),n=this.T(e);this.S.add(n,d("Bootstrap",t,null,e))}__primeInMemoryCache(t){this.S.merge(t)}D(e,n,i){return s(this,void 0,void 0,function*(){var t=null!=e?e:this.getDataSync(n),t=[this.A(t,n,i)];return null!=i&&i.timeoutMs&&t.push(new Promise(t=>setTimeout(t,i.timeoutMs)).then(()=>(l.Log.debug("Fetching latest value timed out"),null))),yield Promise.race(t)})}k(n,i){return s(this,void 0,void 0,function*(){var t=this.T(n),e=yield this.D(null,n,i);e&&this.S.add(t,$P($P({},e),{source:"Prefetch"}))})}A(r,o,u){return s(this,void 0,void 0,function*(){let t=null;r&&this.N(r,o)&&(t=r.data);var e=yield this.P(t,o,u);if(!e)return l.Log.debug("No response returned for latest value"),null;var n=(0,c.C)(e,"has_updates","Response"),i=this.R(),i=yield a.StableID.get(i);let s=null;if(!0===(null==n?void 0:n.has_updates))s=d("Network",e,i,o);else{if(!t||!1!==(null==n?void 0:n.has_updates))return null;s=d("NetworkNotModified",t,i,o)}e=this.T(o);return this.S.add(e,s),yield this.G(e,s),s})}R(){return null!=this.m?this.m:(l.Log.error(this._+" is not attached to a Client"),"")}I(t){var e=null==(e=o.Storage.U)?void 0:e.call(o.Storage,t);return null!=e&&(t=(0,c.C)(e,"source","Cached Result"))?$P($P({},t),{source:"Cache"}):null}G(t,e){return s(this,void 0,void 0,function*(){yield o.Storage.F(t,JSON.stringify(e)),yield this.K(t)})}K(n){var i;return s(this,void 0,void 0,function*(){var t=null!=(i=yield(0,o.L)(this.j))?i:{},e=(t[n]=Date.now(),u(t,10));e&&(delete t[e],yield o.Storage.J(e)),yield(0,o.q)(this.j,t)})}};class i{constructor(){this.V={}}get(t,e){var t=this.V[t],n=null==t?void 0:t.stableID,e=null==(e=null==e?void 0:e.customIDs)?void 0:e.stableID;return e&&n&&e!==n?(l.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):t}add(t,e){var n=u(this.V,9);n&&delete this.V[n],this.V[t]=e}merge(t){this.V=$P($P({},this.V),t)}}function u(s,t){var e=Object.keys(s);return e.length<=t?null:e.reduce((t,e)=>{var n=s[t],i=s[e];return"object"==typeof n&&"object"==typeof i?i.receivedAt<n.receivedAt?e:t:i<n?e:t})}},280:(t,e)=>{$Q(e),e.Diagnostics=void 0;e.Diagnostics=class{static mark(){}}},184:(t,e)=>{$Q(e)},512:function(t,u,e){var n=this&&this.__awaiter||$A();$Q2(u,"__esModule",{value:!0}),u.ErrorBoundary=u.EXCEPTION_ENDPOINT=void 0;const i=e(780),l=e(360),a=e(972),c=(u.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception","[Statsig] UnknownError");u.ErrorBoundary=class{constructor(t,e,n){this.m=t,this.O=e,this.B=n,this.$=new Set}wrap(i){try{const t=i;!function(t){const e=new Set;let n=Object.getPrototypeOf(t);for(;n&&n!==Object.prototype;)Object.getOwnPropertyNames(n).filter(t=>"function"==typeof(null===n||void 0===n?void 0:n[t])).forEach(t=>e.add(t)),n=Object.getPrototypeOf(n);return Array.from(e)}(t).forEach(e=>{const n=t[e];"$EB"in n||(t[e]=(...t)=>this.Y(e,()=>n.apply(i,t)),t[e].$EB=!0)})}catch(t){this.H("eb:wrap",t)}}logError(t,e){this.H(t,e)}Y(e,t){try{var n=t();return n&&n instanceof Promise?n.catch(t=>this.H(e,t)):n}catch(t){return this.H(e,t),null}}H(r,o){try{i.Log.warn("Caught error in "+r,{error:o});n(this,void 0,void 0,function*(){var t,e,n=o||Error(c),i=n instanceof Error,s=i?n.name:"No Name";this.$.has(s)||(this.$.add(s),null!=(t=null==(t=this.O)?void 0:t.networkConfig)&&t.preventAllNetworkTraffic?null!=(t=this.B)&&t.call(this,{name:"error",error:o}):(t=l.SDKType.W(this.m),e=a.StatsigMetadataProvider.get(),i=i?n.stack:function(t){try{return JSON.stringify(t)}catch(t){return c}}(n),n=JSON.stringify($P({tag:r,exception:s,info:i},$P($P({},e),{sdkType:t}))),yield(null!=(s=null==(i=null==(s=this.O)?void 0:s.networkConfig)?void 0:i.networkOverrideFunc)?s:fetch)(u.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this.m,"STATSIG-SDK-TYPE":String(t),"STATSIG-SDK-VERSION":String(e.sdkVersion),"Content-Type":"application/json"},body:n}),null!=(i=this.B)&&i.call(this,{name:"error",error:o})))}).then(()=>{}).catch(()=>{})}catch(t){}}}},500:(t,e)=>{$Q(e)},788:(t,e)=>{$Q(e)},728:function(t,e,n){var i=this&&this.__awaiter||$A();$Q(e),e.EventLogger=void 0;const s=n(832),r=n(780),o=n(716),u=n(48),l=n(876),a=n(444),c=n(84),d=n(100),h={},v=t=>{null!=(t=h[t])&&t.flush().catch(()=>{})};e.EventLogger=class{constructor(e,t,n,i){this.m=e,this.B=t,this.X=n,this.O=i,this.Z=[],this.tt={},this.et={},this.nt=!1,this.it=Date.now(),(h[e]=this).st=!0===(null==i?void 0:i.disableLogging),this.rt=null!=(t=null==i?void 0:i.loggingBufferMaxSize)?t:50;n=null==i?void 0:i.networkConfig;this.ot=(0,c.ut)(null==n?void 0:n.logEventUrl,null==n?void 0:n.api,"/rgstr",o.NetworkDefault.eventsApi),(0,d.lt)(t=>{"background"===t&&v(e)}),this.ct(),this.dt()}setLoggingDisabled(t){this.st=t}enqueue(t){this.ht(t)&&(this.vt(t),this.ft(),this.Z.length>this.rt)&&v(this.m)}incrementNonExposureCount(t){var e=null!=(e=this.et[t])?e:0;this.et[t]=e+1}reset(){this.tt={}}shutdown(){return i(this,void 0,void 0,function*(){this._t&&(clearInterval(this._t),this._t=null),yield this.flush()})}flush(){return i(this,void 0,void 0,function*(){var t;if(this.bt(),0!==this.Z.length)return t=this.Z,this.Z=[],this.gt(t)})}ft(){this.nt||(this.nt=!0,200<Date.now()-this.it)||setTimeout(()=>v(this.m),200)}ht(t){if((0,l.yt)(t)){var e=t.user||{},n=t.metadata||{},t=[t.eventName,e.userID,n.gate,n.config,n.ruleID].join("|"),e=this.tt[t],n=Date.now();if(e&&n-e<6e4)return!1;1e3<Object.keys(this.tt).length&&(this.tt={}),this.tt[t]=n}return!0}gt(t){var e,n;return i(this,void 0,void 0,function*(){if(this.st)this.Ot(t);else try{(!(0,d.jt)()&&this.X.isBeaconSupported()&&null==(null==(n=null==(e=this.O)?void 0:e.networkConfig)?void 0:n.networkOverrideFunc)?yield this.St(t):yield this.wt(t)).success?this.B({name:"logs_flushed",events:t}):this.Ot(t)}catch(t){r.Log.warn("Failed to flush events.")}})}wt(e){var n;return i(this,void 0,void 0,function*(){var t=yield this.X.post(this.Tt(e)),t=null!=(n=null==t?void 0:t.code)?n:-1;return{success:200<=t&&t<300}})}St(t){return i(this,void 0,void 0,function*(){return{success:yield this.X.beacon(this.Tt(t))}})}Tt(t){return{sdkKey:this.m,data:{events:t},url:this.ot,retries:3,isCompressable:!0,params:{[o.NetworkParam.EventCount]:String(t.length)}}}Ot(t){for(;500<t.length;)t.shift();var e=this.u();(0,a.q)(e,t).catch(()=>{r.Log.warn("Unable to save failed logs to storage")})}ct(){const e=this.u();i(this,void 0,void 0,function*(){var t=yield(0,a.L)(e);t&&(yield a.Storage.J(e),yield this.gt(t))}).catch(()=>{r.Log.warn("Failed to flush stored logs")})}u(){return"statsig.failed_logs."+(0,s.h)(this.m)}vt(t){t.user&&(t.user=$P({},t.user),delete t.user.privateAttributes);var e={},n=this.xt(),n=(n&&(e.statsigMetadata={currentPage:n}),$P($P({},t),e));r.Log.debug("Enqueued Event:",n),this.Z.push(n)}bt(){0!==Object.keys(this.et).length&&(this.vt({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:$P({},this.et)}}),this.et={})}xt(){var t;if(!1!==(null==(t=this.O)?void 0:t.includeCurrentPageUrlWithEvents))return(0,u.It)()}dt(){if((0,u.Mt)()){var t=null!=(t=null==(t=this.O)?void 0:t.loggingIntervalMs)?t:1e4;const e=setInterval(()=>{h[this.m]._t!==e?clearInterval(e):v(this.m)},t);this._t=e}}}},832:(t,e)=>{$Q(e),e.Dt=e.h=void 0;e.h=e=>{let n=0;for(let t=0;t<e.length;t++){var i=e.charCodeAt(t);n=(n<<5)-n+i,n&=n}return String(n>>>0)};e.Dt=t=>(0,e.h)(JSON.stringify(s(t)));const s=n=>{if(null==n)return null;var t=Object.keys(n).sort();const i={};return t.forEach(t=>{let e=n[t];!Array.isArray(e)&&e instanceof Object&&(e=s(e)),i[t]=e}),i}},664:(t,e)=>{$Q(e)},780:(t,e)=>{function n(t){return t.unshift("[Statsig]"),t}var i,s;$Q(e),e.Log=e.LogLevel=void 0,(s=i||(e.LogLevel=i={}))[s.None=0]="None",s[s.Error=1]="Error",s[s.Warn=2]="Warn",s[s.Info=3]="Info",s[s.Debug=4]="Debug";class r{static info(...t){this.level>=i.Info&&console.info(...n(t))}static debug(...t){this.level>=i.Debug&&console.debug(...n(t))}static warn(...t){this.level>=i.Warn&&console.warn(...n(t))}static error(...t){this.level>=i.Error&&console.error(...n(t))}}(e.Log=r).level=i.Error},716:(t,e)=>{$Q(e),e.NetworkParam=e.NetworkDefault=void 0,e.NetworkDefault={eventsApi:"https://prodregistryv2.org/v1",initializeApi:"https://featureassets.org/v1",specsApi:"https://assetsconfigcdn.org/v1"},e.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}},188:function(t,e,n){var r=this&&this.__awaiter||$A();$Q(e),e.NetworkCore=void 0,n(496);const o=n(496),_=n(280),b=n(780),u=n(716),l=n(360),a=n(48),c=n(612),d=n(604),h=n(972),g=n(100);e.NetworkCore=class{constructor(t,e){this.B=e,this.Et=1e4,this.At={},this.O={},t&&(this.O=t),this.O.networkConfig&&(this.At=this.O.networkConfig),this.At.networkTimeoutMs&&(this.Et=this.At.networkTimeoutMs)}post(e){return r(this,void 0,void 0,function*(){let t=yield this.kt(e);return e.isStatsigEncodable&&(t=this.Nt(e,t)),this.Pt($P({method:"POST",body:t},e))})}get(t){return this.Pt($P({method:"GET"},t))}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}beacon(i){return r(this,void 0,void 0,function*(){var t,e,n;return!!y(i)&&(t=yield this.kt(i),e=yield this.Ct(i),(n=navigator).sendBeacon.bind(n)(e,t))})}Pt(h){var v,f;return r(this,void 0,void 0,function*(){if(!y(h))return null;if(this.At.preventAllNetworkTraffic)return null;var{method:e,body:n,retries:i}=h;const s="undefined"!=typeof AbortController?new AbortController:null;var t=setTimeout(()=>null===s||void 0===s?void 0:s.abort(`Timeout of ${this.Et}ms expired.`),this.Et),r=yield this.Ct(h),o=null,u=(0,g.Rt)();try{var l,a,c,d={method:e,body:n,headers:$P({},h.headers),signal:null===s||void 0===s?void 0:s.signal,priority:h.priority,keepalive:u},o=yield(null!=(v=this.At.networkOverrideFunc)?v:fetch)(r,d);if(clearTimeout(t),o.ok)return c=yield o.text(),_.Diagnostics.mark(),{body:c,code:o.status};throw l=yield o.text().catch(()=>"No Text"),(a=new Error(`NetworkError: ${r} `+l)).name="NetworkError",a}catch(t){n=function(t,e){if(null!=t&&t.signal.aborted&&"string"==typeof t.signal.reason)return t.signal.reason;if("string"==typeof e)return e;if(e instanceof Error)return e.name+": "+e.message;return"Unknown Error"}(s,t);return _.Diagnostics.mark(),!i||i<=0?(null!=(f=this.B)&&f.call(this,{name:"error",error:t}),b.Log.error(`A networking error occured during ${e} request to ${r}.`,n,t),null):this.Pt($P($P({},h),{retries:i-1}))}})}Ct(n){return r(this,void 0,void 0,function*(){const e=$P({[u.NetworkParam.SdkKey]:n.sdkKey,[u.NetworkParam.SdkType]:l.SDKType.W(n.sdkKey),[u.NetworkParam.SdkVersion]:h.SDK_VERSION,[u.NetworkParam.Time]:String(Date.now()),[u.NetworkParam.SessionID]:yield c.SessionID.get(n.sdkKey)},n.params);var t=Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&");return n.url+(t?"?"+t:"")})}kt(s){return r(this,void 0,void 0,function*(){var{data:t,sdkKey:e}=s,n=yield d.StableID.get(e),i=yield c.SessionID.get(e),e=l.SDKType.W(e);return JSON.stringify($P($P({},t),{statsigMetadata:$P($P({},h.StatsigMetadataProvider.get()),{stableID:n,sessionID:i,sdkType:e})}))})}Nt(t,e){var n,i,s=(0,a.Gt)();if(!t.isStatsigEncodable||this.O.disableStatsigEncoding||null!=(0,o.i)("no-encode")||null==s||!s.btoa)return e;try{var r=null!=(n=s.btoa(e).split("").reverse().join(""))?n:e;return t.params=$P($P({},null!=(i=t.params)?i:{}),{[u.NetworkParam.StatsigEncoded]:"1"}),r}catch(t){return b.Log.warn("/initialize request encoding failed"),e}}};const y=t=>!!t.sdkKey||(b.Log.warn("Unable to make request without an SDK key"),!1)},264:(t,e)=>{$Q(e)},648:(t,e)=>{$Q(e)},360:(t,e)=>{$Q(e),e.SDKType=void 0;const n={};let i;e.SDKType={W:t=>{return(null!=(t=n[t])?t:"js-mono")+(null!==i&&void 0!==i?i:"")},Ut(t,e){n[t]=e},Ft(t){i&&"-react"!==i||(i="-"+t)}}},48:(t,i)=>{$Q2(i,"__esModule",{value:!0}),i.It=i.Kt=i.Lt=i.Mt=i.zt=i.Gt=void 0;i.Gt=()=>"undefined"!=typeof window?window:null,i.zt=()=>{var t=(0,i.Gt)();return null!=(t=null==t?void 0:t.document)?t:null},i.Mt=()=>null!=(0,i.zt)(),i.Lt=(t,e)=>{var n=(0,i.Gt)();"function"==typeof(null==n?void 0:n.addEventListener)&&n.addEventListener(t,e)},i.Kt=(t,e)=>{var n=(0,i.zt)();"function"==typeof(null==n?void 0:n.addEventListener)&&n.addEventListener(t,e)};i.It=()=>{var t;try{return null==(t=(0,i.Gt)())?void 0:t.location.href.split(/[?#]/)[0]}catch(t){}}},612:function(t,e,n){var o=this&&this.__awaiter||$A();$Q(e),e.StatsigSession=e.SessionID=void 0;const i=n(707),u=n(780),l=n(444),a=n(556),c=18e5,d=144e5,h={};function v(e,t){return setTimeout(()=>{var t=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(e);t&&t.$emt({name:"session_expired"})},t)}function f(t){return"statsig.session_id."+(0,i.u)(t)}e.SessionID={get:t=>o(void 0,void 0,void 0,function*(){return e.StatsigSession.get(t).then(t=>t.data.sessionID)})},e.StatsigSession={get:r=>o(void 0,void 0,void 0,function*(){null==h[r]&&(h[r]=function(n){return o(this,void 0,void 0,function*(){let t=yield function(t){t=f(t);return(0,l.L)(t)}(n);var e=Date.now();return{data:t=t||{sessionID:(0,a.getUUID)(),startTime:e,lastUpdate:e},sdkKey:n}})}(r));var t=yield h[r],e=Date.now(),n=t.data,i=((function({lastUpdate:t}){return Date.now()-t>c}(n)||function({startTime:t}){return Date.now()-t>d}(n))&&(n.sessionID=(0,a.getUUID)(),n.startTime=e),n.lastUpdate=e,n),s=t.sdkKey;return s=f(s),(0,l.q)(s,i).catch(()=>{u.Log.warn("Failed to save SessionID")}),clearTimeout(t.idleTimeoutID),clearTimeout(t.ageTimeoutID),e-=n.startTime,n=t.sdkKey,t.idleTimeoutID=v(n,c),t.ageTimeoutID=v(n,d-e),t})}},604:function(t,e,n){var i=this&&this.__awaiter||$A();$Q(e),e.StableID=void 0;const s=n(707),r=n(780),o=n(444),u=n(556),l={};function a(t){return"statsig.stable_id."+(0,s.u)(t)}function c(t,e){e=a(e);(0,o.q)(e,t).catch(()=>{r.Log.warn("Failed to save StableID")})}e.StableID={get:e=>i(void 0,void 0,void 0,function*(){return null==l[e]&&(l[e]=function(t){t=a(t);return(0,o.L)(t)}(e).then(t=>{return null!=t||c(t=(0,u.getUUID)(),e),t})),l[e]}),setOverride:(t,e)=>{l[e]=Promise.resolve(t),c(t,e)}}},688:function(t,e,n){var i=this&&this.__awaiter||$A();$Q(e),e.StatsigClientBase=void 0,n(496);const o=n(496),u=n(512),l=n(728),a=n(780),c=n(48),d=n(444);e.StatsigClientBase=class{constructor(t,e,n,i){this.loadingStatus="Uninitialized",this.Jt={};var s,r=this.$emt.bind(this);null!=(null==i?void 0:i.logLevel)&&(a.Log.level=i.logLevel),null!=i&&i.disableStorage&&d.Storage.qt(!0),this.m=t,this.O=null!=i?i:{},this.Vt=null!=(s=null==i?void 0:i.overrideAdapter)?s:null,this.Bt=new l.EventLogger(t,r,n,i),this.$t=new u.ErrorBoundary(t,i,r),this.$t.wrap(this),this.$t.wrap(n),this.$t.wrap(e),this.$t.wrap(this.Bt),(0,c.Mt)()&&(null!=(n=null!=(r=(s=(0,o.o)()).instances)?r:{})[t]&&a.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys."),n[t]=this,s.lastInstance=this,s.instances=n,__STATSIG__=s),this.dataAdapter=e,this.dataAdapter.attach(t,i),this.Yt()}updateRuntimeOptions(t){null!=t.disableLogging&&(this.O.disableLogging=t.disableLogging,this.Bt.setLoggingDisabled(t.disableLogging)),null!=t.disableStorage&&(this.O.disableStorage=t.disableStorage,d.Storage.qt(t.disableStorage))}flush(){return this.Bt.flush()}shutdown(){return i(this,void 0,void 0,function*(){this.$emt({name:"pre_shutdown"}),yield this.Bt.shutdown()})}on(t,e){this.Jt[t]||(this.Jt[t]=[]),this.Jt[t].push(e)}off(t,e){this.Jt[t]&&-1!==(e=this.Jt[t].indexOf(e))&&this.Jt[t].splice(e,1)}$on(t,e){e.__isInternal=!0,this.on(t,e)}$emt(n){var t;const e=e=>{try{e(n)}catch(t){!0===e.__isInternal?this.$t.logError("__emit:"+n.name,t):a.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",n)}};this.Jt[n.name]&&this.Jt[n.name].forEach(t=>e(t)),null!=(t=this.Jt["*"])&&t.forEach(e)}Ht(t,e){this.loadingStatus=t,this.$emt({name:"values_updated",status:t,values:e})}Wt(t,e,n){!0===(null==n?void 0:n.disableExposureLog)?this.Bt.incrementNonExposureCount(t):this.Bt.enqueue(e)}}},808:(t,e)=>{$Q(e)},283:(t,e)=>{$Q(e),e.DataAdapterCachePrefix=void 0,e.DataAdapterCachePrefix="statsig.cached"},876:(t,e)=>{$Q(e),e.Qt=e.Xt=e.Zt=e.yt=void 0;const n="statsig::config_exposure",i="statsig::gate_exposure",l=(t,e,n,i,s)=>({eventName:t,user:e,value:null,metadata:r(n,i),secondaryExposures:s,time:Date.now()});e.yt=({eventName:t})=>t===i||t===n,e.Zt=(t,e)=>{return l(i,t,e.details,{gate:e.name,gateValue:String(e.value),ruleID:e.ruleID},null!=(e=null==(t=e.__evaluation)?void 0:t.secondary_exposures)?e:[])},e.Xt=(t,e)=>{return l(n,t,e.details,{config:e.name,ruleID:e.ruleID},null!=(e=null==(t=e.__evaluation)?void 0:t.secondary_exposures)?e:[])};e.Qt=(t,e,n)=>{var i,s=e.__evaluation,r=!0===(null==(r=null==s?void 0:s.explicit_parameters)?void 0:r.includes(n));let o="",u=null!=(i=null==s?void 0:s.undelegated_secondary_exposures)?i:[];return r&&(o=null!=(i=s.allocated_experiment_name)?i:"",u=s.secondary_exposures),l("statsig::layer_exposure",t,e.details,{config:e.name,parameterName:n,ruleID:e.ruleID,allocatedExperiment:o,isExplicitParameter:String(r)},u)};const r=(t,e)=>(e.reason=t.reason,t.lcut&&(e.lcut=String(t.lcut)),t.receivedAt&&(e.receivedAt=String(t.receivedAt)),e)},972:(t,e)=>{$Q(e),e.StatsigMetadataProvider=e.SDK_VERSION=void 0,e.SDK_VERSION="1.2.0";let n={sdkVersion:e.SDK_VERSION,sdkType:"js-mono"};e.StatsigMetadataProvider={get:()=>n,add:t=>{n=$P($P({},n),t)}}},384:(t,e)=>{$Q(e)},396:(t,e)=>{$Q(e),e.te=e.ee=e.ne=e.ie=e.se=e.re=e.oe=e.ue=void 0;const s="default";function r(t,e,n,i){return{name:t,details:e,ruleID:null!=(t=null==n?void 0:n.rule_id)?t:s,__evaluation:n,value:i}}function i(t,e,n){var i=null!=(i=null==n?void 0:n.value)?i:{};return $P($P({},r(t,e,n,i)),{get:u(null==n?void 0:n.value)})}function o(t,e){var n=t=>Array.isArray(t)?"array":typeof t;return n(t)===n(e)}function u(i,s){return(t,e)=>{var n=null!=(n=null==i?void 0:i[t])?n:null;return null!=n&&(null==e||o(n,e))?(null!=s&&s(t),n):null!=e?e:null}}e.ue=function(t,e,n){return r(t,e,n,!0===(null==n?void 0:n.value))},e.oe=i,e.re=function(t,e,n){return t=i(t,e,n),$P($P({},t),{groupName:null!=(e=null==n?void 0:n.group_name)?e:null})},e.se=function(t,e,n,i){return $P($P({},r(t,e,n,void 0)),{get:u(null==n?void 0:n.value,i),groupName:null!=(t=null==n?void 0:n.group_name)?t:null,__value:null!=(e=null==n?void 0:n.value)?e:{}})},e.ie=function(t,e,n,i){return $P($P($P({},t),e),{get:u(n,i)})},e.ne=function(t){return Array.isArray(t)?"array":typeof t},e.ee=o,e.te=u},136:(t,e)=>{$Q(e)},296:(t,e,n)=>{$Q(e),e.v=e.M=void 0;const i=n(832),s=n(780);e.M=function(t,e){try{var n=JSON.parse(JSON.stringify(t));return null!=e&&(n.statsigEnvironment=e),n}catch(t){return s.Log.error("Failed to JSON.stringify user"),{}}},e.v=function(t){return t?(0,i.Dt)(t):null}},444:function(t,n,e){var i=this&&this.__awaiter||$A(),s=($Q2(n,"__esModule",{value:!0}),n.q=n.L=n.Storage=void 0,e(780)),e=e(48);const r={},o=t=>Promise.resolve(t),u={le:()=>"InMemory",U:t=>r[t]||null,ae:t=>o(r[t]||null),F:(t,e)=>(r[t]=e,o()),J:t=>(delete r[t],o()),ce:()=>o(Object.keys(r))};let l=null;try{const h=(0,e.Gt)();h&&h.localStorage&&"function"==typeof h.localStorage.getItem&&(l={le:()=>"LocalStorage",U:t=>h.localStorage.getItem(t),ae:t=>o(h.localStorage.getItem(t)),F:(t,e)=>(h.localStorage.setItem(t,e),o()),J:t=>(h.localStorage.removeItem(t),o()),ce:()=>o(Object.keys(h.localStorage))})}catch(t){s.Log.warn("Failed to setup localStorageProvider.")}let a=null!==l&&void 0!==l?l:u,c=a;function d(t){try{return t()}catch(t){if(t instanceof Error&&"SecurityError"===t.name)return n.Storage.de(u),null;throw t}}n.Storage={le:()=>c.le(),ae:t=>i(void 0,void 0,void 0,function*(){return d(()=>c.ae(t))}),U:t=>d(()=>c.U?c.U(t):null),F:(t,e)=>c.F(t,e),J:t=>c.J(t),ce:()=>c.ce(),de:t=>{a=t,c=t},qt:t=>{c=t?u:a}},n.L=function(e){return i(this,void 0,void 0,function*(){var t=yield n.Storage.ae(e);return JSON.parse(null!=t?t:"null")})},n.q=function(t,e){return i(this,void 0,void 0,function*(){yield n.Storage.F(t,JSON.stringify(e))})}},412:(t,e,n)=>{$Q(e),e.C=void 0;const s=n(780);e.C=function(t,e,n){try{var i=JSON.parse(t);return"object"==typeof i&&0 in i,i}catch(t){}return s.Log.error("Failed to parse "+n),null}},556:(t,e)=>{$Q(e),e.getUUID=void 0,e.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let n=(new Date).getTime(),i="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(4*Math.random())]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,t=>{let e=16*Math.random();return 0<n?(e=(n+e)%16|0,n=Math.floor(n/16)):(e=(i+e)%16|0,i=Math.floor(i/16)),("x"===t?e:7&e|8).toString(16)})}},84:(t,e)=>{$Q(e),e.ut=void 0,e.ut=function(t,e,n,i){return t||(e?""+e+n:""+i+n)}},539:(t,e)=>{$Q(e)},100:(t,e,n)=>{$Q(e),e.he=e.lt=e.Rt=e.jt=void 0;n=n(48);const i="foreground",s="background",r=[];let o=i,u=!1;e.jt=()=>o===i,e.Rt=()=>u,e.lt=t=>{r.unshift(t)};e.he=e=>{e!==o&&(o=e,r.forEach(t=>t(e)))},(0,n.Lt)("focus",()=>{(u=!1,e.he)(i)}),(0,n.Lt)("blur",()=>(0,e.he)(s)),(0,n.Lt)("beforeunload",()=>{u=!0,(0,e.he)(s)}),(0,n.Kt)("visibilitychange",()=>{(0,e.he)("visible"===document.visibilityState?i:s)})},464:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&("get"in s?e.__esModule:!s.writable&&!s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),$Q2(t,i,s)}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),s=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};$Q(e),e.Log=e.Storage=e.EventLogger=void 0,n(496);const r=n(728),o=($Q2(e,"EventLogger",{enumerable:!0,get:function(){return r.EventLogger}}),n(780));$Q2(e,"Log",{enumerable:!0,get:function(){return o.Log}});var u=n(972);const l=n(444);$Q2(e,"Storage",{enumerable:!0,get:function(){return l.Storage}}),s(n(496),e),s(n(707),e),s(n(856),e),s(n(320),e),s(n(184),e),s(n(512),e),s(n(500),e),s(n(788),e),s(n(832),e),s(n(664),e),s(n(780),e),s(n(188),e),s(n(716),e),s(n(264),e),s(n(648),e),s(n(48),e),s(n(360),e),s(n(612),e),s(n(604),e),s(n(688),e),s(n(808),e),s(n(283),e),s(n(876),e),s(n(972),e),s(n(384),e),s(n(396),e),s(n(136),e),s(n(296),e),s(n(444),e),s(n(412),e),s(n(84),e),s(n(539),e),s(n(556),e),s(n(100),e),__STATSIG__=$P($P({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{Log:o.Log,SDK_VERSION:u.SDK_VERSION})},696:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&("get"in s?e.__esModule:!s.writable&&!s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),$Q2(t,i,s)}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]}),s=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};$Q(e),s(n(208),e),e.default=__STATSIG__},96:(t,e,n)=>{$Q(e),e.ve=void 0;const i=n(464);function s(t,e){null!=t&&t.forEach(t=>{delete e[t]})}e.ve=function(t,e){var n;return(e=(0,i.C)(e,"checksum","DeltasEvaluationResponse"))?(t=t,n=e,t=$P($P($P({},t),n),{feature_gates:$P($P({},t.feature_gates),n.feature_gates),layer_configs:$P($P({},t.layer_configs),n.layer_configs),dynamic_configs:$P($P({},t.dynamic_configs),n.dynamic_configs)}),s((t=n=t).deleted_gates,t.feature_gates),delete t.deleted_gates,s(n.deleted_configs,t.dynamic_configs),delete t.deleted_configs,s(n.deleted_layers,t.layer_configs),delete t.deleted_layers,n=t,(t=(0,i.Dt)({feature_gates:n.feature_gates,dynamic_configs:n.dynamic_configs,layer_configs:n.layer_configs}))===e.checksum?JSON.stringify(n):{hadBadDeltaChecksum:!0,badChecksum:t,badMergedConfigs:n,badFullResponse:e.deltas_full_response}):{hadBadDeltaChecksum:!0}}},536:(t,e,n)=>{$Q(e);const i=n(464);e.default=class{constructor(){this.fe=null,this._e=null,this.be="Uninitialized",this.ge=0,this.ye=0}reset(){this._e=null,this.fe=null,this.be="Loading",this.ge=0,this.ye=0}finalize(){this._e||(this.be="NoValues")}getValues(){return this.fe?(0,i.C)(this.fe,"has_updates","EvaluationStoreValues"):null}setValues(t){var e;t&&!0===(null==(e=(0,i.C)(t.data,"has_updates","EvaluationResponse"))?void 0:e.has_updates)&&(this.fe=t.data,this.ge=e.time,this.ye=t.receivedAt,this.be=t.source,this._e=e)}getGate(t){var e;return this.pe(null==(e=this._e)?void 0:e.feature_gates,t)}getConfig(t){var e;return this.pe(null==(e=this._e)?void 0:e.dynamic_configs,t)}getLayer(t){var e;return this.pe(null==(e=this._e)?void 0:e.layer_configs,t)}getParamStore(t){var e;return this.pe(null==(e=this._e)?void 0:e.param_stores,t)}pe(t,e){let n=null;return{result:n=t?t[e]||t[(0,i.h)(e)]:n,details:this.Oe(null==n)}}Oe(t){return"Uninitialized"===this.be||"NoValues"===this.be?{reason:this.be}:{reason:this.be+":"+(t?"Unrecognized":"Recognized"),lcut:this.ge,receivedAt:this.ye}}}},400:function(t,e,n){var o=this&&this.__awaiter||$A();$Q(e);const u=n(464),l=n(96);class i extends u.NetworkCore{constructor(t,e){super(t,e);e=null==t?void 0:t.networkConfig;this.me=(0,u.ut)(null==e?void 0:e.initializeUrl,null==e?void 0:e.api,"/initialize",u.NetworkDefault.initializeApi)}fetchEvaluations(n,i,s,r){return o(this,void 0,void 0,function*(){var t=i?(0,u.C)(i,"has_updates","InitializeResponse"):null;let e={user:r,hash:"djb2",deltasResponseRequested:!1};return null!=t&&t.has_updates&&(e=$P($P({},e),{sinceTime:t.time,previousDerivedFields:"derived_fields"in t?t.derived_fields:{},deltasResponseRequested:!0})),this.je(n,t,e,s)})}je(e,n,i,s){var r;return o(this,void 0,void 0,function*(){var t=yield this.post({sdkKey:e,url:this.me,data:i,retries:2,isStatsigEncodable:!0,priority:s});return 204===(null==t?void 0:t.code)?'{"has_updates": false}':200!==(null==t?void 0:t.code)?null!=(r=null==t?void 0:t.body)?r:null:!0!==(null==n?void 0:n.has_updates)||!0!==(null==(r=t.body)?void 0:r.includes('"is_delta":true'))?t.body:"string"==typeof(t=(0,l.ve)(n,t.body))?t:this.je(e,n,$P($P($P({},i),t),{deltasResponseRequested:!1}),s)})}}e.default=i},340:(t,e,n)=>{$Q(e),e.Se=void 0;const b=n(464),g={disableExposureLog:!0};function y(t){return null==t||!1===t.disableExposureLog}function p(t,e){return null!=e&&!(0,b.ee)(t,e)}e.Se=function(v,f,_){return(t,e)=>{if(null==f)return e;var n,i,s,r,o,u,l,a,c,d,h=f[t];if(null==h||null!=e&&(0,b.ne)(e)!==h.param_type)return e;switch(h.ref_type){case"static":return h.value;case"gate":return d=h,v.getFeatureGate(d.gate_name,y(_)?void 0:g).value?d.pass_value:d.fail_value;case"dynamic_config":return d=h,l=e,a=_,p(c=(u=v).getDynamicConfig(d.config_name,g).get(d.param_name),l)?l:(y(a)&&u.getDynamicConfig(d.config_name),c);case"experiment":return l=h,a=e,u=_,p(o=(c=v).getExperiment(l.experiment_name,g).get(l.param_name),a)?a:(y(u)&&c.getExperiment(l.experiment_name),o);case"layer":return o=h,i=e,s=_,p(r=(n=v).getLayer(o.layer_name,g).get(o.param_name),i)?i:(y(s)&&n.getLayer(o.layer_name).get(o.param_name),r);default:return e}}}},520:function(t,e,n){var s=this&&this.__awaiter||$A();$Q(e);const o=n(464),r=n(536),u=n(400),l=n(340),a=n(364);class i extends o.StatsigClientBase{static instance(t){var e=(0,o.o)().instance(t);return e instanceof i?e:(o.Log.warn((0,o.Mt)()?"Unable to find StatsigClient instance":"StatsigClient.instance is not supported in server environments"),new i(null!=t?t:"",{}))}constructor(t,e,n=null){o.SDKType.Ut(t,"javascript-client");var i=new u.default(n,t=>{this.$emt(t)});super(t,null!=(t=null==n?void 0:n.dataAdapter)?t:new a.StatsigEvaluationsDataAdapter,i,n),this.we=new r.default,this.Te=e}initializeSync(){this.updateUserSync(this.Te)}initializeAsync(t){return this.updateUserAsync(this.Te,t)}updateUserSync(t){this.xe(t);t=this.dataAdapter.getDataSync(this.Te);this.we.setValues(t),this.Ie(t),this.Me(null!=t?t:null,this.Te)}updateUserAsync(n,i){return s(this,void 0,void 0,function*(){this.xe(n);var t=this.Te,e=this.dataAdapter.getDataSync(t);this.Ht("Loading",e),this.we.setValues(e),e=yield this.dataAdapter.getDataAsync(e,t,i),t===this.Te&&(this.we.setValues(e),this.Ie(e))})}getContext(){return{sdkKey:this.m,options:this.O,values:this.we.getValues(),user:JSON.parse(JSON.stringify(this.Te)),errorBoundary:this.$t}}getAsyncContext(){return s(this,void 0,void 0,function*(){return $P($P({},this.getContext()),{session:yield o.StatsigSession.get(this.m),stableID:yield o.StableID.get(this.m)})})}checkGate(t,e){return this.getFeatureGate(t,e).value}getFeatureGate(t,e){var{result:n,details:i}=this.we.getGate(t),i=(0,o.ue)(t,i,n),s=null==(s=null==(n=this.Vt)?void 0:n.getGateOverride)?void 0:s.call(n,i,this.Te,e),n=null!=s?s:i;return this.Wt(t,(0,o.Zt)(this.Te,n),e),this.$emt({name:"gate_evaluation",gate:n}),n}getDynamicConfig(t,e){var{result:n,details:i}=this.we.getConfig(t),i=(0,o.oe)(t,i,n),s=null==(s=null==(n=this.Vt)?void 0:n.getDynamicConfigOverride)?void 0:s.call(n,i,this.Te,e),n=null!=s?s:i;return this.Wt(t,(0,o.Xt)(this.Te,n),e),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:i}),n}getExperiment(t,e){var{result:n,details:i}=this.we.getConfig(t),i=(0,o.re)(t,i,n),s=null==(s=null==(n=this.Vt)?void 0:n.getExperimentOverride)?void 0:s.call(n,i,this.Te,e),n=null!=s?s:i;return this.Wt(t,(0,o.Xt)(this.Te,n),e),this.$emt({name:"experiment_evaluation",experiment:i}),n}getLayer(e,n){var{result:t,details:i}=this.we.getLayer(e),i=(0,o.se)(e,i,t),s=null==(s=null==(t=this.Vt)?void 0:t.getLayerOverride)?void 0:s.call(t,i,this.Te,n);const r=(0,o.ie)(i,s,null!=(t=null==s?void 0:s.__value)?t:i.__value,t=>{this.Wt(e,(0,o.Qt)(this.Te,r,t),n)});return this.$emt({name:"layer_evaluation",layer:r}),r}getParameterStore(t,e){var{result:n,details:i}=this.we.getParamStore(t);return this.Bt.incrementNonExposureCount(t),{name:t,details:i,__configuration:n,get:(0,l.Se)(this,n,e)}}logEvent(t,e,n){this.Bt.enqueue($P($P({},"string"==typeof t?{eventName:t,value:e,metadata:n}:t),{user:this.Te,time:Date.now()}))}Yt(){this.$on("error",()=>{"Loading"===this.loadingStatus&&this.Ie(null)})}Ie(t){this.we.finalize(),this.Ht("Ready",t)}Me(t,e){this.dataAdapter.getDataAsync(t,e,{priority:"low"}).catch(t=>{o.Log.error("An error occurred after update.",t)})}xe(t){this.Bt.reset(),this.we.reset(),this.Te=(0,o.M)(t,this.O.environment);t=null==(t=this.Te.customIDs)?void 0:t.stableID;t&&o.StableID.setOverride(t,this.m)}}e.default=i},364:function(t,e,n){var r=this&&this.__awaiter||$A();$Q(e),e.StatsigEvaluationsDataAdapter=void 0;const i=n(464),s=n(400);class o extends i.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this.X=null,this.O=null}attach(t,e){super.attach(t,e),this.X=new s.default(null!=e?e:{})}getDataAsync(t,e,n){return this.D(t,e,n)}prefetchData(t,e){return this.k(t,e)}setData(t){var e=(0,i.C)(t,"has_updates","data");e&&"user"in e?super.setData(t,e.user):i.Log.error("StatsigUser not found")}setDataLegacy(t,e){super.setData(t,e)}P(e,n,i){var s;return r(this,void 0,void 0,function*(){var t=yield null==(s=this.X)?void 0:s.fetchEvaluations(this.R(),e,null==i?void 0:i.priority,n);return null!=t?t:null})}T(t){t=(0,i.u)(this.R(),t,null==(t=this.O)?void 0:t.customUserCacheKeyFunc);return`${i.DataAdapterCachePrefix}.${this.p}.`+t}N(t,e){return null!=t.fullUserHash&&t.fullUserHash===(0,i.v)(e)}}e.StatsigEvaluationsDataAdapter=o},208:(t,e,n)=>{$Q(e),e.StatsigClient=void 0;n=n(520);e.StatsigClient=n.default,__STATSIG__=$P($P({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{StatsigClient:n.default}),e.default=__STATSIG__}},i={};function s(t){var e=i[t];return void 0!==e||(e=i[t]={exports:{}},n[t].call(e.exports,e,e.exports,s)),e.exports}return s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s(696).default})());