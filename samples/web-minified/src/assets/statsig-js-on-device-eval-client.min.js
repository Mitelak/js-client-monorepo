!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Statsig=t():e.Statsig=t()}(this,()=>(()=>{"use strict";var $Q=(e)=>Object.defineProperty(e,"__esModule",{value:!0});var $P = (a,b) => Object.assign(a,b);var n={496:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.st=t.i=void 0,t.i=()=>null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:u;t.st=e=>{var t;return e?null==(t=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instances)?void 0:t[e]:null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.lastInstance};var i,r="__STATSIG__",s="undefined"!=typeof window?window:{},n=void 0!==n.g?n.g:{},o="undefined"!=typeof globalThis?globalThis:{};const u=null!=(i=null!=(i=null!=(i=s[r])?i:n[r])?i:o[r])?i:{instance:t.st};s[r]=u,n[r]=u,o[r]=u},856:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},320:function(e,t,n){var s=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.DataAdapterCore=void 0;const i=n(512),r=n(780),o=n(104),u=n(283),l=n(296),a=n(444),c=n(412);t.DataAdapterCore=class{constructor(e,t){this.o=e,this.u=t,this.l=null,this.h=null,this.v={},this._="statsig.last_modified_time."+t}attach(e,t){this.h=e,this.l=new i.ErrorBoundary(e),(0,o.monitorClass)(this.l,this)}getDataSync(e){var e=this.m(e),t=this.v[e];return t||((t=this.p(e))?(this.S(e,t),this.v[e]):null)}getDataAsync(n,i){var r;return s(this,void 0,void 0,function*(){var e=null!=n?n:this.getDataSync(i),e=yield this.O(null!=(r=null==e?void 0:e.data)?r:null,i),t=this.m(i);return e&&this.S(t,e),"Network"!==(null==e?void 0:e.source)&&"NetworkNotModified"!==(null==e?void 0:e.source)||(yield this.j(t,e)),e})}prefetchData(n){return s(this,void 0,void 0,function*(){var e=this.m(n),t=yield this.getDataAsync(null,n);t&&this.S(e,$P($P({},t),{source:"Prefetch"}))})}setData(e,t){t=this.m(t);this.S(t,{source:"Bootstrap",data:e,receivedAt:Date.now()})}__primeInMemoryCache(e){this.v=$P($P({},this.v),e)}O(n,i){return s(this,void 0,void 0,function*(){var e,t=yield this.T(n,i);return t?(e=(0,c.typedJsonParse)(t,"has_updates","Failure while attempting to persist latest value"),n&&!1===(null==e?void 0:e.has_updates)?{source:"NetworkNotModified",data:n,receivedAt:Date.now()}:!0!==(null==e?void 0:e.has_updates)?null:{source:"Network",data:t,receivedAt:Date.now()}):(r.Log.debug("No response returned for latest value"),null)})}I(){return null!=this.h?this.h:(r.Log.error(this.o+" is not attached to a Client"),"")}m(e){e=(0,l.getUserStorageKey)(this.I(),e);return`${u.DataAdapterCachePrefix}.${this.u}.`+e}S(e,t){var n=Object.entries(this.v);n.length<10||([n]=n.reduce((e,t)=>t[1]<e[1]?t:e),delete this.v[n]),this.v[e]=t}p(e){var t=null==(t=a.Storage.A)?void 0:t.call(a.Storage,e);return null!=t&&(e=(0,c.typedJsonParse)(t,"source","Failed to parse cached result"))?$P($P({},e),{source:"Cache"}):null}j(e,t){return s(this,void 0,void 0,function*(){yield a.Storage.M(e,JSON.stringify(t)),yield this.D(e)})}D(n){var i;return s(this,void 0,void 0,function*(){var e=null!=(i=yield(0,a.N)(this._))?i:{},t=(e[n]=Date.now(),Object.entries(e));t.length<=10||(delete e[(t=t.reduce((e,t)=>t[1]<e[1]?t:e))[0]],yield a.Storage.P(t[0])),yield(0,a.R)(this._,e)})}}},280:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=t.captureDiagnostics=void 0;const i=n(780),r=n(256),s="undefined"!=typeof performance&&void 0!==performance.mark;let o=[];t.captureDiagnostics=function(e,t){u.mark(e+":start"),t=t();const n=()=>{u.mark(e+":end"),(e+":end").startsWith("initialize:")&&u.flush()};return t&&t instanceof Promise?t.finally(()=>n()):(n(),t)};class u{static mark(e,t){s&&(e=performance.mark(e,{detail:t}),o.push(e))}static flush(){var e=performance.getEntriesByType("resource").filter(e=>e.name.startsWith(r.NetworkDefault.initializeApi)||e.name.startsWith(r.NetworkDefault.specsApi)||e.name.startsWith(r.NetworkDefault.eventsApi)),e={markers:o,resources:e};i.Log.debug("Diagnostics",e,JSON.stringify(e)),o=[]}}t.Diagnostics=u},184:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},512:function(e,l,t){var n=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.ErrorBoundary=l.EXCEPTION_ENDPOINT=void 0;const i=t(780),a=t(360),c=t(972);l.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";l.ErrorBoundary=class{constructor(e){this.h=e,this.C=new Set}capture(t,e,n){try{var i=e();return i&&i instanceof Promise?i.catch(e=>this.G(t,e,n)):i}catch(e){return this.G(t,e,n),null}}logError(e,t){this.G(e,t)}G(s,o,u){try{i.Log.warn("Caught error in "+s,{error:o});n(this,void 0,void 0,function*(){var e,t,n=null!=o?o:Error("[Statsig] Error was empty"),i=n instanceof Error,r=i?n.name:"No Name";this.C.has(r)||(this.C.add(r),e=a.SDKType.F(this.h),t=c.StatsigMetadataProvider.get(),i=i?n.stack:function(e){try{return JSON.stringify(e)}catch(e){return"[Statsig] Failed to get string for error."}}(n),n=JSON.stringify($P({tag:s,exception:r,info:i},$P($P({},t),{sdkType:e}))),yield fetch(l.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this.h,"STATSIG-SDK-TYPE":String(e),"STATSIG-SDK-VERSION":String(t.sdkVersion),"Content-Type":"application/json"},body:n}),null!=u&&u({name:"error",error:o}))}).then(()=>{}).catch(()=>{})}catch(e){}}}},500:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},788:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},728:function(e,t,n){var i=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.EventLogger=void 0;const r=n(832),s=n(780),o=n(256),u=n(452),l=n(876),a=n(444),c=n(412),d=n(84),h=n(100);t.EventLogger=class{constructor(e,t,n,i){this.h=e,this.L=t,this.U=n,this.J=i,this.K=[],this.q={},this.V={},this.B=!1,this.$=Date.now(),this.H=!0===(null==i?void 0:i.disableLogging),this.W=null!=(e=null==i?void 0:i.loggingBufferMaxSize)?e:50;n=null!=(t=null==i?void 0:i.loggingIntervalMs)?t:1e4,this.Y=setInterval(()=>this.X(),n),e=null==i?void 0:i.networkConfig;this.Z=(0,d.tt)(null==e?void 0:e.logEventUrl,null==e?void 0:e.api,"/rgstr",o.NetworkDefault.eventsApi),this.et=(0,d.tt)(null==e?void 0:e.logEventBeaconUrl,null==e?void 0:e.api,"/log_event_beacon",o.NetworkDefault.eventsApi),(0,h.nt)(this.it.bind(this)),this.ot()}setLoggingDisabled(e){this.H=e}enqueue(e){this.rt(e)&&(this.ut(e),this.lt(),this.K.length>this.W)&&this.X()}incrementNonExposureCount(e){var t=null!=(t=this.V[e])?t:0;this.V[e]=t+1}reset(){this.q={}}shutdown(){return i(this,void 0,void 0,function*(){this.Y&&(clearInterval(this.Y),this.Y=null),yield this.flush()})}flush(){return i(this,void 0,void 0,function*(){var e;this.ct(),0!==this.K.length&&(e=this.K,this.K=[],yield this.dt(e))})}it(e){"background"===e&&this.X()}lt(){this.B||(this.B=!0,200<Date.now()-this.$)||setTimeout(()=>this.X(),200)}rt(e){if((0,l.ht)(e)){var e=[e.eventName,null==(t=e.user)?void 0:t.userID,null==(t=e.metadata)?void 0:t.gate,null==(t=e.metadata)?void 0:t.config,null==(t=e.metadata)?void 0:t.ruleID].join("|"),t=this.q[e],n=Date.now();if(t&&n-t<6e4)return!1;1e3<Object.keys(this.q).length&&(this.q={}),this.q[e]=n}return!0}X(){this.flush().catch(()=>{})}dt(e){return i(this,void 0,void 0,function*(){if(this.H)this.vt(e);else try{(!(0,h._t)()&&this.U.isBeaconSupported()?yield this.ft(e):yield this.gt(e)).success?this.L({name:"logs_flushed",events:e}):this.vt(e)}catch(e){s.Log.warn("Failed to flush events.")}})}gt(t){return i(this,void 0,void 0,function*(){var e=yield this.U.post({sdkKey:this.h,data:{events:t},url:this.Z,retries:3,params:{[u.NetworkParam.EventCount]:String(t.length)}}),e=null!=e&&e.body?(0,c.typedJsonParse)(e.body,"success","Failed to parse SendEventsResponse"):null;return{success:!0===(null==e?void 0:e.success)}})}ft(e){return i(this,void 0,void 0,function*(){return{success:yield this.U.beacon({sdkKey:this.h,data:{events:e},url:this.et})}})}vt(e){for(;500<e.length;)e.shift();var t=this.bt();(0,a.R)(t,e).catch(()=>{s.Log.warn("Unable to save failed logs to storage")})}ot(){const t=this.bt();i(this,void 0,void 0,function*(){var e=yield(0,a.N)(t);e&&(yield a.Storage.P(t),yield this.dt(e))}).catch(()=>{s.Log.warn("Failed to flush stored logs")})}bt(){return"statsig.failed_logs."+(0,r.DJB2)(this.h)}ut(e){e.user&&(e.user=$P({},e.user),delete e.user.privateAttributes);var t={},n=this.yt();n&&(t.statsigMetadata={currentPage:n}),this.K.push($P($P({},e),t))}ct(){0!==Object.keys(this.V).length&&(this.ut({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:$P({},this.V)}}),this.V={})}yt(){var e;if(!1!==(null==(e=this.J)?void 0:e.includeCurrentPageUrlWithEvents)&&"undefined"!=typeof window&&"object"==typeof window.location)try{return window.location.href.split(/[?#]/)[0]}catch(e){}}}},832:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DJB2Object=t.DJB2=void 0;t.DJB2=t=>{let n=0;for(let e=0;e<t.length;e++){var i=t.charCodeAt(e);n=(n<<5)-n+i,n&=n}return String(n>>>0)};t.DJB2Object=e=>(0,t.DJB2)(JSON.stringify(r(e)));const r=n=>{if(null==n)return null;var e=Object.keys(n).sort();const i={};return e.forEach(e=>{let t=n[e];t instanceof Object&&(t=r(t)),i[e]=t}),i}},664:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},780:(e,t)=>{function n(e){return e.unshift("[Statsig]"),e}var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Log=t.LogLevel=void 0,(r=i||(t.LogLevel=i={}))[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Info=3]="Info",r[r.Debug=4]="Debug";class s{static info(...e){this.level>=i.Info&&console.info(...n(e))}static debug(...e){this.level>=i.Debug&&console.debug(...n(e))}static warn(...e){this.level>=i.Warn&&console.warn(...n(e))}static error(...e){this.level>=i.Error&&console.error(...n(e))}}(t.Log=s).level=i.Error},104:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.monitorClass=void 0;const s=n(280),o=n(688);function c(e,t,n,i){var r=i instanceof o.StatsigClientBase?i.St.bind(i):void 0;return e.capture(t,()=>(0,s.captureDiagnostics)(t,()=>n.apply(i)),r)}function d(e){return"object"==typeof e&&(e=Object.getPrototypeOf(e))&&"object"==typeof e?e:null}t.monitorClass=function(t,e){try{{var n=t;var i=e;var r;const s=i;for(const o of function(e){const t=new Set;let n=d(e);for(;n&&n!==Object.prototype;)Object.getOwnPropertyNames(n).filter(e=>"function"==typeof(null===n||void 0===n?void 0:n[e])).forEach(e=>t.add(e)),n=Object.getPrototypeOf(n);return Array.from(t)}(s))if("constructor"!==o){const u=s[o];s[o]=function(...e){return c(n,o,()=>u.apply(this,e),i)}}for(const l of function(e){const t=new Set,n=d(e);return Object.getOwnPropertyNames((null===n||void 0===n?void 0:n.constructor)||{}).filter(e=>{var t;return"caller"!==e&&"arguments"!==e&&"callee"!==e&&"function"==typeof(null==(t=null===n||void 0===n?void 0:n.constructor)?void 0:t[e])}).forEach(e=>t.add(e)),Array.from(t)}(s)){const a=null==(r=null===s||void 0===s?void 0:s.constructor)?void 0:r[l];(null===s||void 0===s?void 0:s.constructor)[l]=function(...e){return c(n,s.constructor.name+"."+l,()=>a.apply(s.constructor,e),i)}}return}}catch(e){t.logError("monitorClass",e)}}},188:function(e,t,n){var i=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkCore=void 0,n(496);const h=n(280),v=n(780),r=n(452),s=n(360),o=n(612),u=n(604),l=n(972);t.NetworkCore=class{constructor(e,t){this.J=e,this.L=t,this.Ot=null!=(e=null==(t=null==e?void 0:e.networkConfig)?void 0:t.networkTimeoutMs)?e:1e4}post(t){return i(this,void 0,void 0,function*(){var e=yield this.jt(t);return this.Tt($P({method:"POST",body:this.t(t,e)},t))})}get(e){return this.Tt($P({method:"GET"},e))}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)}beacon(n){return i(this,void 0,void 0,function*(){var e,t;return!!_(n)&&(e=yield this.wt(n),t=yield this.jt(n),navigator.sendBeacon(e,t))})}Tt(c){var d;return i(this,void 0,void 0,function*(){if(!_(c))return null;var{method:t,body:n,retries:i}=c;const r=new AbortController;var e,s,o,u=setTimeout(()=>r.abort(`Timeout of ${this.Ot}ms expired.`),this.Ot),l=yield this.wt(c);let a=null;try{if(a=yield fetch(l,{method:t,body:n,headers:$P({},c.headers),signal:r.signal}),clearTimeout(u),a.ok)return o=yield a.text(),h.Diagnostics.mark("_sendRequest:response-received",{status:a.status,contentLength:a.headers.get("content-length")}),{body:o,code:a.status};throw e=yield a.text().catch(()=>"No Text"),(s=new Error(`Failed to fetch: ${l} `+e)).name="NetworkError",s}catch(e){n=function(e,t){if(e.signal.aborted&&"string"==typeof e.signal.reason)return e.signal.reason;if("string"==typeof t)return t;if(t instanceof Error)return t.name+": "+t.message;return null}(r,e);return h.Diagnostics.mark("_sendRequest:error",{error:n,status:null===a||void 0===a?void 0:a.status,contentLength:null===a||void 0===a?void 0:a.headers.get("content-length")}),!i||i<=0?(null!=(d=this.L)&&d.call(this,{name:"error",error:e}),v.Log.error(`A networking error occured during ${t} request to ${l}.`,n,e),null):this.Tt($P($P({},c),{retries:i-1}))}})}wt(t){return i(this,void 0,void 0,function*(){var e=$P({[r.NetworkParam.SdkKey]:t.sdkKey,[r.NetworkParam.SdkType]:s.SDKType.F(t.sdkKey),[r.NetworkParam.SdkVersion]:l.SDK_VERSION,[r.NetworkParam.Time]:String(Date.now()),[r.NetworkParam.SessionID]:yield o.SessionID.get(t.sdkKey)},t.params),e=Object.entries(e).map(([e,t])=>encodeURIComponent(e)+"="+encodeURIComponent(t)).join("&");return t.url+(e?"?"+e:"")})}jt(r){return i(this,void 0,void 0,function*(){var{data:e,sdkKey:t}=r,n=yield u.StableID.get(t),i=yield o.SessionID.get(t),t=s.SDKType.F(t);return JSON.stringify($P($P({},e),{statsigMetadata:$P($P({},l.StatsigMetadataProvider.get()),{stableID:n,sessionID:i,sdkType:t})}))})}t(e,t){var n;return!(null!=(null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__["no-encode"])||null!=(n=this.J)&&n.disableStatsigEncoding)&&e.isStatsigEncodable&&"undefined"!=typeof window&&window.btoa&&(e.params=$P($P({},null!=(n=e.params)?n:{}),{[r.NetworkParam.StatsigEncoded]:"1"}),null!=(e=window.btoa(t).split("").reverse().join("")))?e:t}};const _=e=>!!e.sdkKey||(v.Log.warn("Unable to make request without an SDK key"),!1)},256:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkDefault=void 0,t.NetworkDefault={eventsApi:"https://events.statsigapi.net/v1",initializeApi:"https://featuregates.org/v1",specsApi:"https://api.statsigcdn.com/v1"}},452:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkParam=void 0,t.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se"}},264:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},360:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDKType=void 0;const n={};let i;t.SDKType={F:e=>{return(null!=(e=n[e])?e:"js-mono")+(null!==i&&void 0!==i?i:"")},It(e,t){n[e]=t},At(e){i&&"-react"!==i||(i="-"+e)}}},48:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.xt=i.Mt=i.Dt=i.Et=void 0;i.Et=()=>"undefined"!=typeof window?window:null,i.Dt=()=>{var e=(0,i.Et)();return null!=(e=null==e?void 0:e.document)?e:null},i.Mt=(e,t)=>{var n=(0,i.Et)();"function"==typeof(null==n?void 0:n.addEventListener)&&n.addEventListener(e,t)};i.xt=(e,t)=>{var n=(0,i.Dt)();"function"==typeof(null==n?void 0:n.addEventListener)&&n.addEventListener(e,t)}},612:function(e,o,t){var n=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})};Object.defineProperty(o,"__esModule",{value:!0}),o.SessionID=void 0;const i=t(832),u=t(780),l=t(444),a=t(556),c={},d={},h={};function v(e){return"statsig.session_id."+(0,i.DJB2)(e)}o.SessionID={get:e=>null!=h[e]?h[e]:h[e]=o.SessionID.Nt(e),Nt:s=>n(void 0,void 0,void 0,function*(){let t=c[s];var n=Date.now();if(null==t){let e=yield function(e){e=v(e);return(0,l.N)(e)}(s);null==e&&(e={sessionID:(0,a.getUUID)(),startTime:n,lastUpdate:n}),t=e,c[s]=t}var e=null!=(e=d[s])?e:{ageTimeoutID:null,idleTimeoutID:null,emitFunction:()=>{}},i=((144e5<n-t.startTime||18e5<n-t.lastUpdate)&&(t.sessionID=(0,a.getUUID)(),t.startTime=n),t.lastUpdate=n,t),r=s;return r=v(s),(0,l.R)(r,i).catch(()=>{u.Log.warn("Failed to save SessionID")}),e.idleTimeoutID=o.SessionID.kt(e,e.idleTimeoutID,18e5),e.ageTimeoutID=o.SessionID.kt(e,e.ageTimeoutID,144e5-(n-t.startTime)),c[s]=t,d[s]=e,h[s]=null,t.sessionID}),Pt:(e,t)=>{var n=null!=(n=d[t])?n:{ageTimeoutID:null,idleTimeoutID:null,emitFunction:e};n.emitFunction=e,d[t]=n},kt:(e,t,n)=>(clearTimeout(null!=t?t:void 0),setTimeout(e.emitFunction,n))}},604:function(e,t,n){var i=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.StableID=void 0;const r=n(832),s=n(780),o=n(444),u=n(556),l={};function a(e){return"statsig.stable_id."+(0,r.DJB2)(e)}function c(e,t){t=a(t);(0,o.R)(t,e).catch(()=>{s.Log.warn("Failed to save StableID")})}t.StableID={get:t=>i(void 0,void 0,void 0,function*(){return null==l[t]&&(l[t]=function(e){e=a(e);return(0,o.N)(e)}(t).then(e=>{return null!=e||c(e=(0,u.getUUID)(),t),e})),l[t]}),setOverride:(e,t)=>{l[t]=Promise.resolve(e),c(e,t)}}},688:function(e,t,n){var i=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClientBase=void 0,n(496);const s=n(496),o=n(512),u=n(728),l=n(780),a=n(612),c=n(604),d=n(444);t.StatsigClientBase=class{constructor(e,t,n,i){this.loadingStatus="Uninitialized",this.Rt={},this.h=e,this.J=null!=i?i:{},null!=i&&i.disableStorage&&d.Storage.Ct(!0),null!=i&&i.overrideStableID&&c.StableID.setOverride(i.overrideStableID,e),l.Log.level=null!=(r=null==i?void 0:i.logLevel)?r:l.LogLevel.Warn,this.Gt=null!=(r=null==i?void 0:i.overrideAdapter)?r:null,this.Ft=new u.EventLogger(e,this.St.bind(this),n,i),a.SessionID.Pt(()=>{this.St({name:"session_expired"})},e),this.l=new o.ErrorBoundary(e);var r=(0,s.i)(),n=null!=(n=r.instances)?n:{};null!=n[e]&&l.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys.");n[e]=this,r.lastInstance=this,r.instances=n,__STATSIG__=r,this.dataAdapter=t,this.dataAdapter.attach(e,i)}updateRuntimeOptions(e){null!=e.disableLogging&&(this.J.disableLogging=e.disableLogging,this.Ft.setLoggingDisabled(e.disableLogging)),null!=e.disableStorage&&(this.J.disableStorage=e.disableStorage,d.Storage.Ct(e.disableStorage))}flush(){return this.Ft.flush()}shutdown(){return i(this,void 0,void 0,function*(){this.St({name:"pre_shutdown"}),yield this.Ft.shutdown()})}on(e,t){this.Rt[e]||(this.Rt[e]=[]),this.Rt[e].push(t)}off(e,t){this.Rt[e]&&-1!==(t=this.Rt[e].indexOf(t))&&this.Rt[e].splice(t,1)}__on(e,t){t.__isInternal=!0,this.on(e,t)}St(n){var e;const t=t=>{try{t(n)}catch(e){!0===t.__isInternal?this.l.logError("_emit:"+n.name,e):l.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",n)}};this.Rt[n.name]&&this.Rt[n.name].forEach(e=>t(e)),null!=(e=this.Rt["*"])&&e.forEach(t)}Lt(e,t){this.loadingStatus=e,this.St({name:"values_updated",status:e,values:t})}Ut(e,t,n){!0===(null==n?void 0:n.disableExposureLog)?this.Ft.incrementNonExposureCount(e):this.Ft.enqueue(t)}}},808:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},283:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataAdapterCachePrefix=void 0,t.DataAdapterCachePrefix="statsig.cached"},876:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Jt=t.Kt=t.qt=t.ht=void 0;const n="statsig::config_exposure",i="statsig::gate_exposure",l=(e,t,n,i,r)=>({eventName:e,user:t,value:null,metadata:s(n,i),secondaryExposures:r,time:Date.now()});t.ht=({eventName:e})=>e===i||e===n,t.qt=(e,t)=>{return l(i,e,t.details,{gate:t.name,gateValue:String(t.value),ruleID:t.ruleID},null!=(t=null==(e=t.__evaluation)?void 0:e.secondary_exposures)?t:[])},t.Kt=(e,t)=>{return l(n,e,t.details,{config:t.name,ruleID:t.ruleID},null!=(t=null==(e=t.__evaluation)?void 0:e.secondary_exposures)?t:[])};t.Jt=(e,t,n)=>{var i,r=t.__evaluation,s=!0===(null==(s=null==r?void 0:r.explicit_parameters)?void 0:s.includes(n));let o="",u=null!=(i=null==r?void 0:r.undelegated_secondary_exposures)?i:[];return s&&(o=null!=(i=r.allocated_experiment_name)?i:"",u=r.secondary_exposures),l("statsig::layer_exposure",e,t.details,{config:t.name,parameterName:n,ruleID:t.ruleID,allocatedExperiment:o,isExplicitParameter:String(s)},u)};const s=(e,t)=>(t.reason=e.reason,e.lcut&&(t.lcut=String(e.lcut)),e.receivedAt&&(t.receivedAt=String(e.receivedAt)),t)},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigMetadataProvider=t.SDK_VERSION=void 0,t.SDK_VERSION="0.0.1-beta.30";let n={sdkVersion:t.SDK_VERSION,sdkType:"js-mono"};t.StatsigMetadataProvider={get:()=>n,add:e=>{n=$P($P({},n),e)}}},384:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},396:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vt=t.zt=t.Bt=t.$t=void 0;const r="default";function s(e,t,n,i){return{name:e,details:t,ruleID:null!=(e=null==n?void 0:n.rule_id)?e:r,__evaluation:n,value:i}}function o(s,o){return(e,t)=>{var n,i,r=null!=(r=null==s?void 0:s[e])?r:null;return null==r||null!=t&&(n=t,(i=e=>Array.isArray(e)?"array":typeof e)(r)!==i(n))?null!=t?t:null:(null!=o&&o(e),r)}}t.$t=function(e,t,n){return s(e,t,n,!0===(null==n?void 0:n.value))},t.Bt=function(e,t,n){return $P($P({},s(e,t,n,null!=(e=null==n?void 0:n.value)?e:{})),{groupName:null,get:o(null==n?void 0:n.value)})},t.zt=function(e,t,n,i){return $P($P({},s(e,t,n,void 0)),{get:o(null==n?void 0:n.value,i),groupName:null!=(e=null==n?void 0:n.group_name)?e:null,__value:null!=(t=null==n?void 0:n.value)?t:{}})},t.Vt=function(e,t,n,i){return $P($P($P({},e),t),{get:o(n,i)})}},136:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},296:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUnitIDFromUser=t.getUserStorageKey=t.normalizeUser=void 0;const i=n(832);t.normalizeUser=function(e,t){try{var n=JSON.parse(JSON.stringify(e));return null!=t&&(n.statsigEnvironment=t),n}catch(e){throw new Error("User object must be convertable to JSON string.")}},t.getUserStorageKey=function(e,t){return(0,i.DJB2Object)({sdkKey:e,user:t})},t.getUnitIDFromUser=function(e,t){var n;return"string"==typeof t&&"userid"!==t.toLowerCase()?null!=(n=null==(n=e.customIDs)?void 0:n[t])?n:null==(n=null==e?void 0:e.customIDs)?void 0:n[t.toLowerCase()]:e.userID}},444:function(e,t,n){var i=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})},n=(Object.defineProperty(t,"__esModule",{value:!0}),t.R=t.N=t.Storage=void 0,n(780));const r={},s={Ht:()=>"InMemory",A(e){return null!=(e=r[e])?e:null},Wt(e){return Promise.resolve(null!=(e=r[e])?e:null)},M(e,t){return r[e]=t,Promise.resolve()},P(e){return delete r[e],Promise.resolve()},Yt(){return Promise.resolve(Object.keys(r))}};let o=null;try{"undefined"!=typeof window&&"localStorage"in window&&(o={Ht:()=>"LocalStorage",A(e){return localStorage.getItem(e)},Wt(e){return Promise.resolve(localStorage.getItem(e))},M(e,t){return localStorage.setItem(e,t),Promise.resolve()},P(e){return localStorage.removeItem(e),Promise.resolve()},Yt(){var e=Object.keys(localStorage);return Promise.resolve(e)}})}catch(e){n.Log.warn("Failed to setup localStorageProvider.")}let u=null!==o&&void 0!==o?o:s,l=u;t.Storage={Ht:()=>l.Ht(),Wt:e=>l.Wt(e),M:(e,t)=>l.M(e,t),P:e=>l.P(e),Yt:()=>l.Yt(),A:e=>{var t;return null!=(t=null==(t=l.A)?void 0:t.call(l,e))?t:null},Qt:e=>{u=e,l=e},Ct:e=>{l=e?s:u}},t.N=function(t){return i(this,void 0,void 0,function*(){var e=yield l.Wt(t);return JSON.parse(null!=e?e:"null")})},t.R=function(e,t){return i(this,void 0,void 0,function*(){yield l.M(e,JSON.stringify(t))})}},412:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.typedJsonParse=void 0;const r=n(780);t.typedJsonParse=function(e,t,n){try{var i=JSON.parse(e);return"object"==typeof i&&0 in i,i}catch(e){}return r.Log.error(n),null}},556:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUUID=void 0,t.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let n=(new Date).getTime(),i="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(4*Math.random())]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,e=>{let t=16*Math.random();return 0<n?(t=(n+t)%16|0,n=Math.floor(n/16)):(t=(i+t)%16|0,i=Math.floor(i/16)),("x"===e?t:7&t|8).toString(16)})}},84:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tt=void 0,t.tt=function(e,t,n,i){return e||(t?""+t+n:""+i+n)}},539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},100:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Xt=t.nt=t._t=void 0;n=n(48);const i="foreground",r="background",s=[];let o=i;t._t=()=>o===i,t.nt=e=>{s.unshift(e)};t.Xt=t=>{t!==o&&(o=t,s.forEach(e=>e(t)))},(0,n.Mt)("focus",()=>(0,t.Xt)(i)),(0,n.Mt)("blur",()=>(0,t.Xt)(r)),(0,n.Mt)("beforeunload",()=>(0,t.Xt)(r)),(0,n.xt)("visibilitychange",()=>{(0,t.Xt)("visible"===document.visibilityState?i:r)})},464:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Log=t.Storage=t.EventLogger=void 0,n(496);const s=n(728),o=(Object.defineProperty(t,"EventLogger",{enumerable:!0,get:function(){return s.EventLogger}}),n(780));Object.defineProperty(t,"Log",{enumerable:!0,get:function(){return o.Log}});var u=n(972);const l=n(444);Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return l.Storage}});var a=n(556);r(n(496),t),r(n(856),t),r(n(320),t),r(n(184),t),r(n(512),t),r(n(500),t),r(n(788),t),r(n(832),t),r(n(664),t),r(n(780),t),r(n(104),t),r(n(452),t),r(n(188),t),r(n(256),t),r(n(264),t),r(n(48),t),r(n(360),t),r(n(612),t),r(n(604),t),r(n(688),t),r(n(808),t),r(n(283),t),r(n(876),t),r(n(972),t),r(n(384),t),r(n(396),t),r(n(136),t),r(n(296),t),r(n(444),t),r(n(412),t),r(n(84),t),r(n(539),t),r(n(556),t),r(n(100),t),__STATSIG__=$P($P({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{EventLogger:s.EventLogger,Log:o.Log,getUUID:a.getUUID,Storage:l.Storage,SDK_VERSION:u.SDK_VERSION})},448:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(376),t),t.default=__STATSIG__},532:(e,t)=>{function u(e){return e.setUTCHours(0,0,0,0),e.getTime()}Object.defineProperty(t,"__esModule",{value:!0}),t.default={compareNumbers(e,t,n){if(null==e||null==t)return!1;var i=Number(e),r=Number(t);if(isNaN(i)||isNaN(r))return!1;switch(n){case"gt":return t<e;case"gte":return t<=e;case"lt":return e<t;case"lte":return e<=t;default:return!1}},compareVersions(e,t,n){if(null==e||null==t)return!1;var e=String(e),t=String(t),i=e=>{var t=e.indexOf("-");return-1!==t?e.substring(0,t):e},r=((e,t)=>{var n=e.split(".").map(e=>parseInt(e)),i=t.split(".").map(e=>parseInt(e));let r=0;for(;r<Math.max(n.length,i.length);){var s=r<n.length?n[r]:0,o=r<i.length?i[r]:0;if(s<o)return-1;if(o<s)return 1;r++}return 0})(i(e),i(t));switch(n){case"version_gt":return 0<r;case"version_gte":return 0<=r;case"version_lt":return r<0;case"version_lte":return r<=0;case"version_eq":return 0===r;case"version_neq":return 0!==r;default:return!1}},compareStringInArray(r,e,s){if(!Array.isArray(e))return!1;const o="any_case_sensitive"!==s&&"none_case_sensitive"!==s;var t=-1!==e.findIndex(e=>{var t=String(r),e=String(e),n=o?t.toLowerCase():t,i=o?e.toLowerCase():e;switch(s){case"any":case"none":case"any_case_sensitive":case"none_case_sensitive":return n===i;case"str_starts_with_any":return n.startsWith(i);case"str_ends_with_any":return n.endsWith(i);case"str_contains_any":case"str_contains_none":return n.includes(i);default:return!1}});switch(s){case"none":case"none_case_sensitive":case"str_contains_none":return!t;default:return t}},compareStringWithRegEx(e,t){try{var n=String(e);if(n.length<1e3)return new RegExp(String(t)).test(n)}catch(e){}return!1},compareTime(n,i,r){if(null==n||null==i)return!1;try{let e=new Date(String(n)),t=(isNaN(e.getTime())&&(e=new Date(Number(n))),new Date(String(i)));isNaN(t.getTime())&&(t=new Date(Number(i)));var s=e.getTime(),o=t.getTime();if(isNaN(s)||isNaN(o))return!1;switch(r){case"before":return s<o;case"after":return o<s;case"on":return u(e)===u(t);default:return!1}}catch(e){return!1}}}},947:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resultToLayerEval=t.resultToConfigEval=t.resultToGateEval=t.makeEvalResult=void 0,t.makeEvalResult=function(e){return $P($P({},{unsupported:!1,bool_value:!1,rule_id:"",secondary_exposures:[],json_value:{},explicit_parameters:null,allocated_experiment_name:null,is_experiment_group:!1,group_name:null,undelegated_secondary_exposures:void 0}),e)},t.resultToGateEval=function(e,t){return{name:e.name,id_type:e.idType,rule_id:t.rule_id,value:t.bool_value,secondary_exposures:t.secondary_exposures}},t.resultToConfigEval=function(e,t){var n;return{name:e.name,id_type:e.idType,rule_id:t.rule_id,value:t.json_value,secondary_exposures:t.secondary_exposures,group:null!=(n=t.group_name)?n:"",group_name:null!=(n=t.group_name)?n:void 0,is_device_based:!1,is_experiment_active:e.isActive,is_user_in_experiment:t.is_experiment_group}},t.resultToLayerEval=function(e,t,n){return{name:e.name,rule_id:n.rule_id,value:n.json_value,secondary_exposures:n.secondary_exposures,undelegated_secondary_exposures:n.undelegated_secondary_exposures,allocated_experiment_name:null!=(e=n.allocated_experiment_name)?e:"",explicit_parameters:null!=(e=n.explicit_parameters)?e:[],group:null!=(e=n.group_name)?e:"",group_name:null!=(e=n.group_name)?e:void 0,is_device_based:!1,is_experiment_active:null==t?void 0:t.isActive,is_user_in_experiment:n.is_experiment_group}}},931:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const c=n(464),i=n(72),d=n(532),h=n(947);function v(e){return(0,i.SHA256)(e).dataView().getBigUint64(0,!1)}function u(e){return null!=e&&"object"==typeof e}t.default=class{constructor(e){this.le=e}evaluateGate(e,t){var{spec:e,details:n}=this.$e("gate",e);return e?{evaluation:(0,h.resultToGateEval)(e,this.We(e,t)),details:n}:{evaluation:null,details:n}}evaluateConfig(e,t){var{spec:e,details:n}=this.$e("config",e);return e?{evaluation:(0,h.resultToConfigEval)(e,this.We(e,t)),details:n}:{evaluation:null,details:n}}evaluateLayer(e,t){var n,{spec:e,details:i}=this.$e("layer",e);return e?(n=null!=(n=null==(t=this.We(e,t))?void 0:t.allocated_experiment_name)?n:"",n=this.le.getSpecAndSourceInfo("config",n).spec,{evaluation:(0,h.resultToLayerEval)(e,n,t),details:i}):{evaluation:null,details:i}}$e(e,t){e=this.le.getSpecAndSourceInfo(e,t);return{details:this.Ye(e),spec:e.spec}}Ye(e){var{source:e,spec:t,lcut:n,receivedAt:i}=e;return"Uninitialized"===e||"NoValues"===e?{reason:e}:{reason:e+":"+(null==t?"Unrecognized":"Recognized"),lcut:n,receivedAt:i}}We(e,t){var n=u(e.defaultValue)?e.defaultValue:void 0;if(!e.enabled)return(0,h.makeEvalResult)({json_value:n,rule_id:"disabled"});var i=[];for(const o of e.rules){var r,s=this.He(o,t);if(s.unsupported)return s;if(i.push(...s.secondary_exposures),s.bool_value)return this.Qe(o.configDelegate,t,i)||(r=function(e,t,n){if(100===e.passPercentage)return!0;if(0===e.passPercentage)return!1;t=v(n.salt+"."+(null!=(n=e.salt)?n:e.id)+"."+(null!=(n=(0,c.getUnitIDFromUser)(t,e.idType))?n:""));return Number(t%BigInt(1e4))<100*e.passPercentage}(o,t,e),(0,h.makeEvalResult)({rule_id:s.rule_id,bool_value:r,json_value:r?s.json_value:n,secondary_exposures:i,undelegated_secondary_exposures:i,is_experiment_group:s.is_experiment_group,group_name:s.group_name}))}return(0,h.makeEvalResult)({json_value:n,secondary_exposures:i,undelegated_secondary_exposures:i,rule_id:"default"})}He(e,t){var n=[];let i=!0;for(const s of e.conditions){var r=this.Xe(s,t);if(r.unsupported)return r;n.push(...r.secondary_exposures),r.bool_value||(i=!1)}return(0,h.makeEvalResult)({rule_id:e.id,bool_value:i,json_value:u(e.returnValue)?e.returnValue:void 0,secondary_exposures:n,is_experiment_group:!0===e.isExperimentGroup,group_name:e.groupName})}Xe(e,t){let n=null,i=!1;var r=e.field,s=e.targetValue,o=e.idType,u=e.type;switch(u){case"public":return(0,h.makeEvalResult)({bool_value:!0});case"pass_gate":case"fail_gate":var l=String(s),l=this.Ze(l,t);return(0,h.makeEvalResult)({bool_value:"fail_gate"===u?!l.bool_value:l.bool_value,secondary_exposures:l.secondary_exposures});case"multi_pass_gate":case"multi_fail_gate":return this.tn(s,u,t);case"user_field":case"ip_based":case"ua_based":n=function(e,t){var n;if(null==t||"object"!=typeof e||null==e)return null;var i=e;return null!=(n=null!=(n=null!=(n=null!=(n=null!=(n=i[t])?n:i[t.toLowerCase()])?n:null==(i=null==e?void 0:e.custom)?void 0:i[t])?n:null==(i=null==e?void 0:e.custom)?void 0:i[t.toLowerCase()])?n:null==(i=null==e?void 0:e.privateAttributes)?void 0:i[t])?n:null==(i=null==e?void 0:e.privateAttributes)?void 0:i[t.toLowerCase()]}(t,r);break;case"environment_field":n=function(e,t){if(null==t)return null;e=e.statsigEnvironment;if(null!=e){const n=t.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==i?e[i]:void 0}}(t,r);break;case"current_time":n=Date.now();break;case"user_bucket":l=v(null!==(l=String(null!=(l=null==(l=e.additionalValues)?void 0:l.salt)?l:"")+"."+(0,c.getUnitIDFromUser)(t,o))?l:"");n=Number(l%BigInt(1e3));break;case"unit_id":n=(0,c.getUnitIDFromUser)(t,o);break;default:return(0,h.makeEvalResult)({unsupported:!0})}var a=e.operator;switch(a){case"gt":case"gte":case"lt":case"lte":i=d.default.compareNumbers(n,s,a);break;case"version_gt":case"version_gte":case"version_lt":case"version_lte":case"version_eq":case"version_neq":i=d.default.compareVersions(n,s,a);break;case"any":case"none":case"str_starts_with_any":case"str_ends_with_any":case"str_contains_any":case"str_contains_none":case"any_case_sensitive":case"none_case_sensitive":i=d.default.compareStringInArray(n,s,a);break;case"str_matches":i=d.default.compareStringWithRegEx(n,s);break;case"before":case"after":case"on":i=d.default.compareTime(n,s,a);break;case"eq":i=n==s;break;case"neq":i=n!=s;break;case"in_segment_list":case"not_in_segment_list":return(0,h.makeEvalResult)({unsupported:!0})}return(0,h.makeEvalResult)({bool_value:i})}Qe(e,t,n){var i;return e&&(i=this.le.getSpecAndSourceInfo("config",e).spec,i)?(t=this.We(i,t),(0,h.makeEvalResult)($P($P({},t),{allocated_experiment_name:e,explicit_parameters:i.explicitParameters,secondary_exposures:n.concat(t.secondary_exposures),undelegated_secondary_exposures:n}))):null}Ze(e,t){var n=[];let i=!1;var r=this.le.getSpecAndSourceInfo("gate",e)["spec"];if(r){r=this.We(r,t);if(r.unsupported)return r;i=r.bool_value,n.push(...r.secondary_exposures),n.push({gate:e,gateValue:String(i),ruleID:r.rule_id})}return(0,h.makeEvalResult)({bool_value:i,secondary_exposures:n})}tn(e,t,n){if(!Array.isArray(e))return(0,h.makeEvalResult)({unsupported:!0});var i="multi_pass_gate"===t,r=[];let s=!1;for(const u of e){if("string"!=typeof u)return(0,h.makeEvalResult)({unsupported:!0});var o=this.Ze(u,n);if(o.unsupported)return o;if(r.push(...o.secondary_exposures),i?!0===o.bool_value:!1===o.bool_value){s=!0;break}}return(0,h.makeEvalResult)({bool_value:s,secondary_exposures:r})}}},160:function(e,t,n){var i=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=n(464);class s extends r.NetworkCore{constructor(e=null){super(e);e=null==e?void 0:e.networkConfig;this.en=(0,r.tt)(null==e?void 0:e.downloadConfigSpecsUrl,null==e?void 0:e.api,"/download_config_specs",r.NetworkDefault.specsApi)}fetchConfigSpecs(t){var n;return i(this,void 0,void 0,function*(){var e=yield this.get({sdkKey:t,url:this.en});return null!=(n=null==e?void 0:e.body)?n:null})}}t.default=s},480:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n(464);function r(e){return(0,i.typedJsonParse)(e,"has_updates","Failed to parse DownloadConfigSpecsResponse")}t.default=class{constructor(){this.Zt=null,this.te=null,this.ee="Uninitialized",this.ne=0,this.ie=0}getValues(){return this.Zt?r(this.Zt):null}setValuesFromDataAdapter(e){var t;e&&!0===(null==(t=r(e.data))?void 0:t.has_updates)&&(this.ne=t.time,this.ie=e.receivedAt,this.ee=e.source,this.te=t,this.Zt=e.data)}reset(){this.te=null,this.Zt=null,this.ee="Loading"}finalize(){this.te||(this.ee="NoValues")}getSpecAndSourceInfo(e,t){var e=this.nn(e);return{spec:null!=(e=null==e?void 0:e.find(e=>e.name===t))?e:null,source:this.ee,lcut:this.ne,receivedAt:this.ie}}nn(e){var t;switch(e){case"gate":return null==(t=this.te)?void 0:t.feature_gates;case"config":return null==(t=this.te)?void 0:t.dynamic_configs;case"layer":return null==(t=this.te)?void 0:t.layer_configs}}}},368:function(e,t,n){var i=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(464),r=n(931),s=n(160),u=n(480),l=n(4);class a extends o.StatsigClientBase{static instance(e){var t=(0,o.i)().instance(e);return t instanceof a?t:(o.Log.warn("Unable to find StatsigOnDeviceEvalClient instance"),new a(null!=e?e:""))}constructor(e,t=null){o.SDKType.It(e,"js-on-device-eval-client");var n=new s.default(t);super(e,null!=(e=null==t?void 0:t.dataAdapter)?e:new l.StatsigSpecsDataAdapter,n,t),(0,o.monitorClass)(this.l,this),(0,o.monitorClass)(this.l,n),this.le=new u.default,this.rn=new r.default(this.le)}initializeSync(){this.le.reset();var e=this.dataAdapter.getDataSync();this.le.setValuesFromDataAdapter(e),this.le.finalize(),this.Lt("Ready",e),this.de(e)}initializeAsync(){return i(this,void 0,void 0,function*(){this.le.reset(),this.Lt("Loading",null);var e=this.dataAdapter.getDataSync();this.le.setValuesFromDataAdapter(e),e=yield this.dataAdapter.getDataAsync(e),this.le.setValuesFromDataAdapter(e),this.le.finalize(),this.Lt("Ready",e)})}getContext(){return{sdkKey:this.h,options:this.J,values:this.le.getValues()}}getAsyncContext(){return i(this,void 0,void 0,function*(){return $P($P({},this.getContext()),{sessionID:yield o.SessionID.get(this.h),stableID:yield o.StableID.get(this.h)})})}checkGate(e,t,n){return this.getFeatureGate(e,t,n).value}getFeatureGate(e,t,n){t=(0,o.normalizeUser)(t,this.J.environment);var{evaluation:i,details:r}=this.rn.evaluateGate(e,t),r=(0,o.$t)(e,r,i);return this.Ut(e,(0,o.qt)(t,r),n),this.St({name:"gate_evaluation",gate:r}),r}getDynamicConfig(e,t,n){e=this.he("dynamic_config",e,t,n);return this.St({name:"dynamic_config_evaluation",dynamicConfig:e}),e}getExperiment(e,t,n){e=this.he("experiment",e,t,n);return this.St({name:"experiment_evaluation",experiment:e}),e}getLayer(t,n,i){n=(0,o.normalizeUser)(n,this.J.environment);var{evaluation:e,details:r}=this.rn.evaluateLayer(t,n);const s=(0,o.zt)(t,r,e,e=>{this.Ut(t,(0,o.Jt)(n,s,e),i)});return this.St({name:"layer_evaluation",layer:s}),s}logEvent(e,t,n,i){this.Ft.enqueue($P($P({},"string"==typeof e?{eventName:e,value:n,metadata:i}:e),{user:t,time:Date.now()}))}de(e){this.dataAdapter.getDataAsync(e).catch(e=>{o.Log.error("An error occurred after update.",e)})}he(e,t,n,i){n=(0,o.normalizeUser)(n,this.J.environment);var{evaluation:r,details:s}=this.rn.evaluateConfig(t,n),s=(0,o.Bt)(t,s,r),r="experiment"===e?null==(e=null==(r=this.Gt)?void 0:r.getExperimentOverride)?void 0:e.call(r,s,n,i):null==(r=null==(e=this.Gt)?void 0:e.getDynamicConfigOverride)?void 0:r.call(e,s,n,i),e=null!=r?r:s;return this.Ut(t,(0,o.Kt)(n,e),i),e}}t.default=a},4:function(e,t,n){var i=this&&this.__awaiter||function(e,o,u,l){return new(u=u||Promise)(function(n,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function r(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}s((l=l.apply(e,o||[])).next())})},r=(Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigSpecsDataAdapter=void 0,n(464));const s=n(160);class o extends r.DataAdapterCore{constructor(){super("SpecsDataAdapter","specs"),this.U=null}attach(e,t){super.attach(e,t),this.U=new s.default(null!=t?t:{})}T(e,t){var n;return i(this,void 0,void 0,function*(){return null!=(n=yield null==(n=this.U)?void 0:n.fetchConfigSpecs(this.I()))?n:null})}}t.StatsigSpecsDataAdapter=o},376:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigSpecsDataAdapter=t.StatsigOnDeviceEvalClient=void 0;var i=n(368);t.StatsigOnDeviceEvalClient=i.default;const r=n(4);Object.defineProperty(t,"StatsigSpecsDataAdapter",{enumerable:!0,get:function(){return r.StatsigSpecsDataAdapter}}),__STATSIG__=$P($P({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{StatsigSpecsDataAdapter:r.StatsigSpecsDataAdapter,StatsigOnDeviceEvalClient:i.default}),t.default=__STATSIG__},72:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SHA256=void 0;const i=n(891);Object.defineProperty(t,"SHA256",{enumerable:!0,get:function(){return i.SHA256}})},891:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SHA256=void 0,t.SHA256=function(e){return(new i).update(e)};const n=[-2147483648,8388608,32768,128],o=[24,16,8,0],m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];class i{constructor(){this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.lastByteIndex=-1}update(n){if(!this.finalized){if("string"!=typeof n)throw new Error('Must be of type "string"');var i;let e=0,t;for(var r=n.length,s=this.blocks;e<r;){for(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t=this.start;e<r&&t<64;++e)(i=n.charCodeAt(e))<128?s[t>>2]|=i<<o[3&t++]:(i<2048?s[t>>2]|=(192|i>>6)<<o[3&t++]:(i<55296||57344<=i?s[t>>2]|=(224|i>>12)<<o[3&t++]:(i=65536+((1023&i)<<10|1023&n.charCodeAt(++e)),s[t>>2]|=(240|i>>18)<<o[3&t++],s[t>>2]|=(128|i>>12&63)<<o[3&t++]),s[t>>2]|=(128|i>>6&63)<<o[3&t++]),s[t>>2]|=(128|63&i)<<o[3&t++]);this.lastByteIndex=t,this.bytes+=t-this.start,64<=t?(this.block=s[16],this.start=t-64,this.hash(),this.hashed=!0):this.start=t}4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296)}return this}finalize(){var e,t;this.finalized||(this.finalized=!0,e=this.blocks,t=this.lastByteIndex,e[16]=this.block,e[t>>2]|=n[3&t],this.block=e[16],56<=t&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash())}hash(){var e=this.blocks;let t=this.h0,n=this.h1,i=this.h2,r=this.h3,s=this.h4,o=this.h5,u=this.h6,l=this.h7,a,c,d,h,v,_,f,g,p,b,y;for(a=16;a<64;++a)v=e[a-15],c=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3,v=e[a-2],d=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10,e[a]=e[a-16]+c+e[a-7]+d<<0;for(y=n&i,a=0;a<64;a+=4)this.first?(g=704751109,v=e[0]-210244248,l=v-1521486534<<0,r=v+143694565<<0,this.first=!1):(c=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),d=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),g=t&n,h=g^t&i^y,f=s&o^~s&u,v=l+d+f+m[a]+e[a],_=c+h,l=r+v<<0,r=v+_<<0),c=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),d=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),p=r&t,h=p^r&n^g,f=l&s^~l&o,v=u+d+f+m[a+1]+e[a+1],_=c+h,u=i+v<<0,i=v+_<<0,c=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),d=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),b=i&r,h=b^i&t^p,f=u&l^~u&s,v=o+d+f+m[a+2]+e[a+2],_=c+h,o=n+v<<0,n=v+_<<0,c=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),d=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),y=n&i,h=y^n&r^b,f=o&u^~o&l,v=s+d+f+m[a+3]+e[a+3],_=c+h,s=t+v<<0,t=v+_<<0;this.h0=this.h0+t<<0,this.h1=this.h1+n<<0,this.h2=this.h2+i<<0,this.h3=this.h3+r<<0,this.h4=this.h4+s<<0,this.h5=this.h5+o<<0,this.h6=this.h6+u<<0,this.h7=this.h7+l<<0}arrayBuffer(){return this.sn().buffer}dataView(){return this.sn().dataView}sn(){this.finalize();var e=new ArrayBuffer(32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),t.setUint32(28,this.h7),{dataView:t,buffer:e}}}}},i={};function r(e){var t=i[e];return void 0!==t||(t=i[e]={exports:{}},n[e].call(t.exports,t,t.exports,r)),t.exports}return r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r(448).default})());