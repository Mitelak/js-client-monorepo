!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Statsig=e():t.Statsig=e()}(this,()=>(()=>{"use strict";var i={496:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var e="undefined"!=typeof window?window:{},i=void 0!==i.g?i.g:{},n="undefined"!=typeof globalThis?globalThis:{},r=null!=(r=null!=(r=null!=(r=e.__STATSIG__)?r:i.__STATSIG__)?r:n.__STATSIG__)?r:{};e.__STATSIG__=r,i.__STATSIG__=r,n.__STATSIG__=r},856:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},320:function(t,e,i){var s=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.DataAdapterCore=void 0;const n=i(512),r=i(780),o=i(104),a=i(283),u=i(296),l=i(444),c=i(412);e.DataAdapterCore=class{constructor(t,e){this.i=t,this.o=e,this.u=null,this.l=null,this.h={},this.v="statsig.last_modified_time."+e}attach(t,e){this.l=t,this.u=new n.ErrorBoundary(t),(0,o.monitorClass)(this.u,this)}getDataSync(t){var t=this._(t),e=this.h[t];return e||((e=this.m(t))?(this.p(t,e),this.h[t]):null)}getDataAsync(i,n){var r;return s(this,void 0,void 0,function*(){var t=null!=i?i:this.getDataSync(n),t=yield this.O(null!=(r=null==t?void 0:t.data)?r:null,n),e=this._(n);return t&&this.p(e,t),"Network"!==(null==t?void 0:t.source)&&"NetworkNotModified"!==(null==t?void 0:t.source)||(yield this.S(e,t)),t})}prefetchData(i){return s(this,void 0,void 0,function*(){var t=this._(i),e=yield this.getDataAsync(null,i);e&&this.p(t,Object.assign(Object.assign({},e),{source:"Prefetch"}))})}setData(t,e){e=this._(e);this.p(e,{source:"Bootstrap",data:t,receivedAt:Date.now()})}__primeInMemoryCache(t){this.h=Object.assign(Object.assign({},this.h),t)}O(i,n){return s(this,void 0,void 0,function*(){var t,e=yield this.j(i,n);return e?(t=(0,c.typedJsonParse)(e,"has_updates","Failure while attempting to persist latest value"),i&&!1===(null==t?void 0:t.has_updates)?{source:"NetworkNotModified",data:i,receivedAt:Date.now()}:!0!==(null==t?void 0:t.has_updates)?null:{source:"Network",data:e,receivedAt:Date.now()}):(r.Log.debug("No response returned for latest value"),null)})}T(){return null!=this.l?this.l:(r.Log.error(this.i+" is not attached to a Client"),"")}_(t){t=(0,u.getUserStorageKey)(this.T(),t);return`${a.DataAdapterCachePrefix}.${this.o}.`+t}p(t,e){var i=Object.entries(this.h);i.length<10||([i]=i.reduce((t,e)=>e[1]<t[1]?e:t),delete this.h[i]),this.h[t]=e}m(t){var e=null==(e=l.Storage.getItemSync)?void 0:e.call(l.Storage,t);return null!=e&&(t=(0,c.typedJsonParse)(e,"source","Failed to parse cached result"))?Object.assign(Object.assign({},t),{source:"Cache"}):null}S(t,e){return s(this,void 0,void 0,function*(){yield l.Storage.setItem(t,JSON.stringify(e)),yield this.I(t)})}I(i){var n;return s(this,void 0,void 0,function*(){var t=null!=(n=yield(0,l.getObjectFromStorage)(this.v))?n:{},e=(t[i]=Date.now(),Object.entries(t));e.length<=10||(delete t[(e=e.reduce((t,e)=>e[1]<t[1]?e:t))[0]],yield l.Storage.removeItem(e[0])),yield(0,l.setObjectInStorage)(this.v,t)})}}},280:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Diagnostics=e.captureDiagnostics=void 0;const n=i(780),r="undefined"!=typeof performance&&void 0!==performance.mark;let s=[];e.captureDiagnostics=function(t,e){o.mark(t+":start"),e=e();const i=()=>{o.mark(t+":end"),(t+":end").startsWith("initialize:")&&o.flush()};return e&&e instanceof Promise?e.finally(()=>i()):(i(),e)};class o{static mark(t,e){r&&(t=performance.mark(t,{detail:e}),s.push(t))}static flush(){var t=performance.getEntriesByType("resource").filter(t=>t.name.startsWith("https://api.statsig.com")),t={markers:s,resources:t};n.Log.debug("Diagnostics",t,JSON.stringify(t)),s=[]}}e.Diagnostics=o},512:function(t,a,e){var i=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.ErrorBoundary=a.EXCEPTION_ENDPOINT=void 0;const n=e(780),u=e(972);a.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";a.ErrorBoundary=class{constructor(t){this.l=t,this.A=new Set}capture(e,t,i){try{var n=t();return n&&n instanceof Promise?n.catch(t=>this.D(e,t,i)):n}catch(t){return this.D(e,t,i),null}}logError(t,e){this.D(t,e)}D(r,s,o){try{n.Log.warn("Caught error in "+r,{error:s});i(this,void 0,void 0,function*(){var t,e=null!=s?s:Error("[Statsig] Error was empty"),i=e instanceof Error,n=i?e.name:"No Name";this.A.has(n)||(this.A.add(n),t=u.StatsigMetadataProvider.get(),i=i?e.stack:function(t){try{return JSON.stringify(t)}catch(t){return"[Statsig] Failed to get string for error."}}(e),e=JSON.stringify(Object.assign({tag:r,exception:n,info:i},t)),yield fetch(a.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this.l,"STATSIG-SDK-TYPE":String(t.sdkType),"STATSIG-SDK-VERSION":String(t.sdkVersion),"Content-Type":"application/json"},body:e}),null!=o&&o({name:"error",error:s}))}).then(()=>{}).catch(()=>{})}catch(t){}}}},500:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},788:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},728:function(t,e,i){var n=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.EventLogger=void 0;const r=i(832),s=i(780),o=i(876),a=i(972),u=i(444),l=i(412),c=i(84),h=i(408),d="https://api.statsig.com/v1";e.EventLogger=class{constructor(t,e,i,n){this.l=t,this.M=e,this.N=i,this.P=n,this.C=[],this.G={},this.F={},this.R=!1,this.L=Date.now(),this.U=!0===(null==n?void 0:n.disableLogging),this.V=null!=(t=null==n?void 0:n.loggingBufferMaxSize)?t:50;i=null!=(e=null==n?void 0:n.loggingIntervalMs)?e:1e4;this.J=setInterval(()=>this.K(),i),this.q=(0,c.$)(null==n?void 0:n.logEventUrl,null==n?void 0:n.api,"/rgstr",d),this.B=(0,c.$)(null==n?void 0:n.logEventBeaconUrl,null==n?void 0:n.api,"/log_event_beacon",d),h.VisibilityChangeObserver.add(this),this.W()}setLoggingDisabled(t){this.U=t}enqueue(t){this.H(t)&&(this.Y(t),this.X(),this.C.length>this.V)&&this.K()}incrementNonExposureCount(t){var e=null!=(e=this.F[t])?e:0;this.F[t]=e+1}reset(){this.G={}}onVisibilityChanged(t){"background"===t&&this.K()}shutdown(){return n(this,void 0,void 0,function*(){this.J&&(clearInterval(this.J),this.J=null),yield this.flush()})}flush(){return n(this,void 0,void 0,function*(){var t;this.Z(),0!==this.C.length&&(t=this.C,this.C=[],yield this.tt(t))})}X(){this.R||(this.R=!0,200<Date.now()-this.L)||setTimeout(()=>this.K(),200)}H(t){if((0,o.isExposureEvent)(t)){var t=[t.eventName,null==(e=t.user)?void 0:e.userID,null==(e=t.metadata)?void 0:e.gate,null==(e=t.metadata)?void 0:e.config,null==(e=t.metadata)?void 0:e.ruleID].join("|"),e=this.G[t],i=Date.now();if(e&&i-e<6e4)return!1;1e3<Object.keys(this.G).length&&(this.G={}),this.G[t]=i}return!0}K(){this.flush().catch(()=>{})}tt(t){return n(this,void 0,void 0,function*(){if(this.U)this.et(t);else try{(!h.VisibilityChangeObserver.isCurrentlyVisible()&&this.N.isBeaconSupported()?yield this.nt(t):yield this.it(t)).success?this.M({name:"logs_flushed",events:t}):this.et(t)}catch(t){s.Log.warn("Failed to flush events.")}})}it(e){return n(this,void 0,void 0,function*(){var t=yield this.N.post({sdkKey:this.l,data:{events:e},url:this.q,retries:3,params:{ec:String(e.length)}}),t=null!=t&&t.body?(0,l.typedJsonParse)(t.body,"success","Failed to parse SendEventsResponse"):null;return{success:!0===(null==t?void 0:t.success)}})}nt(t){return n(this,void 0,void 0,function*(){return{success:yield this.N.beacon({sdkKey:this.l,data:{events:t},url:this.B})}})}et(t){for(;500<t.length;)t.shift();var e=this.ot();(0,u.setObjectInStorage)(e,t).catch(()=>{s.Log.warn("Unable to save failed logs to storage")})}W(){const e=this.ot();n(this,void 0,void 0,function*(){var t=yield(0,u.getObjectFromStorage)(e);t&&(yield u.Storage.removeItem(e),yield this.tt(t))}).catch(()=>{s.Log.warn("Failed to flush stored logs")})}ot(){return"statsig.failed_logs."+(0,r.DJB2)(this.l)}Y(t){t.user&&(t.user=Object.assign({},t.user),delete t.user.privateAttributes);var{sdkType:e,sdkVersion:i}=a.StatsigMetadataProvider.get();this.C.push(Object.assign(Object.assign({},t),{statsigMetadata:{sdkType:e,sdkVersion:i}}))}Z(){0!==Object.keys(this.F).length&&(this.Y({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this.F)}}),this.F={})}}},832:(t,e)=>{function i(e){let i=0;for(let t=0;t<e.length;t++){var n=e.charCodeAt(t);i=(i<<5)-i+n,i&=i}return String(i>>>0)}Object.defineProperty(e,"__esModule",{value:!0}),e.DJB2Object=e.DJB2=void 0,e.DJB2=i,e.DJB2Object=function(t){return i(JSON.stringify(function i(n){if(null==n)return null;const t=Object.keys(n).sort();const r={};t.forEach(t=>{let e=n[t];e instanceof Object&&(e=i(e)),r[t]=e});return r}(t)))}},284:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},780:(t,e)=>{function i(t){return t.unshift("[Statsig]"),t}var n,r;Object.defineProperty(e,"__esModule",{value:!0}),e.Log=e.LogLevel=void 0,(r=n||(e.LogLevel=n={}))[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Info=3]="Info",r[r.Debug=4]="Debug";class s{static info(...t){this.level>=n.Info&&console.info(...i(t))}static debug(...t){this.level>=n.Debug&&console.debug(...i(t))}static warn(...t){this.level>=n.Warn&&console.warn(...i(t))}static error(...t){this.level>=n.Error&&console.error(...i(t))}}(e.Log=s).level=n.Error},104:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.monitorClass=void 0;const s=i(280),o=i(688);function c(t,e,i,n){var r=n instanceof o.StatsigClientBase?n.rt.bind(n):void 0;return t.capture(e,()=>(0,s.captureDiagnostics)(e,()=>i.apply(n)),r)}function h(t){return"object"==typeof t&&(t=Object.getPrototypeOf(t))&&"object"==typeof t?t:null}e.monitorClass=function(e,t){try{{var i=e;var n=t;var r;const s=n;for(const o of function(t){const e=new Set;let i=h(t);for(;i&&i!==Object.prototype;)Object.getOwnPropertyNames(i).filter(t=>"function"==typeof(null===i||void 0===i?void 0:i[t])).forEach(t=>e.add(t)),i=Object.getPrototypeOf(i);return Array.from(e)}(s))if("constructor"!==o){const a=s[o];s[o]=function(...t){return c(i,o,()=>a.apply(this,t),n)}}for(const u of function(t){const e=new Set,i=h(t);return Object.getOwnPropertyNames((null===i||void 0===i?void 0:i.constructor)||{}).filter(t=>{var e;return"caller"!==t&&"arguments"!==t&&"callee"!==t&&"function"==typeof(null==(e=null===i||void 0===i?void 0:i.constructor)?void 0:e[t])}).forEach(t=>e.add(t)),Array.from(e)}(s)){const l=null==(r=null===s||void 0===s?void 0:s.constructor)?void 0:r[u];(null===s||void 0===s?void 0:s.constructor)[u]=function(...t){return c(i,s.constructor.name+"."+u,()=>l.apply(s.constructor,t),n)}}return}}catch(t){e.logError("monitorClass",t)}}},188:function(t,e,i){var r=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkCore=void 0;const d=i(280),f=i(780),s=i(612),o=i(604),a=i(972);e.NetworkCore=class{constructor(t,e){this.P=t,this.M=e,this.ut=null!=(e=null==t?void 0:t.networkTimeoutMs)?e:1e4}post(e){return r(this,void 0,void 0,function*(){var t=yield this.lt(e);return this.ct(Object.assign({method:"POST",body:t},e))})}get(t){return r(this,void 0,void 0,function*(){return this.ct(Object.assign({method:"GET"},t))})}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)}beacon(i){return r(this,void 0,void 0,function*(){var t=yield this.dt(i),e=yield this.lt(i);return navigator.sendBeacon(t,e)})}ct(c){var h;return r(this,void 0,void 0,function*(){var{method:e,body:i,retries:n}=c;const r=new AbortController;var t,s,o,a=setTimeout(()=>r.abort(`Timeout of ${this.ut}ms expired.`),this.ut),u=yield this.dt(c);let l=null;try{if(l=yield fetch(u,{method:e,body:i,headers:Object.assign({},c.headers),signal:r.signal}),clearTimeout(a),l.ok)return o=yield l.text(),d.Diagnostics.mark("_sendRequest:response-received",{status:l.status,contentLength:l.headers.get("content-length")}),{body:o,code:l.status};throw t=yield l.text().catch(()=>"No Text"),(s=new Error(`Failed to fetch: ${u} `+t)).name="NetworkError",s}catch(t){i=function(t,e){if(t.signal.aborted&&"string"==typeof t.signal.reason)return t.signal.reason;if("string"==typeof e)return e;if(e instanceof Error)return e.name+": "+e.message;return null}(r,t);return d.Diagnostics.mark("_sendRequest:error",{error:i,status:null===l||void 0===l?void 0:l.status,contentLength:null===l||void 0===l?void 0:l.headers.get("content-length")}),!n||n<=0?(null!=(h=this.M)&&h.call(this,{name:"error",error:t}),f.Log.error(`A networking error occured during ${e} request to ${u}.`,i,t),null):this.ct(Object.assign(Object.assign({},c),{retries:n-1}))}})}dt(e){return r(this,void 0,void 0,function*(){var t=a.StatsigMetadataProvider.get(),t=Object.assign({k:e.sdkKey,st:t.sdkType,sv:t.sdkVersion,t:String(Date.now()),sid:yield s.SessionID.get(e.sdkKey)},e.params),t=Object.entries(t).map(([t,e])=>encodeURIComponent(t)+"="+encodeURIComponent(e)).join("&");return e.url+(t?"?"+t:"")})}lt(n){return r(this,void 0,void 0,function*(){var t=n["data"],e=yield o.StableID.get(n.sdkKey),i=yield s.SessionID.get(n.sdkKey);return JSON.stringify(Object.assign(Object.assign({},t),{statsigMetadata:Object.assign(Object.assign({},a.StatsigMetadataProvider.get()),{stableID:e,sessionID:i})}))})}}},264:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CombinationOverrideAdapter=void 0;e.CombinationOverrideAdapter=class{constructor(t){this.providers=t}getGateOverride(i,n){return this.ht(t=>{var e;return null!=(e=null==(e=t.getGateOverride)?void 0:e.call(t,i,n))?e:null})}getDynamicConfigOverride(i,n){return this.ht(t=>{var e;return null!=(e=null==(e=t.getDynamicConfigOverride)?void 0:e.call(t,i,n))?e:null})}ht(t){for(const i of this.providers){var e=t(i);if(e)return e}return null}}},612:function(t,e,i){var r=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.SessionID=void 0;const n=i(832),s=i(780),o=i(444),a=i(556),u={};function l(t){return"statsig.session_id."+(0,n.DJB2)(t)}e.SessionID={get:n=>r(void 0,void 0,void 0,function*(){let t=u[n];null==t&&(t=null!=(e=yield function(t){t=l(t);return(0,o.getObjectFromStorage)(t)}(n))?e:{sessionID:(0,a.getUUID)(),startTime:Date.now(),lastUpdate:Date.now()},u[n]=t),(144e5<Date.now()-t.startTime||6e5<Date.now()-t.lastUpdate)&&(t.sessionID=(0,a.getUUID)(),t.startTime=Date.now()),t.lastUpdate=Date.now();var e=t,i=n;return i=l(n),(0,o.setObjectInStorage)(i,e).catch(()=>{s.Log.warn("Failed to save SessionID")}),(u[n]=t).sessionID})}},604:function(t,e,i){var n=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.StableID=void 0;const r=i(832),s=i(780),o=i(444),a=i(556),u={};function l(t){return"statsig.stable_id."+(0,r.DJB2)(t)}function c(t,e){e=l(e);(0,o.setObjectInStorage)(e,t).catch(()=>{s.Log.warn("Failed to save StableID")})}e.StableID={get:e=>n(void 0,void 0,void 0,function*(){return null==u[e]&&(u[e]=function(t){t=l(t);return(0,o.getObjectFromStorage)(t)}(e).then(t=>{return null!=t||c(t=(0,a.getUUID)(),e),t})),u[e]}),setOverride:(t,e)=>{u[e]=Promise.resolve(t),c(t,e)}}},688:function(t,e,i){var n=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigClientBase=void 0,i(496);const s=i(512),o=i(728),a=i(780),u=i(604),l=i(444);e.StatsigClientBase=class{constructor(t,e,i,n){this.loadingStatus="Uninitialized",this.vt={},this.l=t,this.P=null!=n?n:{},null!=n&&n.disableStorage&&l.Storage.setDisabled(!0),null!=n&&n.overrideStableID&&u.StableID.setOverride(n.overrideStableID,t),a.Log.level=null!=(r=null==n?void 0:n.logLevel)?r:a.LogLevel.Warn,this.ft=null!=(r=null==n?void 0:n.overrideAdapter)?r:null,this._t=new o.EventLogger(t,this.rt.bind(this),i,n),this.u=new s.ErrorBoundary(t);var r,i=null!=(r=(__STATSIG__=null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}).instances)?r:{};i[t]=this,__STATSIG__.instances=i,(__STATSIG__.lastInstance=this).dataAdapter=e,this.dataAdapter.attach(t,n)}updateRuntimeOptions(t){null!=t.disableLogging&&(this.P.disableLogging=t.disableLogging,this._t.setLoggingDisabled(t.disableLogging)),null!=t.disableStorage&&(this.P.disableStorage=t.disableStorage,l.Storage.setDisabled(t.disableStorage))}flush(){return this._t.flush()}shutdown(){return n(this,void 0,void 0,function*(){this.rt({name:"pre_shutdown"}),yield this._t.shutdown()})}on(t,e){this.vt[t]||(this.vt[t]=[]),this.vt[t].push(e)}off(t,e){this.vt[t]&&-1!==(e=this.vt[t].indexOf(e))&&this.vt[t].splice(e,1)}rt(e){var t;const i=t=>{try{t(e)}catch(t){a.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",e)}};this.vt[e.name]&&this.vt[e.name].forEach(t=>i(t)),null!=(t=this.vt["*"])&&t.forEach(i)}gt(t,e){this.loadingStatus=t,this.rt({name:"values_updated",status:t,values:e})}yt(t,e,i){!0===(null==i?void 0:i.disableExposureLog)?this._t.incrementNonExposureCount(t):this._t.enqueue(e)}}},808:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},283:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataAdapterCachePrefix=void 0,e.DataAdapterCachePrefix="statsig.cached"},876:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createLayerParameterExposure=e.createConfigExposure=e.createGateExposure=e.isExposureEvent=void 0;const i="statsig::config_exposure",n="statsig::gate_exposure";function u(t,e,i,n,r){return{eventName:t,user:e,value:null,metadata:function(t,e){e.reason=t.reason,t.lcut&&(e.lcut=String(t.lcut));t.receivedAt&&(e.receivedAt=String(t.receivedAt));return e}(i,n),secondaryExposures:r,time:Date.now()}}e.isExposureEvent=function({eventName:t}){return t===n||t===i},e.createGateExposure=function(t,e){return u(n,t,e.details,{gate:e.name,gateValue:String(e.value),ruleID:e.ruleID},null!=(e=null==(t=e.__evaluation)?void 0:t.secondary_exposures)?e:[])},e.createConfigExposure=function(t,e){return u(i,t,e.details,{config:e.name,ruleID:e.ruleID},null!=(e=null==(t=e.__evaluation)?void 0:t.secondary_exposures)?e:[])},e.createLayerParameterExposure=function(t,e,i){var n,r=e.__evaluation,s=!0===(null==(s=null==r?void 0:r.explicit_parameters)?void 0:s.includes(i));let o="",a=null!=(n=null==r?void 0:r.undelegated_secondary_exposures)?n:[];return s&&(o=null!=(n=r.allocated_experiment_name)?n:"",a=r.secondary_exposures),u("statsig::layer_exposure",t,e.details,{config:e.name,parameterName:i,ruleID:e.ruleID,allocatedExperiment:o,isExplicitParameter:String(s)},a)}},972:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigMetadataProvider=void 0;let i={sdkVersion:"0.0.1-beta.24",sdkType:"js-mono"};e.StatsigMetadataProvider={get:()=>i,add:t=>{i=Object.assign(Object.assign({},i),t)}}},384:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},136:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.makeLayer=e.makeDynamicConfig=e.makeFeatureGate=void 0;const r="default";e.makeFeatureGate=function(t,e,i){return{name:t,details:e,ruleID:null!=(t=null==i?void 0:i.rule_id)?t:r,value:!0===(null==i?void 0:i.value),__evaluation:i}},e.makeDynamicConfig=function(t,e,i){return{name:t,details:e,ruleID:null!=(t=null==i?void 0:i.rule_id)?t:r,value:null!=(e=null==i?void 0:i.value)?e:{},__evaluation:i}},e.makeLayer=function(t,e,i,n){return{name:t,details:e,getValue:null!=n?n:()=>{},ruleID:null!=(t=null==i?void 0:i.rule_id)?t:r,bt:null!=(e=null==i?void 0:i.value)?e:{},__evaluation:i}}},296:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getUnitIDFromUser=e.getUserStorageKey=e.normalizeUser=void 0;const n=i(832);e.normalizeUser=function(t,e){try{var i=JSON.parse(JSON.stringify(t));return null!=e&&(i.statsigEnvironment=e),i}catch(t){throw new Error("User object must be convertable to JSON string.")}},e.getUserStorageKey=function(t,e){return(0,n.DJB2Object)({sdkKey:t,user:e})},e.getUnitIDFromUser=function(t,e){var i;return"string"==typeof e&&"userid"!==e.toLowerCase()?null!=(i=null==(i=t.customIDs)?void 0:i[e])?i:null==(i=null==t?void 0:t.customIDs)?void 0:i[e.toLowerCase()]:t.userID}},444:function(t,e,i){var n=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})},i=(Object.defineProperty(e,"__esModule",{value:!0}),e.setObjectInStorage=e.getObjectFromStorage=e.Storage=void 0,i(780));const r={},s={getProviderName:()=>"InMemory",getItemSync(t){return null!=(t=r[t])?t:null},getItem(t){return Promise.resolve(null!=(t=r[t])?t:null)},setItem(t,e){return r[t]=e,Promise.resolve()},removeItem(t){return delete r[t],Promise.resolve()},getAllKeys(){return Promise.resolve(Object.keys(r))}};let o=null;try{"undefined"!=typeof window&&"localStorage"in window&&(o={getProviderName:()=>"LocalStorage",getItemSync(t){return localStorage.getItem(t)},getItem(t){return Promise.resolve(localStorage.getItem(t))},setItem(t,e){return localStorage.setItem(t,e),Promise.resolve()},removeItem(t){return localStorage.removeItem(t),Promise.resolve()},getAllKeys(){var t=Object.keys(localStorage);return Promise.resolve(t)}})}catch(t){i.Log.warn("Failed to setup localStorageProvider.")}let a=null!==o&&void 0!==o?o:s,u=a;e.Storage={getProviderName:()=>u.getProviderName(),getItem:t=>u.getItem(t),setItem:(t,e)=>u.setItem(t,e),removeItem:t=>u.removeItem(t),getAllKeys:()=>u.getAllKeys(),getItemSync:t=>{var e;return null!=(e=null==(e=u.getItemSync)?void 0:e.call(u,t))?e:null},setProvider:t=>{a=t,u=t},setDisabled:t=>{u=t?s:a}},e.getObjectFromStorage=function(e){return n(this,void 0,void 0,function*(){var t=yield u.getItem(e);return JSON.parse(null!=t?t:"null")})},e.setObjectInStorage=function(t,e){return n(this,void 0,void 0,function*(){yield u.setItem(t,JSON.stringify(e))})}},412:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.typedJsonParse=void 0;const r=i(780);e.typedJsonParse=function(t,e,i){try{var n=JSON.parse(t);return"object"==typeof n&&0 in n,n}catch(t){}return r.Log.error(i),null}},556:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getUUID=void 0,e.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let i=(new Date).getTime(),n="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(4*Math.random())]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,t=>{let e=16*Math.random();return 0<i?(e=(i+e)%16|0,i=Math.floor(i/16)):(e=(n+e)%16|0,n=Math.floor(n/16)),("x"===t?e:7&e|8).toString(16)})}},84:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.$=void 0,e.$=function(t,e,i,n){return t||(e?""+e+i:""+n+i)}},539:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},408:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VisibilityChangeObserver=void 0;class i{static isCurrentlyVisible(){return"foreground"===this.wt}static add(t){this.vt.push(t)}static remove(t){t=this.vt.indexOf(t);-1!==t&&this.vt.splice(t,1)}static notify(e){e!==this.wt&&(this.wt=e,this.vt.forEach(t=>t.onVisibilityChanged(e)))}}(e.VisibilityChangeObserver=i).vt=[],i.wt="foreground","undefined"!=typeof window&&"function"==typeof window.addEventListener&&(window.addEventListener("focus",()=>i.notify("foreground")),window.addEventListener("blur",()=>i.notify("background")),window.addEventListener("beforeunload",()=>i.notify("background"))),"undefined"!=typeof document&&"function"==typeof document.addEventListener&&document.addEventListener("visibilitychange",()=>{i.notify("visible"===document.visibilityState?"foreground":"background")})},464:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(e,i);r&&("get"in r?e.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,r)}:function(t,e,i,n){t[n=void 0===n?i:n]=e[i]}),r=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.Log=e.Storage=e.EventLogger=void 0,i(496);const s=i(728),o=(Object.defineProperty(e,"EventLogger",{enumerable:!0,get:function(){return s.EventLogger}}),i(780)),a=(Object.defineProperty(e,"Log",{enumerable:!0,get:function(){return o.Log}}),i(444));Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return a.Storage}});var u=i(556);r(i(496),e),r(i(856),e),r(i(320),e),r(i(512),e),r(i(500),e),r(i(788),e),r(i(832),e),r(i(284),e),r(i(780),e),r(i(104),e),r(i(188),e),r(i(264),e),r(i(612),e),r(i(604),e),r(i(688),e),r(i(808),e),r(i(283),e),r(i(876),e),r(i(972),e),r(i(384),e),r(i(136),e),r(i(296),e),r(i(444),e),r(i(412),e),r(i(84),e),r(i(539),e),r(i(556),e),r(i(408),e),__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{EventLogger:s.EventLogger,Log:o.Log,getUUID:u.getUUID,Storage:a.Storage})},920:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AutoInit=void 0;const o=i(464);e.AutoInit=class{static attempt(e){var i;if("undefined"!=typeof window&&"undefined"!=typeof document&&document.currentScript){var n=document.currentScript.getAttribute("src"),r=null==(r=null===window||void 0===window?void 0:window.location)?void 0:r.href;if(n&&r){let t=null;try{var s=new URL(n,r).searchParams;t=null!=(i=s.get("sdkkey"))?i:s.get("sdkKey")}catch(t){o.Log.error("Invalid source URL")}t&&e({sdkKey:t})}}}}},96:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveDeltasResponse=void 0;const n=i(464);function r(t,e){null!=t&&t.forEach(t=>{delete e[t]})}e.resolveDeltasResponse=function(t,e){var i;return(e=(0,n.typedJsonParse)(e,"checksum","Failed to parse DeltasEvaluationResponse"))?(t=t,i=e,t=Object.assign(Object.assign(Object.assign({},t),i),{feature_gates:Object.assign(Object.assign({},t.feature_gates),i.feature_gates),layer_configs:Object.assign(Object.assign({},t.layer_configs),i.layer_configs),dynamic_configs:Object.assign(Object.assign({},t.dynamic_configs),i.dynamic_configs)}),r((t=i=t).deleted_gates,t.feature_gates),delete t.deleted_gates,r(i.deleted_configs,t.dynamic_configs),delete t.deleted_configs,r(i.deleted_layers,t.layer_configs),delete t.deleted_layers,i=t,(t=(0,n.DJB2Object)({feature_gates:i.feature_gates,dynamic_configs:i.dynamic_configs,layer_configs:i.layer_configs}))===e.checksum?JSON.stringify(i):{hadBadDeltaChecksum:!0,badChecksum:t,badMergedConfigs:i,badFullResponse:e.deltas_full_response}):{hadBadDeltaChecksum:!0}}},536:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=i(464);e.default=class{constructor(){this.Ot=null,this.St=null,this.jt="Uninitialized",this.Tt=0,this.It=0}getValues(){return this.Ot?(0,n.typedJsonParse)(this.Ot,"has_updates","Failed to parse EvaluationStoreValues"):null}reset(){this.St=null,this.Ot=null,this.jt="Loading",this.Tt=0,this.It=0}finalize(){this.St||(this.jt="NoValues")}setValuesFromDataAdapter(t){var e;t&&!0===(null==(e=(0,n.typedJsonParse)(t.data,"has_updates","Failed to parse EvaluationResponse"))?void 0:e.has_updates)&&(this.Ot=t.data,this.Tt=e.time,this.It=t.receivedAt,this.jt=t.source,this.St=e)}getGate(t){var e,t=null!=(e=null==(e=this.St)?void 0:e.feature_gates[t])?e:null;return this.At(t)}getConfig(t){var e,t=null!=(e=null==(e=this.St)?void 0:e.dynamic_configs[t])?e:null;return this.At(t)}getLayer(t){var e,t=null!=(e=null==(e=this.St)?void 0:e.layer_configs[t])?e:null;return this.At(t)}At(t){return{evaluation:t,details:this.xt(null==t)}}xt(t){return"Uninitialized"===this.jt||"NoValues"===this.jt?{reason:this.jt}:{reason:this.jt+":"+(t?"Unrecognized":"Recognized"),lcut:this.Tt,receivedAt:this.It}}}},400:function(t,e,i){var s=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const o=i(464),a=i(96);class n extends o.NetworkCore{constructor(t,e){super(t,e),this.Dt=(0,o.$)(null==t?void 0:t.initializeUrl,null==t?void 0:t.api,"/initialize","https://api.statsig.com/v1")}fetchEvaluations(i,n,r){return s(this,void 0,void 0,function*(){var t=n?(0,o.typedJsonParse)(n,"has_updates","Failed to parse cached EvaluationResponse"):null;let e={user:r,hash:"djb2",deltasResponseRequested:!1};return null!=t&&t.has_updates&&(e=Object.assign(Object.assign({},e),{sinceTime:t.time,previousDerivedFields:"derived_fields"in t?t.derived_fields:{},deltasResponseRequested:!0})),this.Mt(i,t,e)})}Mt(e,i,n){var r;return s(this,void 0,void 0,function*(){var t=yield this.post({sdkKey:e,url:this.Dt,data:n,retries:2});return 204===(null==t?void 0:t.code)?'{"has_updates": false}':200!==(null==t?void 0:t.code)?null!=(r=null==t?void 0:t.body)?r:null:!0!==(null==i?void 0:i.has_updates)||!0!==(null==(r=t.body)?void 0:r.includes('"is_delta":true'))?t.body:"string"==typeof(t=(0,a.resolveDeltasResponse)(i,t.body))?t:this.Mt(e,i,Object.assign(Object.assign(Object.assign({},n),t),{deltasResponseRequested:!1}))})}}e.default=n},520:function(t,e,i){var n=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const o=i(464),r=i(536),s=i(400),a=i(364);i(807);class u extends o.StatsigClientBase{constructor(t,e,i=null){var n=new s.default(i,t=>{this.rt(t)});super(t,null!=(t=null==i?void 0:i.dataAdapter)?t:new a.StatsigEvaluationsDataAdapter,n,i),(0,o.monitorClass)(this.u,this),(0,o.monitorClass)(this.u,n),this.Et=new r.default,this.Nt=e}static instance(t){var e;return __STATSIG__=null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{},null==t?__STATSIG__.lastInstance:null==(e=__STATSIG__.instances)?void 0:e[t]}initializeSync(){this.updateUserSync(this.Nt)}initializeAsync(){return this.updateUserAsync(this.Nt)}updateUserSync(t){this.kt(t);t=this.dataAdapter.getDataSync(this.Nt);this.Et.setValuesFromDataAdapter(t),this.Et.finalize(),this.gt("Ready",t),this.Pt(null!=t?t:null,this.Nt)}updateUserAsync(i){return n(this,void 0,void 0,function*(){this.kt(i);var t=this.Nt,e=this.dataAdapter.getDataSync(t);this.gt("Loading",e),this.Et.setValuesFromDataAdapter(e),e=yield this.dataAdapter.getDataAsync(e,t),t===this.Nt&&this.Et.setValuesFromDataAdapter(e),this.Et.finalize(),this.gt("Ready",e)})}checkGate(t,e){return this.getFeatureGate(t,e).value}getContext(){return{sdkKey:this.l,options:this.P,values:this.Et.getValues(),user:JSON.parse(JSON.stringify(this.Nt))}}getAsyncContext(){return n(this,void 0,void 0,function*(){return Object.assign(Object.assign({},this.getContext()),{sessionID:yield o.SessionID.get(this.l),stableID:yield o.StableID.get(this.l)})})}getFeatureGate(t,e){var i=(0,o.DJB2)(t),{evaluation:i,details:n}=this.Et.getGate(i),n=(0,o.makeFeatureGate)(t,n,i),r=null==(r=null==(i=this.ft)?void 0:i.getGateOverride)?void 0:r.call(i,n,this.Nt,e),i=null!=r?r:n;return this.yt(t,(0,o.createGateExposure)(this.Nt,i),e),this.rt({name:"gate_evaluation",gate:i}),i}getDynamicConfig(t,e){t=this.Ct("dynamic_config",t,e);return this.rt({name:"dynamic_config_evaluation",dynamicConfig:t}),t}getExperiment(t,e){t=this.Ct("experiment",t,e);return this.rt({name:"experiment_evaluation",experiment:t}),t}getLayer(i,n){var t=(0,o.DJB2)(i),{evaluation:t,details:e}=this.Et.getLayer(t),e=(0,o.makeLayer)(i,e,t),r=null==(r=null==(t=this.ft)?void 0:t.getLayerOverride)?void 0:r.call(t,e,this.Nt,n);const s=null!=r?r:e;return this.rt({name:"layer_evaluation",layer:s}),Object.assign(Object.assign({},s),{getValue:t=>{var e;return t in s.bt&&(e=(0,o.createLayerParameterExposure)(this.Nt,s,t),this.yt(i,e,n),null!=(e=s.bt[t]))?e:null}})}logEvent(t){this._t.enqueue(Object.assign(Object.assign({},t),{user:this.Nt,time:Date.now()}))}Pt(t,e){this.dataAdapter.getDataAsync(t,e).catch(t=>{o.Log.error("An error occurred after update.",t)})}kt(t){this._t.reset(),this.Et.reset(),this.Nt=(0,o.normalizeUser)(t,this.P.environment)}Ct(t,e,i){var n=(0,o.DJB2)(e),{evaluation:n,details:r}=this.Et.getConfig(n),r=(0,o.makeDynamicConfig)(e,r,n),n="experiment"===t?null==(t=null==(n=this.ft)?void 0:n.getExperimentOverride)?void 0:t.call(n,r,this.Nt,i):null==(n=null==(t=this.ft)?void 0:t.getDynamicConfigOverride)?void 0:n.call(t,r,this.Nt,i),t=null!=n?n:r;return this.yt(e,(0,o.createConfigExposure)(this.Nt,t),i),t}}e.default=u},364:function(t,e,i){var r=this&&this.__awaiter||function(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})},n=(Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigEvaluationsDataAdapter=void 0,i(464));const s=i(400);class o extends n.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this.N=null}attach(t,e){super.attach(t,e),this.N=new s.default(null!=e?e:{})}j(e,i){var n;return r(this,void 0,void 0,function*(){var t=yield null==(n=this.N)?void 0:n.fetchEvaluations(this.T(),e,i);return null!=t?t:null})}}e.StatsigEvaluationsDataAdapter=o},807:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_TYPE=void 0;i=i(464);e.SDK_TYPE="javascript-client",i.StatsigMetadataProvider.add({sdkType:e.SDK_TYPE})},208:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatsigClient=e.StatsigEvaluationsDataAdapter=void 0;var n=i(520);e.StatsigClient=n.default;const r=i(364);Object.defineProperty(e,"StatsigEvaluationsDataAdapter",{enumerable:!0,get:function(){return r.StatsigEvaluationsDataAdapter}}),i(807),__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{StatsigEvaluationsDataAdapter:r.StatsigEvaluationsDataAdapter,StatsigClient:n.default}),e.default=__STATSIG__},152:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SessionReplay=void 0;const r=i(464),n=i(884);e.SessionReplay=class{constructor(t){this.Gt=t,this.Yt=null,this.Qt=[],this.Zt=new n.SessionReplayClient,this.Gt.on("pre_shutdown",()=>this.Xt()),this.Gt.on("values_updated",()=>this.te()),this.te()}ee(t,e){this.Yt=e,this.Qt.push(t);t=JSON.stringify(this.Qt);2048<t.length&&this.ie(t,e)}te(){var t=this.Gt.getContext().values;!0!==(null==t?void 0:t.can_record_session)||(t=null!=(t=t.session_recording_rate)?t:0,Math.random()>=t)?this.Xt():(r.StatsigMetadataProvider.add({isRecordingSession:"true"}),this.Zt.record((t,e)=>this.ee(t,e)))}Xt(){var t;this.Zt.stop(),r.StatsigMetadataProvider.add({isRecordingSession:"false"}),0!==this.Qt.length&&null!=this.Yt&&(t=JSON.stringify(this.Qt),this.ie(t,this.Yt))}ie(e,i){this.Gt.flush().catch(t=>{r.Log.error(t)});const n=r.StatsigMetadataProvider.get()["sdkVersion"];this.Gt.getAsyncContext().then(t=>{this.Gt.logEvent({eventName:"statsig::session_recording",value:t.sessionID,metadata:{session_start_ts:String(i.startTime),session_end_ts:String(i.endTime),clicks_captured_cumulative:String(i.clickCount),rrweb_events:e,session_replay_sdk_version:n}})}).catch(t=>{r.Log.error(t)}),this.Qt=[]}}},884:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SessionReplayClient=void 0;const n=i(976);e.SessionReplayClient=class{constructor(){this.ne=null,this.re=null,this.se=0}record(i,t){"undefined"==typeof window||(this.ne=null,this.re=null,this.se=0,this.oe=t,this.ae)||(this.ae=(0,n.record)({emit:t=>{var e;null==this.ne&&(this.ne=t.timestamp),this.re=t.timestamp,(e=t).type===n.EventType.IncrementalSnapshot&&e.data.source===n.IncrementalSource.MouseInteraction&&e.data.type===n.MouseInteractions.Click&&this.se++,i(t,{startTime:this.ne,endTime:this.re,clickCount:this.se}),18e5<this.re-this.ne&&(null!=(e=this.ae)&&e.call(this),this.oe)&&this.oe()}}))}stop(){this.ae&&(this.ae(),this.ae=void 0)}}},392:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SessionReplay=e.SessionReplayClient=void 0;const n=i(152),r=(Object.defineProperty(e,"SessionReplay",{enumerable:!0,get:function(){return n.SessionReplay}}),i(884));Object.defineProperty(e,"SessionReplayClient",{enumerable:!0,get:function(){return r.SessionReplayClient}}),__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{SessionReplayClient:r.SessionReplayClient,SessionReplay:n.SessionReplay})},156:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCapture=void 0;const n=i(464),r=i(76);e.AutoCapture=class{constructor(t){this.Gt=t,this.Ft=Date.now(),this.Rt=0,"undefined"!=typeof document&&"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.Lt()):this.Lt()}Ut(){var t;"undefined"!=typeof window&&"undefined"!=typeof document&&(t=t=>{this.Vt(t||window.event)},(0,r.registerEventHandler)(document,"click",t),(0,r.registerEventHandler)(document,"submit",t),(0,r.registerEventHandler)(window,"error",t),(0,r.registerEventHandler)(window,"beforeunload",()=>this.Jt()),(0,r.registerEventHandler)(window,"scroll",()=>this.Kt()))}Vt(t){var e;let i=null==(e=t.type)?void 0:e.toLowerCase();"error"===i&&t instanceof ErrorEvent?this.qt(t):(e=(0,r.getTargetNode)(t))&&(0,r.shouldLogEvent)(t,e)&&("submit"===i&&(i="form_submit"),{value:t,metadata:e}=(0,r.gatherEventData)(e),this.zt(i,t,e))}Lt(){this.Ut(),this.$t(),this.Bt()}qt(t){var e=(null==t?void 0:t.error)||{};let i=e;if("object"==typeof e)try{i=JSON.stringify(e)}catch(t){i="function"==typeof(null==e?void 0:e.toString)?e.toString():"Unknown Error"}this.zt("error",t.message,{message:t.message,filename:t.filename,lineno:t.lineno,colno:t.colno,error_str:i})}$t(){setTimeout(()=>{var t=(0,r.getSafeUrl)();this.Wt("page_view",(0,r.getSanitizedPageUrl)(),{title:null===document||void 0===document?void 0:document.title,queryParams:Object.fromEntries(t.searchParams)})},1)}Bt(){"undefined"!=typeof window&&void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType&&"function"==typeof window.performance.getEntriesByName&&setTimeout(()=>{var t={},e=window.performance.getEntriesByType("navigation"),e=(e&&0<e.length&&e[0]instanceof PerformanceNavigationTiming&&(e=e[0],t.load_time_ms=e.duration,t.dom_interactive_time_ms=e.domInteractive-e.startTime,t.redirect_count=e.redirectCount,t.transfer_bytes=e.transferSize),window.performance.getEntriesByName("first-contentful-paint"));e&&0<e.length&&e[0]instanceof PerformancePaintTiming&&(t.first_contentful_paint_time_ms=e[0].startTime),this.zt("performance",(0,r.getSanitizedPageUrl)(),t)},1)}Jt(){this.Wt("page_view_end",(0,r.getSanitizedPageUrl)(),{scrollDepth:this.Rt,pageViewLength:Date.now()-this.Ft})}zt(t,e,i){e={eventName:"auto_capture::"+t,value:e,metadata:Object.assign({sessionId:(0,r.getWebSessionId)(this.Gt.getContext().sdkKey),page_url:(null==(t=null===window||void 0===window?void 0:window.location)?void 0:t.href)||""},i)};this.Gt.logEvent(e),n.Log.debug("Enqueued Event",e)}Wt(t,e,i){this.zt(t,e,i),this.Gt.flush().catch(t=>{n.Log.error(t)})}Kt(){var t=document.body.scrollHeight||1;this.Rt=Math.max(this.Rt,Math.min(100,Math.round((window.scrollY+window.innerHeight)/t*100)))}}},76:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.registerEventHandler=e.getSanitizedPageUrl=e.getWebSessionId=e.getSafeUrl=e.shouldLogEvent=e.getTargetNode=e.gatherEventData=void 0;const r=i(464),s={};function o(e){if(e){let t=e;for(;t;){var i=t.tagName.toLowerCase();if(["body","document"].includes(i))return null;if("a"===t.tagName.toLowerCase())return t;t=t.parentElement}}return null}e.gatherEventData=function(t){var e=t.tagName.toLowerCase(),i={},n=e,r=("form"===e&&(i.action=t.getAttribute("action"),i.method=null!=(r=t.getAttribute("method"))?r:"GET",i.formName=t.getAttribute("name"),i.formId=t.getAttribute("id")),["input","select","textarea"].includes(e)&&"password"!==t.getAttribute("type")&&(i.content=t.value,i.inputName=t.getAttribute("name")),"button"===e&&(i.content=(t.textContent||"").trim()),o(t));return r&&(i.href=r.getAttribute("href")),{value:n,metadata:i}},e.getTargetNode=function(t){if(!t)return null;let e=t.target||t.srcElement;return e&&e instanceof Element?e=3===e.nodeType?e.parentNode||null:e:null},e.shouldLogEvent=function(t,e){if(!t||!e||1!==e.nodeType)return!1;var i=e.tagName.toLowerCase(),n=t.type.toLowerCase();switch(i){case"html":return!1;case"form":return"submit"===n;case"input":case"select":case"textarea":return["change"].includes(n);default:if("click"===n){if("button"===i)return!0;if(o(e))return!0}return!1}},e.getSafeUrl=function(){var t=(null==(t=null===window||void 0===window?void 0:window.location)?void 0:t.href)||"";let e;try{e=new URL(t)}catch(t){e=new URL("error:")}return e},e.getWebSessionId=function(t){var e=function(t){if(window&&window.localStorage)return window.localStorage.getItem(t);return s[t]}(t="statsig.web_analytics.session."+(0,r.DJB2)(t)),i=Date.now();let n=e?(0,r.typedJsonParse)(e,"lastAccessedTime","Failed to parse WebSession"):null;return(n=!n||144e5<i-n.startTime||6e5<i-n.lastAccessedTime?(e=Date.now(),{id:(0,r.getUUID)(),startTime:e,lastAccessedTime:e}):n).lastAccessedTime=i,e=t,i=JSON.stringify(n),window&&window.localStorage?window.localStorage.setItem(e,i):(s[e]=i,r.Log.error("Statsig Web AutoCapture: No window.localStorage")),n.id},e.getSanitizedPageUrl=function(){var t;return(null==(t=null==(t=null===window||void 0===window?void 0:window.location)?void 0:t.href)?void 0:t.split(/[?#]/)[0])||""},e.registerEventHandler=function(t,e,i){t&&t.addEventListener&&t.addEventListener(e,i,!0)}},824:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCapture=void 0;const n=i(156);Object.defineProperty(e,"AutoCapture",{enumerable:!0,get:function(){return n.AutoCapture}}),__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{AutoCapture:n.AutoCapture}),e.default=__STATSIG__},976:(u,t,e)=>{e.r(t),e.d(t,{EventType:()=>J,IncrementalSource:()=>Q,MouseInteractions:()=>l,PLUGIN_NAME:()=>Ri,Replayer:()=>Zn,ReplayerEvents:()=>v,addCustomEvent:()=>Ge,freezePage:()=>Le,getRecordConsolePlugin:()=>Mi,getReplayConsolePlugin:()=>Gi,mirror:()=>St,pack:()=>bi,record:()=>Fe,unpack:()=>wi,utils:()=>c});var W,c={},t=(e.r(c),e.d(c,{StyleSheetMirror:()=>Ut,ue:()=>St,getBaseDimension:()=>Lt,getNestedRule:()=>Bt,getPositionsAndIndex:()=>Vt,getWindowHeight:()=>kt,getWindowWidth:()=>Ot,hasShadowRoot:()=>Y,hookSetter:()=>_t,isAncestorRemoved:()=>xt,isBlocked:()=>M,isIgnored:()=>Nt,isSerialized:()=>Et,isSerializedIframe:()=>Ft,isSerializedStylesheet:()=>Gt,isTouchEvent:()=>Rt,iterateResolveTree:()=>Dt,on:()=>P,patch:()=>x,polyfill:()=>Mt,queueToResolveTrees:()=>jt,throttle:()=>Tt,uniqueTextMutations:()=>Wt}),{});function G(t){return t.nodeType===t.ELEMENT_NODE}function V(t){var e=null==t?void 0:t.host;return Boolean((null==e?void 0:e.shadowRoot)===t)}function U(t){return"[object ShadowRoot]"===Object.prototype.toString.call(t)}function Z(t){try{var e=t.rules||t.cssRules;return e?i=(i=Array.from(e).map(m).join("")).includes(" background-clip: text;")&&!i.includes(" -webkit-background-clip: text;")?i.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;"):i:null}catch(t){return null}var i}function m(t){var e=t.cssText;if("styleSheet"in t)try{e=Z(t.styleSheet)||e}catch(t){}return e}e.r(t),e.d(t,{default:()=>pn}),(e=W=W||{})[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment";i.prototype.getId=function(t){return t&&null!=(t=null==(t=this.getMeta(t))?void 0:t.id)?t:-1},i.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},i.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},i.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},i.prototype.removeNodeFromMap=function(t){var e=this,i=this.getId(t);this.idNodeMap.delete(i),t.childNodes&&t.childNodes.forEach(function(t){return e.removeNodeFromMap(t)})},i.prototype.has=function(t){return this.idNodeMap.has(t)},i.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},i.prototype.add=function(t,e){var i=e.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,e)},i.prototype.replace=function(t,e){var i=this.getNode(t);i&&(i=this.nodeMetaMap.get(i))&&this.nodeMetaMap.set(e,i),this.idNodeMap.set(t,e)},i.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap};var et=i;function i(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}function p(){return new et}function K(t){var e=t.maskInputOptions,i=t.tagName,n=t.type,r=t.value,t=t.maskInputFn,r=r||"";return r=e[i.toLowerCase()]||e[n]?t?t(r):"*".repeat(r.length):r}var it="__rrweb_original__";var nt,rt,st=1,ot=new RegExp("[^a-z0-9-_:]"),at=-2;function y(){return st++}var I=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,C=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,b=/^(data:)([^,]*),(.*)/i;function ut(t,c){return(t||"").replace(I,function(t,e,i,n,r,s){i=i||r||s,r=e||n||"";if(!i)return t;if(!C.test(i))return"url(".concat(r).concat(i).concat(r,")");if(b.test(i))return"url(".concat(r).concat(i).concat(r,")");if("/"===i[0])return"url(".concat(r).concat((-1<(s=c).indexOf("//")?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+i).concat(r,")");var o=c.split("/"),e=i.split("/");o.pop();for(var a=0,u=e;a<u.length;a++){var l=u[a];"."!==l&&(".."===l?o.pop():o.push(l))}return"url(".concat(r).concat(o.join("/")).concat(r,")")})}var w=/^[^ \t\n\r\u000c]+/,A=/^[, \t\n\r\u000c]+/;function T(t,e){return e&&""!==e.trim()?((t=t.createElement("a")).href=e,t.href):e}function lt(){var t=document.createElement("a");return t.href="",t.href}function ct(t,e,i,n){if("src"===i||"href"===i&&n&&("use"!==e||"#"!==n[0]))return T(t,n);if("xlink:href"===i&&n&&"#"!==n[0]||"background"===i&&n&&("table"===e||"td"===e||"th"===e))return T(t,n);if("srcset"===i&&n){var r=t,s=n;if(""===s.trim())return s;var o=0;function a(t){var t=t.exec(s.substring(o));return t?(t=t[0],o+=t.length,t):""}for(var u=[];a(A),!(o>=s.length);)if(","===(c=a(w)).slice(-1))c=T(r,c.substring(0,c.length-1)),u.push(c);else for(var l="",c=T(r,c),h=!1;;){var d=s.charAt(o);if(""===d){u.push((c+l).trim());break}if(h)")"===d&&(h=!1);else{if(","===d){o+=1,u.push((c+l).trim());break}"("===d&&(h=!0)}l+=d,o+=1}return u.join(", ")}return"style"===i&&n?ut(n,lt()):"object"===e&&"data"===i&&n?T(t,n):n}function _(t,e,i){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return!!i&&_(t.parentNode,e,i);for(var n=t.classList.length;n--;){var r=t.classList[n];if(e.test(r))return!0}return!!i&&_(t.parentNode,e,i)}function ht(t,e,i){t=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(null!==t){if("string"==typeof e){if(t.classList.contains(e))return 1;if(t.closest(".".concat(e)))return 1}else if(_(t,e,!0))return 1;if(i){if(t.matches(i))return 1;if(t.closest(i))return 1}}}function dt(t,e){var i=e.doc,n=e.mirror,r=e.blockClass,s=e.blockSelector,o=e.maskTextClass,a=e.maskTextSelector,u=e.inlineStylesheet,l=e.maskInputOptions,c=void 0===l?{}:l,h=e.maskTextFn,d=e.maskInputFn,l=e.dataURLOptions,f=void 0===l?{}:l,v=e.inlineImages,F=e.recordCanvas,G=e.keepIframeSrcFn,l=e.newlyAddedElement,L=void 0!==l&&l,g=(e=i,!(l=n).hasNode(e)||1===(l=l.getId(e))?void 0:l);switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:W.Document,childNodes:[],compatMode:t.compatMode}:{type:W.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:W.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:g};case t.ELEMENT_NODE:for(var m,p,y=t,I=(E={doc:i,blockClass:r,blockSelector:s,inlineStylesheet:u,maskInputOptions:c,maskInputFn:d,dataURLOptions:f,inlineImages:v,recordCanvas:F,keepIframeSrcFn:G,newlyAddedElement:L,rootId:g}).doc,C=E.blockClass,b=E.blockSelector,w=E.inlineStylesheet,A=void 0===(A=E.maskInputOptions)?{}:A,S=E.maskInputFn,T=void 0===(_=E.dataURLOptions)?{}:_,_=E.inlineImages,k=E.recordCanvas,B=E.keepIframeSrcFn,O=void 0!==(O=E.newlyAddedElement)&&O,E=E.rootId,C=function(t,e,i){if("string"==typeof e){if(t.classList.contains(e))return!0}else for(var n=t.classList.length;n--;){var r=t.classList[n];if(e.test(r))return!0}return!!i&&t.matches(i)}(y,C,b),N=function(t){return t instanceof HTMLFormElement?"form":(t=t.tagName.toLowerCase().trim(),ot.test(t)?"div":t)}(y),x={},V=y.attributes.length,R=0;R<V;R++){var M=y.attributes[R];x[M.name]=ct(I,N,M.name,M.value)}return"link"===N&&w&&(b=Array.from(I.styleSheets).find(function(t){return t.href===y.href}),D=null,D=b?Z(b):D)&&(delete x.rel,delete x.href,x.le=ut(D,b.href)),"style"===N&&y.sheet&&!(y.innerText||y.textContent||"").trim().length&&(D=Z(y.sheet))&&(x.le=ut(D,lt())),"input"!==N&&"textarea"!==N&&"select"!==N||(w=y.value,b=y.checked,"radio"!==x.type&&"checkbox"!==x.type&&"submit"!==x.type&&"button"!==x.type&&w?x.value=K({type:x.type,tagName:N,value:w,maskInputOptions:A,maskInputFn:S}):b&&(x.checked=b)),"option"===N&&(y.selected&&!A.select?x.selected=!0:delete x.selected),"canvas"===N&&k&&("2d"===y.__context?function(t){var e=t.getContext("2d");if(e)for(var i=0;i<t.width;i+=50)for(var n=0;n<t.height;n+=50){var r=e.getImageData,r=it in r?r[it]:r;if(new Uint32Array(r.call(e,i,n,Math.min(50,t.width-i),Math.min(50,t.height-n)).data.buffer).some(function(t){return 0!==t}))return}return 1}(y)||(x.rr_dataURL=y.toDataURL(T.type,T.quality)):"__context"in y||(D=y.toDataURL(T.type,T.quality),(w=document.createElement("canvas")).width=y.width,w.height=y.height,S=w.toDataURL(T.type,T.quality),D!==S&&(x.rr_dataURL=D))),"img"===N&&_&&(nt||(nt=I.createElement("canvas"),rt=nt.getContext("2d")),p=(m=y).crossOrigin,m.crossOrigin="anonymous",b=function(){try{nt.width=m.naturalWidth,nt.height=m.naturalHeight,rt.drawImage(m,0,0),x.rr_dataURL=nt.toDataURL(T.type,T.quality)}catch(t){console.warn("Cannot inline img src=".concat(m.currentSrc,"! Error: ").concat(t))}p?x.crossOrigin=p:m.removeAttribute("crossorigin")},m.complete&&0!==m.naturalWidth?b():m.onload=b),"audio"!==N&&"video"!==N||(x.rr_mediaState=y.paused?"paused":"played",x.rr_mediaCurrentTime=y.currentTime),O||(y.scrollLeft&&(x.rr_scrollLeft=y.scrollLeft),y.scrollTop&&(x.rr_scrollTop=y.scrollTop)),C&&(A=y.getBoundingClientRect(),k=A.width,w=A.height,x={class:x.class,rr_width:"".concat(k,"px"),rr_height:"".concat(w,"px")}),"iframe"!==N||B(x.src)||(y.contentDocument||(x.rr_src=x.src),delete x.src),{type:W.Element,tagName:N,attributes:x,childNodes:[],isSVG:function(t){return Boolean("svg"===t.tagName||t.ownerSVGElement)}(y)||void 0,needBlock:C,rootId:E};case t.TEXT_NODE:var j,S=t,_=(D={maskTextClass:o,maskTextSelector:a,maskTextFn:h,rootId:g}).maskTextClass,b=D.maskTextSelector,O=D.maskTextFn,D=D.rootId,A=S.parentNode&&S.parentNode.tagName,k=S.textContent,w="STYLE"===A||void 0,A="SCRIPT"===A||void 0;if(w&&k){try{S.nextSibling||S.previousSibling||null!=(j=S.parentNode.sheet)&&j.cssRules&&(k=function(t){return t.cssRules?Array.from(t.cssRules).map(function(t){return t.cssText||""}).join(""):""}(S.parentNode.sheet))}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),S)}k=ut(k,lt())}return A&&(k="SCRIPT_PLACEHOLDER"),!w&&!A&&k&&ht(S,_,b)&&(k=O?O(k):k.replace(/[\S]/g,"*")),{type:W.Text,textContent:k||"",isStyle:w,rootId:D};case t.CDATA_SECTION_NODE:return{type:W.CDATA,textContent:"",rootId:g};case t.COMMENT_NODE:return{type:W.Comment,textContent:t.textContent||"",rootId:g};default:return!1}}function R(t){return void 0===t?"":t.toLowerCase()}function ft(e,t){var i=t.doc,n=t.mirror,r=t.blockClass,s=t.blockSelector,o=t.maskTextClass,a=t.maskTextSelector,u=t.skipChild,u=void 0!==u&&u,l=t.inlineStylesheet,c=void 0===l||l,l=t.maskInputOptions,h=void 0===l?{}:l,d=t.maskTextFn,f=t.maskInputFn,v=t.slimDOMOptions,l=t.dataURLOptions,g=void 0===l?{}:l,l=t.inlineImages,m=void 0!==l&&l,l=t.recordCanvas,p=void 0!==l&&l,y=t.onSerialize,I=t.onIframeLoad,l=t.iframeLoadTimeout,C=void 0===l?5e3:l,b=t.onStylesheetLoad,l=t.stylesheetLoadTimeout,w=void 0===l?5e3:l,l=t.keepIframeSrcFn,A=void 0===l?function(){return!1}:l,l=t.newlyAddedElement,t=t.preserveWhiteSpace,S=void 0===t||t,t=dt(e,{doc:i,mirror:n,blockClass:r,blockSelector:s,maskTextClass:o,maskTextSelector:a,inlineStylesheet:c,maskInputOptions:h,maskTextFn:d,maskInputFn:f,dataURLOptions:g,inlineImages:m,recordCanvas:p,keepIframeSrcFn:A,newlyAddedElement:void 0!==l&&l});if(!t)return console.warn(e,"not serialized"),null;var l=n.hasNode(e)?n.getId(e):!function(t,e){if(e.comment&&t.type===W.Comment)return 1;if(t.type===W.Element){if(e.script&&("script"===t.tagName||"link"===t.tagName&&"preload"===t.attributes.rel&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&t.attributes.href.endsWith(".js")))return 1;if(e.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(R(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===R(t.attributes.name)||"icon"===R(t.attributes.rel)||"apple-touch-icon"===R(t.attributes.rel)||"shortcut icon"===R(t.attributes.rel))))return 1;if("meta"===t.tagName){if(e.headMetaDescKeywords&&R(t.attributes.name).match(/^description|keywords$/))return 1;if(e.headMetaSocial&&(R(t.attributes.property).match(/^(og|twitter|fb):/)||R(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===R(t.attributes.name)))return 1;if(e.headMetaRobots&&("robots"===R(t.attributes.name)||"googlebot"===R(t.attributes.name)||"bingbot"===R(t.attributes.name)))return 1;if(e.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return 1;if(e.headMetaAuthorship&&("author"===R(t.attributes.name)||"generator"===R(t.attributes.name)||"framework"===R(t.attributes.name)||"publisher"===R(t.attributes.name)||"progid"===R(t.attributes.name)||R(t.attributes.property).match(/^article:/)||R(t.attributes.property).match(/^product:/)))return 1;if(e.headMetaVerification&&("google-site-verification"===R(t.attributes.name)||"yandex-verification"===R(t.attributes.name)||"csrf-token"===R(t.attributes.name)||"p:domain_verify"===R(t.attributes.name)||"verify-v1"===R(t.attributes.name)||"verification"===R(t.attributes.name)||"shopify-checkout-api-token"===R(t.attributes.name)))return 1}}}(t,v)&&(S||t.type!==W.Text||t.isStyle||t.textContent.replace(/^\s+|\s+$/gm,"").length)?st++:at,T=Object.assign(t,{id:l});if(n.add(e,T),l===at)return null;y&&y(e);t=!u;if(T.type===W.Element&&(t=t&&!T.needBlock,delete T.needBlock,l=e.shadowRoot)&&U(l)&&(T.isShadowHost=!0),(T.type===W.Document||T.type===W.Element)&&t){v.headWhitespace&&T.type===W.Element&&"head"===T.tagName&&(S=!1);for(var _={doc:i,mirror:n,blockClass:r,blockSelector:s,maskTextClass:o,maskTextSelector:a,skipChild:u,inlineStylesheet:c,maskInputOptions:h,maskTextFn:d,maskInputFn:f,slimDOMOptions:v,dataURLOptions:g,inlineImages:m,recordCanvas:p,preserveWhiteSpace:S,onSerialize:y,onIframeLoad:I,iframeLoadTimeout:C,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:A},k=0,O=Array.from(e.childNodes);k<O.length;k++)(E=ft(O[k],_))&&T.childNodes.push(E);if(G(e)&&e.shadowRoot)for(var E,N=0,x=Array.from(e.shadowRoot.childNodes);N<x.length;N++)(E=ft(x[N],_))&&(U(e.shadowRoot)&&(E.isShadow=!0),T.childNodes.push(E))}return e.parentNode&&V(e.parentNode)&&U(e.parentNode)&&(T.isShadow=!0),T.type===W.Element&&"iframe"===T.tagName&&function(t,e,i){var n=t.contentWindow;if(n){var r,s,o=!1;try{s=n.document.readyState}catch(t){return}if("complete"===s)return n.location.href!==(s="about:blank")||t.src===s||""===t.src?(setTimeout(e,0),t.addEventListener("load",e)):t.addEventListener("load",e);r=setTimeout(function(){o||(e(),o=!0)},i),t.addEventListener("load",function(){clearTimeout(r),o=!0,e()})}}(e,function(){var t=e.contentDocument;t&&I&&(t=ft(t,{doc:t,mirror:n,blockClass:r,blockSelector:s,maskTextClass:o,maskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputOptions:h,maskTextFn:d,maskInputFn:f,slimDOMOptions:v,dataURLOptions:g,inlineImages:m,recordCanvas:p,preserveWhiteSpace:S,onSerialize:y,onIframeLoad:I,iframeLoadTimeout:C,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:A}))&&I(e,t)},C),T.type===W.Element&&"link"===T.tagName&&"stylesheet"===T.attributes.rel&&function(t,e,i){var n,r,s=!1;try{n=t.sheet}catch(t){return}n||(r=setTimeout(function(){s||(e(),s=!0)},i),t.addEventListener("load",function(){clearTimeout(r),s=!0,e()}))}(e,function(){var t;b&&(t=ft(e,{doc:i,mirror:n,blockClass:r,blockSelector:s,maskTextClass:o,maskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputOptions:h,maskTextFn:d,maskInputFn:f,slimDOMOptions:v,dataURLOptions:g,inlineImages:m,recordCanvas:p,preserveWhiteSpace:S,onSerialize:y,onIframeLoad:I,iframeLoadTimeout:C,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:A}))&&b(e,t)},w),T}var E=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function N(n,i){void 0===i&&(i={});var r=1,s=1;function o(t){var e=t.match(/\n/g),e=(e&&(r+=e.length),t.lastIndexOf("\n"));s=-1===e?s+t.length:t.length-e}function a(){var e={line:r,column:s};return function(t){return t.position=new u(e),g(),t}}var u=function(t){this.start=t,this.end={line:r,column:s},this.source=i.source},l=(u.prototype.content=n,[]);function c(t){var e=new Error("".concat(i.source||"",":").concat(r,":").concat(s,": ").concat(t));if(e.reason=t,e.filename=i.source,e.line=r,e.column=s,e.source=n,!i.silent)throw e;l.push(e)}function h(){return v(/^{\s*/)}function d(){return v(/^}/)}function f(){var t,e,i=[];for(g(),m(i);n.length&&"}"!==n.charAt(0)&&(t=function(){if("@"===n[0])return function(){var t=a(),e=v(/^@([-\w]+)?keyframes\s*/);if(e){var i=e[1];if(!(e=v(/^([-\w]+)\s*/)))return c("@keyframes missing name");var n,e=e[1];if(!h())return c("@keyframes missing '{'");for(var r=m();n=function(){var t,e=[],i=a();for(;t=v(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)e.push(t[1]),v(/^,\s*/);if(e.length)return i({type:"keyframe",values:e,declarations:C()})}();)r.push(n),r=r.concat(m());return d()?t({type:"keyframes",name:e,vendor:i,keyframes:r}):c("@keyframes missing '}'")}}()||function(){var t,e=a(),i=v(/^@media *([^{]+)/);if(i)return i=S(i[1]),h()?(t=m().concat(f()),d()?e({type:"media",media:i,rules:t}):c("@media missing '}'")):c("@media missing '{'")}()||function(){var t=a(),e=v(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(e)return t({type:"custom-media",name:S(e[1]),media:S(e[2])})}()||function(){var t,e=a(),i=v(/^@supports *([^{]+)/);if(i)return i=S(i[1]),h()?(t=m().concat(f()),d()?e({type:"supports",supports:i,rules:t}):c("@supports missing '}'")):c("@supports missing '{'")}()||b()||w()||A()||function(){var t,e,i=a(),n=v(/^@([-\w]+)?document *([^{]+)/);if(n)return t=S(n[1]),n=S(n[2]),h()?(e=m().concat(f()),d()?i({type:"document",document:n,vendor:t,rules:e}):c("@document missing '}'")):c("@document missing '{'")}()||function(){var t=a();if(v(/^@page */)){var e=y()||[];if(!h())return c("@page missing '{'");for(var i,n=m();i=I();)n.push(i),n=n.concat(m());return d()?t({type:"page",selectors:e,declarations:n}):c("@page missing '}'")}}()||function(){var t,e=a();if(v(/^@host\s*/))return h()?(t=m().concat(f()),d()?e({type:"host",rules:t}):c("@host missing '}'")):c("@host missing '{'")}()||function(){var t=a();if(v(/^@font-face\s*/)){if(!h())return c("@font-face missing '{'");for(var e,i=m();e=I();)i.push(e),i=i.concat(m());return d()?t({type:"font-face",declarations:i}):c("@font-face missing '}'")}}()}()||(e=t=void 0,t=a(),(e=y())?(m(),t({type:"rule",selectors:e,declarations:C()})):c("selector missing")));)!1!==t&&(i.push(t),m(i));return i}function v(t){var e,t=t.exec(n);if(t)return o(e=t[0]),n=n.slice(e.length),t}function g(){v(/^\s*/)}function m(t){var e;for(void 0===t&&(t=[]);e=p();)!1!==e&&t.push(e),p();return t}function p(){var t=a();if("/"===n.charAt(0)&&"*"===n.charAt(1)){for(var e,i=2;""!==n.charAt(i)&&("*"!==n.charAt(i)||"/"!==n.charAt(i+1));)++i;return""===n.charAt((i+=2)-1)?c("End of comment missing"):(e=n.slice(2,i-2),s+=2,o(e),n=n.slice(i),s+=2,t({type:"comment",comment:e}))}}function y(){var t=v(/^([^{]+)/);if(t)return S(t[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(t){return t.replace(/,/g,"‌")}).split(/\s*(?![^(]*\)),\s*/).map(function(t){return t.replace(/\u200C/g,",")})}function I(){var t,e=a(),i=v(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(i)return i=S(i[0]),v(/^:\s*/)?(t=v(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),e=e({type:"declaration",property:i.replace(E,""),value:t?S(t[0]).replace(E,""):""}),v(/^[;\s]*/),e):c("property missing ':'")}function C(){var t,e=[];if(!h())return c("missing '{'");for(m(e);t=I();)!1!==t&&(e.push(t),m(e)),I();return d()?e:c("missing '}'")}var t,b=e("import"),w=e("charset"),A=e("namespace");function e(n){var r=new RegExp("^@"+n+"\\s*([^;]+);");return function(){var t,e=a(),i=v(r);if(i)return(t={type:n})[n]=i[1].trim(),e(t)}}return function e(t,i){var n=t&&"string"==typeof t.type;var r=n?t:i;for(var s=0,o=Object.keys(t);s<o.length;s++){var a=o[s],a=t[a];Array.isArray(a)?a.forEach(function(t){e(t,r)}):a&&"object"==typeof a&&e(a,r)}n&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:i||null});return t}((t=f(),{type:"stylesheet",stylesheet:{source:i.source,rules:t,parsingErrors:l}}))}function S(t){return t?t.replace(/^\s+|\s+$/g,""):""}var vt={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};var gt=/([^\\]):hover/,mt=new RegExp(gt.source,"g");function pt(t,e){var i,n=null==e?void 0:e.stylesWithHoverClass.get(t);return n||(!(n=N(t,{silent:!0})).stylesheet||(i=[],n.stylesheet.rules.forEach(function(t){"selectors"in t&&(t.selectors||[]).forEach(function(t){gt.test(t)&&i.push(t)})}),0===i.length)?t:(n=new RegExp(i.filter(function(t,e){return i.indexOf(t)===e}).sort(function(t,e){return e.length-t.length}).map(function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}).join("|"),"g"),n=t.replace(n,function(t){var e=t.replace(mt,"$1.\\:hover");return"".concat(t,", ").concat(e)}),null!=e&&e.stylesWithHoverClass.set(t,n),n))}function yt(){return{stylesWithHoverClass:new Map}}function It(r,t){var e,i,n=t.doc,s=t.hackCss,o=t.cache;switch(r.type){case W.Document:return n.implementation.createDocument(null,"",null);case W.DocumentType:return n.implementation.createDocumentType(r.name||"html",r.publicId,r.systemId);case W.Element:var a,u=i="link"===(i=vt[(e=r).tagName]||e.tagName)&&e.attributes.le?"style":i,l=r.isSVG?n.createElementNS("http://www.w3.org/2000/svg",u):n.createElement(u),c={};for(a in r.attributes)if(Object.prototype.hasOwnProperty.call(r.attributes,a)){var h=r.attributes[a];if("option"!==u||"selected"!==a||!1!==h)if(!0===h&&(h=""),a.startsWith("rr_"))c[a]=h;else{var d="textarea"===u&&"value"===a,f="style"===u&&"_cssText"===a;if(f&&s&&"string"==typeof h&&(h=pt(h,o)),(d||f)&&"string"==typeof h){for(var d=n.createTextNode(h),v=0,g=Array.from(l.childNodes);v<g.length;v++){var m=g[v];m.nodeType===l.TEXT_NODE&&l.removeChild(m)}l.appendChild(d)}else try{r.isSVG&&"xlink:href"===a?l.setAttributeNS("http://www.w3.org/1999/xlink",a,h.toString()):"onload"===a||"onclick"===a||"onmouse"===a.substring(0,7)?l.setAttribute("_"+a,h.toString()):"meta"===u&&"Content-Security-Policy"===r.attributes["http-equiv"]&&"content"===a?l.setAttribute("csp-content",h.toString()):"link"===u&&"preload"===r.attributes.rel&&"script"===r.attributes.as||"link"===u&&"prefetch"===r.attributes.rel&&"string"==typeof r.attributes.href&&r.attributes.href.endsWith(".js")||("img"===u&&r.attributes.srcset&&r.attributes.rr_dataURL?l.setAttribute("rrweb-original-srcset",r.attributes.srcset):l.setAttribute(a,h.toString()))}catch(t){}}}for(var p in c)!function(t){var e,i,n=c[t];if("canvas"===u&&"rr_dataURL"===t?((e=document.createElement("img")).onload=function(){var t=l.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=n.toString(),l.RRNodeType&&(l.rr_dataURL=n.toString())):"img"!==u||"rr_dataURL"!==t||(i=l).currentSrc.startsWith("data:")||(i.setAttribute("rrweb-original-src",r.attributes.src),i.src=n.toString()),"rr_width"===t)l.style.width=n.toString();else if("rr_height"===t)l.style.height=n.toString();else if("rr_mediaCurrentTime"===t&&"number"==typeof n)l.currentTime=n;else if("rr_mediaState"===t)switch(n){case"played":l.play().catch(function(t){return console.warn("media playback error",t)});break;case"paused":l.pause()}}(p);if(r.isShadowHost)if(l.shadowRoot)for(;l.shadowRoot.firstChild;)l.shadowRoot.removeChild(l.shadowRoot.firstChild);else l.attachShadow({mode:"open"});return l;case W.Text:return n.createTextNode(r.isStyle&&s?pt(r.textContent,o):r.textContent);case W.CDATA:return n.createCDATASection(r.textContent);case W.Comment:return n.createComment(r.textContent);default:return null}}function Ct(t,e){var i=e.doc,n=e.mirror,r=e.skipChild,r=void 0!==r&&r,s=e.hackCss,o=void 0===s||s,a=e.afterAppend,u=e.cache,l=It(t,{doc:i,hackCss:o,cache:u});if(!l)return null;if(t.rootId&&n.getNode(t.rootId)!==i&&n.replace(t.rootId,i),t.type===W.Document&&(i.close(),i.open(),"BackCompat"===t.compatMode&&t.childNodes&&t.childNodes[0].type!==W.DocumentType&&(t.childNodes[0].type===W.Element&&"xmlns"in t.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===t.childNodes[0].attributes.xmlns?i.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):i.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),l=i),n.add(l,t),(t.type===W.Document||t.type===W.Element)&&!r)for(var c=0,h=t.childNodes;c<h.length;c++){var d=h[c],f=Ct(d,{doc:i,mirror:n,skipChild:!1,hackCss:o,afterAppend:a,cache:u});f?((d.isShadow&&G(l)&&l.shadowRoot?l.shadowRoot:l).appendChild(f),a&&a(f,d.id)):console.warn("Failed to rebuild",d)}return l}function bt(t,e){for(var i=0,n=t.getIds();i<n.length;i++){var r=n[i];t.has(r)&&(r=t.getNode(r),e(r))}}function wt(t,e){var i=e.doc,s=e.onVisit,n=e.hackCss,n=void 0===n||n,r=e.afterAppend,o=e.cache,e=e.mirror,a=void 0===e?new et:e;Ct(t,{doc:i,mirror:a,skipChild:!1,hackCss:n,afterAppend:r,cache:o});bt(a,function(t){s&&s(t);var e=a.getMeta(t);if((null==e?void 0:e.type)===W.Element){var i,n,r=t;for(i in e.attributes)Object.prototype.hasOwnProperty.call(e.attributes,i)&&i.startsWith("rr_")&&(n=e.attributes[i],"rr_scrollLeft"===i&&(r.scrollLeft=n),"rr_scrollTop"===i)&&(r.scrollTop=n)}})}function P(t,e,i=document){const n={capture:!0,passive:!0};return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e,n)}const At="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let St={map:{},getId(){return console.error(At),-1},getNode(){return console.error(At),null},removeNodeFromMap(){console.error(At)},has(){return console.error(At),!1},reset(){console.error(At)}};function Tt(r,s,o={}){let a=null,u=0;return function(...t){var e=Date.now(),i=(u||!1!==o.leading||(u=e),s-(e-u));const n=this;i<=0||s<i?(a&&(clearTimeout(a),a=null),u=e,r.apply(n,t)):a||!1===o.trailing||(a=setTimeout(()=>{u=!1===o.leading?0:Date.now(),a=null,r.apply(n,t)},i))}}function _t(t,e,i,n,r=window){const s=r.Object.getOwnPropertyDescriptor(t,e);return r.Object.defineProperty(t,e,n?i:{set(t){setTimeout(()=>{i.set.call(this,t)},0),s&&s.set&&s.set.call(this,t)}}),()=>_t(t,e,s||{},!0)}function x(t,e,i){try{if(!(e in t))return()=>{};const r=t[e];var n=i(r);return"function"==typeof n&&(n.prototype=n.prototype||{},Object.defineProperties(n,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=n,()=>{t[e]=r}}catch(t){return()=>{}}}function kt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ot(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function M(t,e,i,n){if(t){var r=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(r){if("string"==typeof e){if(r.classList.contains(e))return!0;if(n&&null!==r.closest("."+e))return!0}else if(_(r,e,n))return!0;if(i){if(t.matches(i))return!0;if(n&&null!==r.closest(i))return!0}}}return!1}function Et(t,e){return-1!==e.getId(t)}function Nt(t,e){return e.getId(t)===at}function xt(t,e){var i;return!V(t)&&(i=e.getId(t),!e.has(i)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||xt(t.parentNode,e)))}function Rt(t){return Boolean(t.changedTouches)}function Mt(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let e=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})}function jt(t){const i={};var e=(t,e)=>{e={value:t,parent:e,children:[]};return i[t.node.id]=e},n=[];for(const a of t){var r,{nextId:s,parentId:o}=a;s&&s in i?(s=i[s]).parent?(r=s.parent.children.indexOf(s),s.parent.children.splice(r,0,e(a,s.parent))):(r=n.indexOf(s),n.splice(r,0,e(a,null))):o in i?(s=i[o]).children.push(e(a,s)):n.push(e(a,null))}return n}function Dt(e,i){i(e.value);for(let t=e.children.length-1;0<=t;t--)Dt(e.children[t],i)}function Ft(t,e){return Boolean("IFRAME"===t.nodeName&&e.getMeta(t))}function Gt(t,e){return Boolean("LINK"===t.nodeName&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&"stylesheet"===t.getAttribute("rel")&&e.getMeta(t))}function Lt(t,e){var i,t=null==(t=null==(t=t.ownerDocument)?void 0:t.defaultView)?void 0:t.frameElement;return t&&t!==e?(i=t.getBoundingClientRect(),e=Lt(t,e),t=i.height/t.clientHeight,{x:i.x*e.relativeScale+e.x,y:i.y*e.relativeScale+e.y,relativeScale:t,absoluteScale:e.absoluteScale*t}):{x:0,y:0,relativeScale:1,absoluteScale:1}}function Y(t){return Boolean(null==t?void 0:t.shadowRoot)}function Bt(t,e){t=t[e[0]];return 1===e.length?t:Bt(t.cssRules[e[1]].cssRules,e.slice(2))}function Vt(t){var t=[...t],e=t.pop();return{positions:t,index:e}}function Wt(e){var i=new Set,n=[];for(let t=e.length;t--;){var r=e[t];i.has(r.id)||(n.push(r),i.add(r.id))}return n}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(St=new Proxy(St,{get(t,e,i){return"map"===e&&console.error(At),Reflect.get(t,e,i)}}));class Ut{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return null!=(t=this.styleIDMap.get(t))?t:-1}has(t){return this.styleIDMap.has(t)}add(t,e){if(this.has(t))return this.getId(t);let i;return i=void 0===e?this.id++:e,this.styleIDMap.set(t,i),this.idStyleMap.set(i,t),i}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var J=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(J||{}),Q=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t))(Q||{}),l=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(l||{}),f=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(f||{}),v=(t=>(t.Start="start",t.Pause="pause",t.Resume="resume",t.Resize="resize",t.Finish="finish",t.FullsnapshotRebuilded="fullsnapshot-rebuilded",t.LoadStylesheetStart="load-stylesheet-start",t.LoadStylesheetEnd="load-stylesheet-end",t.SkipStart="skip-start",t.SkipEnd="skip-end",t.MouseInteraction="mouse-interaction",t.EventCast="event-cast",t.CustomEvent="custom-event",t.Flush="flush",t.StateChange="state-change",t.PlayBack="play-back",t.Destroy="destroy",t))(v||{});function Zt(t){return"__ln"in t}class Kt{constructor(){this.length=0,this.head=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let i=this.head;for(let t=0;t<e;t++)i=(null===i||void 0===i?void 0:i.next)||null;return i}addNode(t){var e,i={value:t,previous:null,next:null};t.__ln=i,t.previousSibling&&Zt(t.previousSibling)?(e=t.previousSibling.__ln.next,i.next=e,i.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=i,e&&(e.previous=i)):t.nextSibling&&Zt(t.nextSibling)&&t.nextSibling.__ln.previous?(e=t.nextSibling.__ln.previous,i.previous=e,i.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=i,e&&(e.next=i)):(this.head&&(this.head.previous=i),i.next=this.head,this.head=i),this.length++}removeNode(t){var e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next&&(e.next.previous=e.previous)):(this.head=e.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}}class Pt{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(!this.frozen&&!this.locked){const u=[],l=new Kt,c=t=>{let e=t,i=at;for(;i===at;)e=e&&e.nextSibling,i=e&&this.mirror.getId(e);return i};for(var i,n,r=e=>{var t;let i=null,n=i=(null==(o=null==(o=e.getRootNode)?void 0:o.call(e))?void 0:o.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host?e.getRootNode().host:i;for(;(null==(t=null==(t=null===n||void 0===n?void 0:n.getRootNode)?void 0:t.call(n))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&n.getRootNode().host;)n=n.getRootNode().host;var r,s,o=!(this.doc.contains(e)||n&&this.doc.contains(n));if(e.parentNode&&!o)return o=V(e.parentNode)?this.mirror.getId(i):this.mirror.getId(e.parentNode),r=c(e),-1===o||-1===r?l.addNode(e):void((s=ft(e,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:t=>{Ft(t,this.mirror)&&this.iframeManager.addIframe(t),Gt(t,this.mirror)&&this.stylesheetManager.trackLinkElement(t),Y(e)&&this.shadowDomManager.addShadowRoot(e.shadowRoot,this.doc)},onIframeLoad:(t,e)=>{this.iframeManager.attachIframe(t,e),this.shadowDomManager.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{this.stylesheetManager.attachLinkElement(t,e)}}))&&u.push({parentId:o,nextId:r,node:s}))};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const h of Array.from(this.movedSet.values()))Jt(this.removes,h,this.mirror)&&!this.movedSet.has(h.parentNode)||r(h);for(const d of Array.from(this.addedSet.values()))!Qt(this.droppedSet,d)&&!Jt(this.removes,d,this.mirror)||Qt(this.movedSet,d)?r(d):this.droppedSet.add(d);let t=null;for(;l.length;){let e=null;if(!(e=t&&(i=this.mirror.getId(t.value.parentNode),n=c(t.value),-1!==i)&&-1!==n?t:e))for(let t=l.length-1;0<=t;t--){var s=l.get(t);if(s){var o=this.mirror.getId(s.value.parentNode),a=c(s.value);if(-1!==a){if(-1!==o){e=s;break}a=s.value;if(a.parentNode&&a.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){o=a.parentNode.host;if(-1!==this.mirror.getId(o)){e=s;break}}}}}if(!e){for(;l.head;)l.removeNode(l.head.value);break}t=e.previous,l.removeNode(e.value),r(e.value)}var e={texts:this.texts.map(t=>({id:this.mirror.getId(t.node),value:t.value})).filter(t=>this.mirror.has(t.id)),attributes:this.attributes.map(t=>({id:this.mirror.getId(t.node),attributes:t.attributes})).filter(t=>this.mirror.has(t.id)),removes:this.removes,adds:u};(e.texts.length||e.attributes.length||e.removes.length||e.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(e))}},this.processMutation=n=>{if(!Nt(n.target,this.mirror))switch(n.type){case"characterData":var t=n.target.textContent;M(n.target,this.blockClass,this.blockSelector,!1)||t===n.oldValue||this.texts.push({value:ht(n.target,this.maskTextClass,this.maskTextSelector)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:n.target});break;case"attributes":{var i=n.target;let t=n.target.getAttribute(n.attributeName);if("value"===n.attributeName&&(t=K({maskInputOptions:this.maskInputOptions,tagName:n.target.tagName,type:n.target.getAttribute("type"),value:t,maskInputFn:this.maskInputFn})),M(n.target,this.blockClass,this.blockSelector,!1)||t===n.oldValue)return;let e=this.attributes.find(t=>t.node===n.target);if("IFRAME"===i.tagName&&"src"===n.attributeName&&!this.keepIframeSrcFn(t)){if(i.contentDocument)return;n.attributeName="rr_src"}if(e||(e={node:n.target,attributes:{}},this.attributes.push(e)),"style"===n.attributeName){var r=this.doc.createElement("span"),s=(n.oldValue&&r.setAttribute("style",n.oldValue),void 0!==e.attributes.style&&null!==e.attributes.style||(e.attributes.style={}),e.attributes.style);for(const u of Array.from(i.style)){var o=i.style.getPropertyValue(u),a=i.style.getPropertyPriority(u);o===r.style.getPropertyValue(u)&&a===r.style.getPropertyPriority(u)||(s[u]=""===a?o:[o,a])}for(const l of Array.from(r.style))""===i.style.getPropertyValue(l)&&(s[l]=!1)}else e.attributes[n.attributeName]=ct(this.doc,i.tagName,n.attributeName,t);break}case"childList":M(n.target,this.blockClass,this.blockSelector,!0)||(n.addedNodes.forEach(t=>this.genAdds(t,n.target)),n.removedNodes.forEach(t=>{var e=this.mirror.getId(t),i=V(n.target)?this.mirror.getId(n.target.host):this.mirror.getId(n.target);M(n.target,this.blockClass,this.blockSelector,!1)||Nt(t,this.mirror)||!Et(t,this.mirror)||(this.addedSet.has(t)?(Yt(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(n.target)&&-1===e||xt(n.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[e+"@"+i]?Yt(this.movedSet,t):this.removes.push({parentId:i,id:e,isShadow:!(!V(n.target)||!U(n.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,i)=>{if(this.mirror.hasNode(e)){if(Nt(e,this.mirror))return;this.movedSet.add(e);let t=null;(t=i&&this.mirror.hasNode(i)?this.mirror.getId(i):t)&&-1!==t&&(this.movedMap[this.mirror.getId(e)+"@"+t]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);M(e,this.blockClass,this.blockSelector,!1)||e.childNodes.forEach(t=>this.genAdds(t))}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Yt(e,t){e.delete(t),t.childNodes.forEach(t=>Yt(e,t))}function Jt(t,e,i){return 0!==t.length&&function t(e,i,n){const r=i["parentNode"];if(!r)return!1;const s=n.getId(r);if(e.some(t=>t.id===s))return!0;return t(e,r,n)}(t,e,i)}function Qt(t,e){return 0!==t.size&&function t(e,i){const n=i["parentNode"];if(!n)return!1;if(e.has(n))return!0;return t(e,n)}(t,e)}const z=[],zt="undefined"!=typeof CSSGroupingRule,Ht="undefined"!=typeof CSSMediaRule,Xt="undefined"!=typeof CSSSupportsRule,qt="undefined"!=typeof CSSConditionRule;function $t(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function te(t,e){var i=new Pt;z.push(i),i.init(t);let n=window.MutationObserver||window.__rrMutationObserver;var r=null==(r=null==(t=null===window||void 0===window?void 0:window.Zone)?void 0:t.__symbol__)?void 0:r.call(t,"MutationObserver"),t=new(n=r&&window[r]?window[r]:n)(i.processMutations.bind(i));return t.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),t}function ee({mouseInteractionCb:r,doc:i,mirror:s,blockClass:o,blockSelector:a,sampling:t}){if(!1===t.mouseInteraction)return()=>{};const e=!0===t.mouseInteraction||void 0===t.mouseInteraction?{}:t.mouseInteraction,u=[];return Object.keys(l).filter(t=>Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==e[t]).forEach(t=>{var n,e=t.toLowerCase(),t=(n=t,t=>{var e,i=$t(t);M(i,o,a,!0)||(t=Rt(t)?t.changedTouches[0]:t)&&(i=s.getId(i),{clientX:t,clientY:e}=t,r({type:l[n],id:i,x:t,y:e}))});u.push(P(e,t,i))}),()=>{u.forEach(t=>t())}}function ie({scrollCb:n,doc:r,mirror:s,blockClass:o,blockSelector:a,sampling:t}){return P("scroll",Tt(t=>{var e,i,t=$t(t);t&&!M(t,o,a,!0)&&(e=s.getId(t),t===r?(i=r.scrollingElement||r.documentElement,n({id:e,x:i.scrollLeft,y:i.scrollTop})):n({id:e,x:t.scrollLeft,y:t.scrollTop}))},t.scroll||100),r)}function ne(t,e){t=Object.assign({},t);return e||delete t.userTriggered,t}const re=["INPUT","TEXTAREA","SELECT"],se=new WeakMap;function oe(t){var e,i;return t=t,e=[],zt&&t.parentRule instanceof CSSGroupingRule||Ht&&t.parentRule instanceof CSSMediaRule||Xt&&t.parentRule instanceof CSSSupportsRule||qt&&t.parentRule instanceof CSSConditionRule?(i=Array.from(t.parentRule.cssRules).indexOf(t),e.unshift(i)):t.parentStyleSheet&&(i=Array.from(t.parentStyleSheet.cssRules).indexOf(t),e.unshift(i)),e}function j(t,e,i){let n,r;return t?(t.ownerNode?n=e.getId(t.ownerNode):r=i.getId(t),{styleId:r,id:n}):{}}function ae({mirror:t,stylesheetManager:i},e){let n=null;n="#document"===e.nodeName?t.getId(e):t.getId(e.host);t="#document"===e.nodeName?null==(t=e.defaultView)?void 0:t.Document:null==(t=null==(t=e.ownerDocument)?void 0:t.defaultView)?void 0:t.ShadowRoot;const r=Object.getOwnPropertyDescriptor(null==t?void 0:t.prototype,"adoptedStyleSheets");return null!==n&&-1!==n&&t&&r?(Object.defineProperty(e,"adoptedStyleSheets",{configurable:r.configurable,enumerable:r.enumerable,get(){var t;return null==(t=r.get)?void 0:t.call(this)},set(t){var e=null==(e=r.set)?void 0:e.call(this,t);if(null!==n&&-1!==n)try{i.adoptStyleSheets(t,n)}catch(t){}return e}}),()=>{Object.defineProperty(e,"adoptedStyleSheets",{configurable:r.configurable,enumerable:r.enumerable,get:r.get,set:r.set})}):()=>{}}function ue(t,e={}){var i=t.doc.defaultView;if(!i)return()=>{};{var n=t,r=e;const{mutationCb:y,mousemoveCb:I,mouseInteractionCb:C,scrollCb:b,viewportResizeCb:w,inputCb:A,mediaInteractionCb:S,styleSheetRuleCb:T,styleDeclarationCb:_,canvasMutationCb:k,fontCb:O,selectionCb:E}=n;n.mutationCb=(...t)=>{r.mutation&&r.mutation(...t),y(...t)},n.mousemoveCb=(...t)=>{r.mousemove&&r.mousemove(...t),I(...t)},n.mouseInteractionCb=(...t)=>{r.mouseInteraction&&r.mouseInteraction(...t),C(...t)},n.scrollCb=(...t)=>{r.scroll&&r.scroll(...t),b(...t)},n.viewportResizeCb=(...t)=>{r.viewportResize&&r.viewportResize(...t),w(...t)},n.inputCb=(...t)=>{r.input&&r.input(...t),A(...t)},n.mediaInteractionCb=(...t)=>{r.mediaInteaction&&r.mediaInteaction(...t),S(...t)},n.styleSheetRuleCb=(...t)=>{r.styleSheetRule&&r.styleSheetRule(...t),T(...t)},n.styleDeclarationCb=(...t)=>{r.styleDeclaration&&r.styleDeclaration(...t),_(...t)},n.canvasMutationCb=(...t)=>{r.canvasMutation&&r.canvasMutation(...t),k(...t)},n.fontCb=(...t)=>{r.font&&r.font(...t),O(...t)},n.selectionCb=(...t)=>{r.selection&&r.selection(...t),E(...t)}}const s=te(t,t.doc),o=function({mousemoveCb:i,sampling:t,doc:e,mirror:r}){if(!1===t.mousemove)return()=>{};var n="number"==typeof t.mousemove?t.mousemove:50,t="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let s=[],o;const a=Tt(t=>{const e=Date.now()-o;i(s.map(t=>(t.timeOffset-=e,t)),t),s=[],o=null},t),u=[P("mousemove",t=Tt(t=>{var e=$t(t),{clientX:i,clientY:n}=Rt(t)?t.changedTouches[0]:t;o=o||Date.now(),s.push({x:i,y:n,id:r.getId(e),timeOffset:Date.now()-o}),a("undefined"!=typeof DragEvent&&t instanceof DragEvent?Q.Drag:t instanceof MouseEvent?Q.MouseMove:Q.TouchMove)},n,{trailing:!1}),e),P("touchmove",t,e),P("drag",t,e)];return()=>{u.forEach(t=>t())}}(t),a=ee(t),u=ie(t),l=function({viewportResizeCb:i}){let n=-1,r=-1;return P("resize",Tt(()=>{var t=kt(),e=Ot();n===t&&r===e||(i({width:Number(e),height:Number(t)}),n=t,r=e)},200),window)}(t),c=function({inputCb:n,doc:s,mirror:r,blockClass:t,blockSelector:e,ignoreClass:o,maskInputOptions:a,maskInputFn:u,sampling:i,userTriggeredOnInput:l}){function c(i){let n=$t(i);i=i.isTrusted;if((n=n&&"OPTION"===n.tagName?n.parentElement:n)&&n.tagName&&!(re.indexOf(n.tagName)<0)&&!M(n,t,e,!0)){var r=n.type;if(!n.classList.contains(o)){let t=n.value,e=!1;"radio"===r||"checkbox"===r?e=n.checked:(a[n.tagName.toLowerCase()]||a[r])&&(t=K({maskInputOptions:a,tagName:n.tagName,type:r,value:t,maskInputFn:u})),h(n,ne({text:t,isChecked:e,userTriggered:i},l));i=n.name;"radio"===r&&i&&e&&s.querySelectorAll(`input[type="radio"][name="${i}"]`).forEach(t=>{t!==n&&h(t,ne({text:t.value,isChecked:!e,userTriggered:!1},l))})}}}function h(t,e){var i=se.get(t);i&&i.text===e.text&&i.isChecked===e.isChecked||(se.set(t,e),i=r.getId(t),n(Object.assign(Object.assign({},e),{id:i})))}var d;const f=("last"===i.input?["change"]:["input","change"]).map(t=>P(t,c,s)),v=s.defaultView;return v?(i=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),d=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]],i&&i.set&&f.push(...d.map(t=>_t(t[0],t[1],{set(){c({target:this})}},!1,v))),()=>{f.forEach(t=>t())}):()=>{f.forEach(t=>t())}}(t),h=function({mediaInteractionCb:o,blockClass:a,blockSelector:u,mirror:l,sampling:t}){var e=s=>Tt(t=>{var e,i,n,r,t=$t(t);t&&!M(t,a,u,!0)&&({currentTime:e,volume:i,muted:n,playbackRate:r}=t,o({type:s,id:l.getId(t),currentTime:e,volume:i,muted:n,playbackRate:r}))},t.media||500);const i=[P("play",e(0)),P("pause",e(1)),P("seeked",e(2)),P("volumechange",e(3)),P("ratechange",e(4))];return()=>{i.forEach(t=>t())}}(t),d=function({styleSheetRuleCb:s,mirror:o,stylesheetManager:a},{win:t}){const r=t.CSSStyleSheet.prototype.insertRule,n=(t.CSSStyleSheet.prototype.insertRule=function(t,e){var{id:i,styleId:n}=j(this,o,a.styleMirror);return(i&&-1!==i||n&&-1!==n)&&s({id:i,styleId:n,adds:[{rule:t,index:e}]}),r.apply(this,[t,e])},t.CSSStyleSheet.prototype.deleteRule);t.CSSStyleSheet.prototype.deleteRule=function(t){var{id:e,styleId:i}=j(this,o,a.styleMirror);return(e&&-1!==e||i&&-1!==i)&&s({id:e,styleId:i,removes:[{index:t}]}),n.apply(this,[t])};let u;t.CSSStyleSheet.prototype.replace&&(u=t.CSSStyleSheet.prototype.replace,t.CSSStyleSheet.prototype.replace=function(t){var{id:e,styleId:i}=j(this,o,a.styleMirror);return(e&&-1!==e||i&&-1!==i)&&s({id:e,styleId:i,replace:t}),u.apply(this,[t])});let l;t.CSSStyleSheet.prototype.replaceSync&&(l=t.CSSStyleSheet.prototype.replaceSync,t.CSSStyleSheet.prototype.replaceSync=function(t){var{id:e,styleId:i}=j(this,o,a.styleMirror);return(e&&-1!==e||i&&-1!==i)&&s({id:e,styleId:i,replaceSync:t}),l.apply(this,[t])});const e={},c=(zt?e.CSSGroupingRule=t.CSSGroupingRule:(Ht&&(e.CSSMediaRule=t.CSSMediaRule),qt&&(e.CSSConditionRule=t.CSSConditionRule),Xt&&(e.CSSSupportsRule=t.CSSSupportsRule)),{});return Object.entries(e).forEach(([r,t])=>{c[r]={insertRule:t.prototype.insertRule,deleteRule:t.prototype.deleteRule},t.prototype.insertRule=function(t,e){var{id:i,styleId:n}=j(this.parentStyleSheet,o,a.styleMirror);return(i&&-1!==i||n&&-1!==n)&&s({id:i,styleId:n,adds:[{rule:t,index:[...oe(this),e||0]}]}),c[r].insertRule.apply(this,[t,e])},t.prototype.deleteRule=function(t){var{id:e,styleId:i}=j(this.parentStyleSheet,o,a.styleMirror);return(e&&-1!==e||i&&-1!==i)&&s({id:e,styleId:i,removes:[{index:[...oe(this),t]}]}),c[r].deleteRule.apply(this,[t])}}),()=>{t.CSSStyleSheet.prototype.insertRule=r,t.CSSStyleSheet.prototype.deleteRule=n,u&&(t.CSSStyleSheet.prototype.replace=u),l&&(t.CSSStyleSheet.prototype.replaceSync=l),Object.entries(e).forEach(([t,e])=>{e.prototype.insertRule=c[t].insertRule,e.prototype.deleteRule=c[t].deleteRule})}}(t,{win:i}),f=ae(t,t.doc),v=function({styleDeclarationCb:s,mirror:o,ignoreCSSAttributes:a,stylesheetManager:u},{win:t}){const l=t.CSSStyleDeclaration.prototype.setProperty,n=(t.CSSStyleDeclaration.prototype.setProperty=function(t,e,i){var n,r;return!a.has(t)&&({id:n,styleId:r}=j(null==(n=this.parentRule)?void 0:n.parentStyleSheet,o,u.styleMirror),n&&-1!==n||r&&-1!==r)&&s({id:n,styleId:r,set:{property:t,value:e,priority:i},index:oe(this.parentRule)}),l.apply(this,[t,e,i])},t.CSSStyleDeclaration.prototype.removeProperty);return t.CSSStyleDeclaration.prototype.removeProperty=function(t){var e,i;return!a.has(t)&&({id:e,styleId:i}=j(null==(e=this.parentRule)?void 0:e.parentStyleSheet,o,u.styleMirror),e&&-1!==e||i&&-1!==i)&&s({id:e,styleId:i,remove:{property:t},index:oe(this.parentRule)}),n.apply(this,[t])},()=>{t.CSSStyleDeclaration.prototype.setProperty=l,t.CSSStyleDeclaration.prototype.removeProperty=n}}(t,{win:i}),g=t.collectFonts?function({fontCb:i,doc:t}){const e=t.defaultView;if(!e)return()=>{};const n=[],r=new WeakMap,s=e.FontFace;return e.FontFace=function(t,e,i){var n=new s(t,e,i);return r.set(n,{family:t,buffer:"string"!=typeof e,descriptors:i,fontSource:"string"==typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),n},t=x(t.fonts,"add",function(t){return function(e){return setTimeout(()=>{var t=r.get(e);t&&(i(t),r.delete(e))},0),t.apply(this,[e])}}),n.push(()=>{e.FontFace=s}),n.push(t),()=>{n.forEach(t=>t())}}(t):()=>{},m=function(t){const{doc:u,mirror:l,blockClass:c,blockSelector:h,selectionCb:d}=t;let f=!0;return(t=()=>{var e=u.getSelection();if(!(!e||f&&null!=e&&e.isCollapsed)){f=e.isCollapsed||!1;var i=[],n=e.rangeCount||0;for(let t=0;t<n;t++){var{startContainer:r,startOffset:s,endContainer:o,endOffset:a}=e.getRangeAt(t);M(r,c,h,!0)||M(o,c,h,!0)||i.push({start:l.getId(r),startOffset:s,end:l.getId(o),endOffset:a})}d({ranges:i})}})(),P("selectionchange",t)}(t),p=[];for(const N of t.plugins)p.push(N.observer(N.callback,i,N.options));return()=>{z.forEach(t=>t.reset()),s.disconnect(),o(),a(),u(),l(),c(),h(),d(),f(),v(),g(),m(),p.forEach(t=>t())}}class le{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,e,i,n){i=i||this.getIdToRemoteIdMap(t),n=n||this.getRemoteIdToIdMap(t);let r=i.get(e);return r||(r=this.generateIdFn(),i.set(e,r),n.set(r,e)),r}getIds(e,t){const i=this.getIdToRemoteIdMap(e),n=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,i,n))}getRemoteId(t,e,i){i=i||this.getRemoteIdToIdMap(t);return"number"!=typeof e?e:i.get(e)||-1}getRemoteIds(e,t){const i=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,i))}reset(t){t?(this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)):(this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap)}getIdToRemoteIdMap(t){let e=this.iframeIdToRemoteIdMap.get(t);return e||(e=new Map,this.iframeIdToRemoteIdMap.set(t,e)),e}getRemoteIdToIdMap(t){let e=this.iframeRemoteIdToIdMap.get(t);return e||(e=new Map,this.iframeRemoteIdToIdMap.set(t,e)),e}}class ce{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new le(y),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new le(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,e){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null!=(e=this.loadListener)&&e.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&0<t.contentDocument.adoptedStyleSheets.length&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){var e;"rrweb"===t.data.type&&t.source&&(e=this.crossOriginIframeMap.get(t.source))&&(e=this.transformCrossOriginEvent(e,t.data.event))&&this.wrappedEmit(e,t.data.isCheckout)}transformCrossOriginEvent(e,t){var i;switch(t.type){case J.FullSnapshot:return this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e),{timestamp:t.timestamp,type:J.IncrementalSnapshot,data:{source:Q.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case J.Meta:case J.Load:case J.DomContentLoaded:return!1;case J.Plugin:return t;case J.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case J.IncrementalSnapshot:switch(t.data.source){case Q.Mutation:return t.data.adds.forEach(t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e)}),t.data.removes.forEach(t=>{this.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(t=>{this.replaceIds(t,e,["id"])}),t.data.texts.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case Q.Drag:case Q.TouchMove:case Q.MouseMove:return t.data.positions.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case Q.ViewportResize:return!1;case Q.MediaInteraction:case Q.MouseInteraction:case Q.Scroll:case Q.CanvasMutation:case Q.Input:return this.replaceIds(t.data,e,["id"]),t;case Q.StyleSheetRule:case Q.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Q.Font:return t;case Q.Selection:return t.data.ranges.forEach(t=>{this.replaceIds(t,e,["start","end"])}),t;case Q.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null!=(i=t.data.styles)&&i.forEach(t=>{this.replaceStyleIds(t,e,["styleId"])}),t}}}replace(t,e,i,n){for(const r of n)!Array.isArray(e[r])&&"number"!=typeof e[r]||(Array.isArray(e[r])?e[r]=t.getIds(i,e[r]):e[r]=t.getId(i,e[r]));return e}replaceIds(t,e,i){return this.replace(this.crossOriginIframeMirror,t,e,i)}replaceStyleIds(t,e,i){return this.replace(this.crossOriginIframeStyleMirror,t,e,i)}replaceIdOnNode(t,e){this.replaceIds(t,e,["id"]),"childNodes"in t&&t.childNodes.forEach(t=>{this.replaceIdOnNode(t,e)})}}class he{constructor(t){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;const i=this;this.restorePatches.push(x(Element.prototype,"attachShadow",function(e){return function(t){t=e.call(this,t);return this.shadowRoot&&i.addShadowRoot(this.shadowRoot,this.ownerDocument),t}}))}addShadowRoot(t,e){!U(t)||this.shadowDoms.has(t)||(this.shadowDoms.add(t),te(Object.assign(Object.assign({},this.bypassOptions),{doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),ie(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),setTimeout(()=>{t.adoptedStyleSheets&&0<t.adoptedStyleSheets.length&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),ae({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t)},0))}observeAttachShadow(i){if(i.contentWindow){const n=this;this.restorePatches.push(x(i.contentWindow.HTMLElement.prototype,"attachShadow",function(e){return function(t){t=e.call(this,t);return this.shadowRoot&&n.addShadowRoot(this.shadowRoot,i.contentDocument),t}}))}}reset(){this.restorePatches.forEach(t=>t()),this.shadowDoms=new WeakSet}}function g(t,o,a,u){return new(a=a||Promise)(function(i,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}s((u=u.apply(t,o||[])).next())})}for(var de="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fe="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ve=0;ve<de.length;ve++)fe[de.charCodeAt(ve)]=ve;function ge(t){for(var e=new Uint8Array(t),i=e.length,n="",r=0;r<i;r+=3)n=(n=(n=(n+=de[e[r]>>2])+de[(3&e[r])<<4|e[r+1]>>4])+de[(15&e[r+1])<<2|e[r+2]>>6])+de[63&e[r+2]];return i%3==2?n=n.substring(0,n.length-1)+"=":i%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function me(t){for(var e,i,n,r,s=.75*t.length,o=t.length,a=0,s=("="===t[t.length-1]&&(s--,"="===t[t.length-2])&&s--,new ArrayBuffer(s)),u=new Uint8Array(s),l=0;l<o;l+=4)e=fe[t.charCodeAt(l)],i=fe[t.charCodeAt(l+1)],n=fe[t.charCodeAt(l+2)],r=fe[t.charCodeAt(l+3)],u[a++]=e<<2|i>>4,u[a++]=(15&i)<<4|n>>2,u[a++]=(3&n)<<6|63&r;return s}const pe=new Map;const ye=(e,i,n)=>{if(e&&(Ce(e,i)||"object"==typeof e)){i=function(t,e){let i=pe.get(t);return i||(i=new Map,pe.set(t,i)),i.has(e)||i.set(e,[]),i.get(e)}(n,e.constructor.name);let t=i.indexOf(e);return-1===t&&(t=i.length,i.push(e)),t}};const Ie=(t,e,i)=>[...t].map(t=>function e(t,i,n){var r;return t instanceof Array?t.map(t=>e(t,i,n)):null===t?t:t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray?{rr_type:t.constructor.name,args:[Object.values(t)]}:t instanceof ArrayBuffer?{rr_type:t.constructor.name,base64:ge(t)}:t instanceof DataView?{rr_type:t.constructor.name,args:[e(t.buffer,i,n),t.byteOffset,t.byteLength]}:t instanceof HTMLImageElement?(r=t.src,{rr_type:t.constructor.name,src:r}):t instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:t.toDataURL()}:t instanceof ImageData?{rr_type:t.constructor.name,args:[e(t.data,i,n),t.width,t.height]}:Ce(t,i)||"object"==typeof t?{rr_type:t.constructor.name,index:ye(t,i,n)}:t}(t,e,i)),Ce=(e,i)=>{var t=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(t=>"function"==typeof i[t]);return Boolean(t.find(t=>e instanceof i[t]))};function be(t,n,r){const e=[];try{var i=x(t.HTMLCanvasElement.prototype,"getContext",function(i){return function(t,...e){return M(this,n,r,!0)||"__context"in this||(this.__context=t),i.apply(this,[t,...e])}});e.push(i)}catch(t){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{e.forEach(t=>t())}}function we(e,n,r,s,o,t,a){var i,u=[];for(const c of Object.getOwnPropertyNames(e))if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))try{"function"==typeof e[c]&&(i=x(e,c,function(i){return function(...t){var e=i.apply(this,t);return ye(e,a,this),M(this.canvas,s,o,!0)||(t=Ie([...t],a,this),t={type:n,property:c,args:t},r(this.canvas,t)),e}}),u.push(i))}catch(t){var l=_t(e,c,{set(t){r(this.canvas,{type:n,property:c,args:[t],setter:!0})}});u.push(l)}return u}var Ae=null;try{Ae=("undefined"!=typeof module&&"function"==typeof module.require&&module.require("worker_threads")||"function"==typeof require&&require("worker_threads")||"function"==typeof require&&require("worker_threads")).Worker}catch(wn){}function Se(t,e,i){var e=void 0===e?null:e,t=(i=void 0!==i&&i,Buffer.from(t,"base64").toString(i?"utf16":"utf8")),i=t.indexOf("\n",10)+1,n=t.substring(i)+(e?"//# sourceMappingURL="+e:"");return function(t){return new Ae(n,Object.assign({},t,{eval:!0}))}}function Te(t,e,i){e=void 0===e?null:e,t=function(t,e){var i=atob(t);if(e){for(var n=new Uint8Array(i.length),r=0,s=i.length;r<s;++r)n[r]=i.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}(t,void 0!==i&&i),i=t.indexOf("\n",10)+1,t=t.substring(i)+(e?"//# sourceMappingURL="+e:""),i=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(i)}t="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);e=null,s=!(n="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=");var _e,ke,Oe,Ee,Ne=t?Se(n,e,s):(_e=n,ke=e,Oe=s,function(t){return Ee=Ee||Te(_e,ke,Oe),new Worker(Ee,t)});class xe{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(t,e)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(t)||this.pendingCanvasMutations.set(t,[]),this.pendingCanvasMutations.get(t).push(e)};var{sampling:e="all",win:i,blockClass:n,blockSelector:r,recordCanvas:s,dataURLOptions:o}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,s&&"all"===e&&this.initCanvasMutationObserver(i,n,r),s&&"number"==typeof e&&this.initCanvasFPSObserver(e,i,n,r,{dataURLOptions:o})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,i,n,r,s){const e=be(i,n,r),o=new Map,a=new Ne,u=(a.onmessage=t=>{var e,i,n,r=t.data["id"];o.set(r,!1),"base64"in t.data&&({base64:t,type:e,width:i,height:n}=t.data,this.mutationCb({id:r,type:f["2D"],commands:[{property:"clearRect",args:[0,0,i,n]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:t}],type:e}]},0,0]}]}))},1e3/t);let l=0,c;const h=()=>{const e=[];return i.document.querySelectorAll("canvas").forEach(t=>{M(t,n,r,!0)||e.push(t)}),e},d=t=>{c=(l&&t-l<u||(l=t,h().forEach(n=>g(this,void 0,void 0,function*(){var t,e,i=this.mirror.getId(n);o.get(i)||(o.set(i,!0),["webgl","webgl2"].includes(n.__context)&&!1===(null==(e=null==(t=n.getContext(n.__context))?void 0:t.getContextAttributes())?void 0:e.preserveDrawingBuffer)&&null!=t&&t.clear(t.COLOR_BUFFER_BIT),e=yield createImageBitmap(n),a.postMessage({id:i,bitmap:e,width:n.width,height:n.height,dataURLOptions:s.dataURLOptions},[e]))}))),requestAnimationFrame(d))};c=requestAnimationFrame(d),this.resetObservers=()=>{e(),cancelAnimationFrame(c)}}initCanvasMutationObserver(t,e,i){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const n=be(t,e,i),r=function(i,n,r,s){const e=[];var t;for(const a of Object.getOwnPropertyNames(n.CanvasRenderingContext2D.prototype))try{"function"==typeof n.CanvasRenderingContext2D.prototype[a]&&(t=x(n.CanvasRenderingContext2D.prototype,a,function(t){return function(...e){return M(this.canvas,r,s,!0)||setTimeout(()=>{var t=Ie([...e],n,this);i(this.canvas,{type:f["2D"],property:a,args:t})},0),t.apply(this,e)}}),e.push(t))}catch(t){var o=_t(n.CanvasRenderingContext2D.prototype,a,{set(t){i(this.canvas,{type:f["2D"],property:a,args:[t],setter:!0})}});e.push(o)}return()=>{e.forEach(t=>t())}}(this.processMutation.bind(this),t,e,i),s=function(t,e,i,n){const r=[];return r.push(...we(e.WebGLRenderingContext.prototype,f.WebGL,t,i,n,0,e)),void 0!==e.WebGL2RenderingContext&&r.push(...we(e.WebGL2RenderingContext.prototype,f.WebGL2,t,i,n,0,e)),()=>{r.forEach(t=>t())}}(this.processMutation.bind(this),t,e,i,this.mirror);this.resetObservers=()=>{n(),r(),s()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,e)=>{var i=this.mirror.getId(e);this.flushPendingCanvasMutationFor(e,i)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,e){var i,n;this.frozen||this.locked||(n=this.pendingCanvasMutations.get(t))&&-1!==e&&(i=n.map(t=>{var e=t,i=["type"],n={};for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&i.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)i.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}),n=n[0]["type"],this.mutationCb({id:e,type:n,commands:i}),this.pendingCanvasMutations.delete(t))}}class Re{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ut,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,e){"le"in e.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:e.id,attributes:e.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,e){if(0!==t.length){var i,n={id:e,styleIds:[]},r=[];for(const s of t){let t;this.styleMirror.has(s)?t=this.styleMirror.getId(s):(t=this.styleMirror.add(s),i=Array.from(s.rules||CSSRule),r.push({styleId:t,rules:i.map((t,e)=>({rule:m(t),index:e}))})),n.styleIds.push(t)}0<r.length&&(n.styles=r),this.adoptedStyleSheetCb(n)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}function H(t){return Object.assign(Object.assign({},t),{timestamp:Date.now()})}let X,Me,je,De=!1;const q=p();function Fe(F={}){const{emit:n,checkoutEveryNms:r,checkoutEveryNth:s,blockClass:b="rr-block",blockSelector:w=null,ignoreClass:G="rr-ignore",maskTextClass:A="rr-mask",maskTextSelector:S=null,inlineStylesheet:T=!0,maskAllInputs:L,maskInputOptions:t,slimDOMOptions:e,maskInputFn:i,maskTextFn:_,hooks:B,packFn:o,sampling:a={},dataURLOptions:k={},mousemoveWait:u,recordCanvas:O=!1,recordCrossOriginIframes:l=!1,userTriggeredOnInput:V=!1,collectFonts:W=!1,inlineImages:E=!1,plugins:c,keepIframeSrcFn:N=()=>!1,ignoreCSSAttributes:U=new Set([])}=F,h=!l||window.parent===window;let d=!1;if(!h)try{window.parent.document,d=!1}catch(t){d=!0}if(h&&!n)throw new Error("emit function is required");void 0!==u&&void 0===a.mousemove&&(a.mousemove=u),q.reset();const x=!0===L?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==t?t:{password:!0},R=!0===e||"all"===e?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===e,headMetaDescKeywords:"all"===e}:e||{};Mt();let f,v=0;const g=t=>{for(const e of c||[])e.eventProcessor&&(t=e.eventProcessor(t));return t=o?o(t):t},m=(X=(t,e)=>{var i;null==(i=z[0])||!i.isFrozen()||t.type===J.FullSnapshot||t.type===J.IncrementalSnapshot&&t.data.source===Q.Mutation||z.forEach(t=>t.unfreeze()),h?null!==n&&void 0!==n&&n(g(t),e):d&&(i={type:"rrweb",event:g(t),isCheckout:e},window.parent.postMessage(i,"*")),t.type===J.FullSnapshot?(f=t,v=0):t.type!==J.IncrementalSnapshot||t.data.source===Q.Mutation&&t.data.isAttachIframe||(v++,e=s&&v>=s,i=r&&t.timestamp-f.timestamp>r,(e||i)&&Me(!0))},t=>{X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.Mutation},t)}))}),Z=t=>X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.Scroll},t)})),K=t=>X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.CanvasMutation},t)}));const M=new Re({mutationCb:m,adoptedStyleSheetCb:t=>X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.AdoptedStyleSheet},t)}))}),j=new ce({mirror:q,mutationCb:m,stylesheetManager:M,recordCrossOriginIframes:l,wrappedEmit:X});for(const p of c||[])p.getMirror&&p.getMirror({nodeMirror:q,crossOriginIframeMirror:j.crossOriginIframeMirror,crossOriginIframeStyleMirror:j.crossOriginIframeStyleMirror});je=new xe({recordCanvas:O,mutationCb:K,win:window,blockClass:b,blockSelector:w,mirror:q,sampling:a.canvas,dataURLOptions:k});const D=new he({mutationCb:m,scrollCb:Z,bypassOptions:{blockClass:b,blockSelector:w,maskTextClass:A,maskTextSelector:S,inlineStylesheet:T,maskInputOptions:x,dataURLOptions:k,maskTextFn:_,maskInputFn:i,recordCanvas:O,inlineImages:E,sampling:a,slimDOMOptions:R,iframeManager:j,stylesheetManager:M,canvasManager:je,keepIframeSrcFn:N},mirror:q});Me=(t=!1)=>{X(H({type:J.Meta,data:{href:window.location.href,width:Ot(),height:kt()}}),t),M.reset(),z.forEach(t=>t.lock()),t=document,e={mirror:q,blockClass:b,blockSelector:w,maskTextClass:A,maskTextSelector:S,inlineStylesheet:T,maskAllInputs:x,maskTextFn:_,slimDOM:R,dataURLOptions:k,recordCanvas:O,inlineImages:E,onSerialize:t=>{Ft(t,q)&&j.addIframe(t),Gt(t,q)&&M.trackLinkElement(t),Y(t)&&D.addShadowRoot(t.shadowRoot,document)},onIframeLoad:(t,e)=>{j.attachIframe(t,e),D.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{M.attachLinkElement(t,e)},keepIframeSrcFn:N},i=void 0===(i=(e=e||{}).mirror)?new et:i,n=e.blockClass,r=e.blockSelector,s=e.maskTextClass,o=e.maskTextSelector,a=e.inlineStylesheet,u=e.inlineImages,l=e.recordCanvas,c=void 0!==(c=e.maskAllInputs)&&c,h=e.maskTextFn,d=e.maskInputFn,f=void 0!==(f=e.slimDOM)&&f,v=e.dataURLOptions,g=e.preserveWhiteSpace,m=e.onSerialize,p=e.onIframeLoad,y=e.iframeLoadTimeout,I=e.onStylesheetLoad,C=e.stylesheetLoadTimeout,e=e.keepIframeSrcFn;var e,i,n,r,s,o,a,u,l,c,h,d,f,v,g,m,p,y,I,C,t=ft(t,{doc:t,mirror:i,blockClass:void 0===n?"rr-block":n,blockSelector:void 0===r?null:r,maskTextClass:void 0===s?"rr-mask":s,maskTextSelector:void 0===o?null:o,skipChild:!1,inlineStylesheet:void 0===a||a,maskInputOptions:!0===c?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===c?{password:!0}:c,maskTextFn:h,maskInputFn:d,slimDOMOptions:!0===f||"all"===f?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===f,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===f?{}:f,dataURLOptions:v,inlineImages:void 0!==u&&u,recordCanvas:void 0!==l&&l,preserveWhiteSpace:g,onSerialize:m,onIframeLoad:p,iframeLoadTimeout:y,onStylesheetLoad:I,stylesheetLoadTimeout:C,keepIframeSrcFn:void 0===e?function(){return!1}:e,newlyAddedElement:!1});if(!t)return console.warn("Failed to snapshot the document");X(H({type:J.FullSnapshot,data:{node:t,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null==(n=null==(i=null===document||void 0===document?void 0:document.body)?void 0:i.parentElement)?void 0:n.scrollLeft)||(null==(r=null===document||void 0===document?void 0:document.body)?void 0:r.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null==(o=null==(s=null===document||void 0===document?void 0:document.body)?void 0:s.parentElement)?void 0:o.scrollTop)||(null==(a=null===document||void 0===document?void 0:document.body)?void 0:a.scrollTop)||0}}})),z.forEach(t=>t.unlock()),document.adoptedStyleSheets&&0<document.adoptedStyleSheets.length&&M.adoptStyleSheets(document.adoptedStyleSheets,q.getId(document))};try{const y=[],I=(y.push(P("DOMContentLoaded",()=>{X(H({type:J.DomContentLoaded,data:{}}))})),t=>{return ue({mutationCb:m,mousemoveCb:(t,e)=>X(H({type:J.IncrementalSnapshot,data:{source:e,positions:t}})),mouseInteractionCb:t=>X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.MouseInteraction},t)})),scrollCb:Z,viewportResizeCb:t=>X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.ViewportResize},t)})),inputCb:t=>X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.Input},t)})),mediaInteractionCb:t=>X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.MediaInteraction},t)})),styleSheetRuleCb:t=>X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.StyleSheetRule},t)})),styleDeclarationCb:t=>X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.StyleDeclaration},t)})),canvasMutationCb:K,fontCb:t=>X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.Font},t)})),selectionCb:t=>{X(H({type:J.IncrementalSnapshot,data:Object.assign({source:Q.Selection},t)}))},blockClass:b,ignoreClass:G,maskTextClass:A,maskTextSelector:S,maskInputOptions:x,inlineStylesheet:T,sampling:a,recordCanvas:O,inlineImages:E,userTriggeredOnInput:V,collectFonts:W,doc:t,maskInputFn:i,maskTextFn:_,keepIframeSrcFn:N,blockSelector:w,slimDOMOptions:R,dataURLOptions:k,mirror:q,iframeManager:j,stylesheetManager:M,shadowDomManager:D,canvasManager:je,ignoreCSSAttributes:U,plugins:(null==(t=null===c||void 0===c?void 0:c.filter(t=>t.observer))?void 0:t.map(e=>({observer:e.observer,options:e.options,callback:t=>X(H({type:J.Plugin,data:{plugin:e.name,payload:t}}))})))||[]},B)}),C=(j.addLoadListener(t=>{y.push(I(t.contentDocument))}),()=>{Me(),y.push(I(document)),De=!0});return"interactive"===document.readyState||"complete"===document.readyState?C():y.push(P("load",()=>{X(H({type:J.Load,data:{}})),C()},window)),()=>{y.forEach(t=>t()),De=!1}}catch(t){console.warn(t)}}Fe.addCustomEvent=(t,e)=>{if(!De)throw new Error("please add custom event after start recording");X(H({type:J.Custom,data:{tag:t,payload:e}}))},Fe.freezePage=()=>{z.forEach(t=>t.freeze())},Fe.takeFullSnapshot=t=>{if(!De)throw new Error("please take full snapshot after start recording");Me(t)},Fe.mirror=q;const Ge=Fe["addCustomEvent"],Le=Fe["freezePage"];for(var $=Uint8Array,tt=Uint16Array,Be=Uint32Array,Ve=new $([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),We=new $([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ue=new $([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=function(t,e){for(var i=new tt(31),n=0;n<31;++n)i[n]=e+=1<<t[n-1];for(var r=new Be(i[30]),n=1;n<30;++n)for(var s=i[n];s<i[n+1];++s)r[s]=s-i[n]<<5|n;return[i,r]},n=t(Ve,2),Ze=n[0],Ke=n[1],e=(Ze[28]=258,Ke[258]=28,t(We,0)),Pe=e[0],Ye=e[1],Je=new tt(32768),r=0;r<32768;++r){var Qe=(43690&r)>>>1|(21845&r)<<1;Je[r]=((65280&(Qe=(61680&(Qe=(52428&Qe)>>>2|(13107&Qe)<<2))>>>4|(3855&Qe)<<4))>>>8|(255&Qe)<<8)>>>1}for(var L=function(t,e,i){for(var n=t.length,r=0,s=new tt(e);r<n;++r)++s[t[r]-1];var o=new tt(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;if(i){for(var a=new tt(1<<e),u=15-e,r=0;r<n;++r)if(t[r])for(var l=r<<4|t[r],c=e-t[r],h=o[t[r]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)a[Je[h]>>>u]=l}else for(a=new tt(n),r=0;r<n;++r)a[r]=Je[o[t[r]-1]++]>>>15-t[r];return a},D=new $(288),r=0;r<144;++r)D[r]=8;for(r=144;r<256;++r)D[r]=9;for(r=256;r<280;++r)D[r]=7;for(r=280;r<288;++r)D[r]=8;for(var ze=new $(32),r=0;r<32;++r)ze[r]=5;function He(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e}function B(t,e,i){var n=e/8>>0;return(t[n]|t[1+n]<<8)>>>(7&e)&i}function Xe(t,e){var i=e/8>>0;return(t[i]|t[1+i]<<8|t[2+i]<<16)>>>(7&e)}function qe(t){return(t/8>>0)+(7&t&&1)}function F(t,e,i){var n=e/8>>0;t[n]|=i<<=7&e,t[1+n]|=i>>>8}function $e(t,e,i){var n=e/8>>0;t[n]|=i<<=7&e,t[1+n]|=i>>>8,t[2+n]|=i>>>16}function ti(t,e){for(var i=[],n=0;n<t.length;++n)t[n]&&i.push({s:n,f:t[n]});var r=i.length,s=i.slice();if(!r)return[new $(0),0];if(1==r)return(g=new $(i[0].s+1))[i[0].s]=1,[g,1];i.sort(function(t,e){return t.f-e.f}),i.push({s:-1,f:25001});var o=i[0],a=i[1],u=0,l=1,c=2;for(i[0]={s:-1,f:o.f+a.f,l:o,r:a};l!=r-1;)o=i[i[u].f<i[c].f?u++:c++],a=i[u!=l&&i[u].f<i[c].f?u++:c++],i[l++]={s:-1,f:o.f+a.f,l:o,r:a};for(var h=s[0].s,n=1;n<r;++n)s[n].s>h&&(h=s[n].s);var d=new tt(h+1),f=hi(i[l-1],d,0);if(e<f){var n=0,v=0,g=f-e,m=1<<g;for(s.sort(function(t,e){return d[e.s]-d[t.s]||t.f-e.f});n<r;++n){var p=s[n].s;if(!(d[p]>e))break;v+=m-(1<<f-d[p]),d[p]=e}for(v>>>=g;0<v;){var y=s[n].s;d[y]<e?v-=1<<e-d[y]++-1:++n}for(;0<=n&&v;--n){var I=s[n].s;d[I]==e&&(--d[I],++v)}f=e}return[new $(d),f]}function ei(t){for(var e=t.length;e&&!t[--e];);for(var i=new tt(++e),n=0,r=t[0],s=1,o=function(t){i[n++]=t},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&2<s){for(;138<s;s-=138)o(32754);2<s&&(o(10<s?s-11<<5|28690:s-3<<5|12305),s=0)}else if(3<s){for(o(r),--s;6<s;s-=6)o(8304);2<s&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[i.subarray(0,n),e]}function ii(t,e){for(var i=0,n=0;n<e.length;++n)i+=t[n]*e[n];return i}function ni(t,e,i){var n=i.length,r=qe(e+2);t[r]=255&n,t[r+1]=n>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<n;++s)t[r+s+4]=i[s];return 8*(r+4+n)}function ri(t,e,i,n,r,s,o,a,u,l,c){F(e,c++,i),++r[256];for(var h=(i=ti(r,15))[0],i=i[1],d=(f=ti(s,15))[0],f=f[1],v=(g=ei(h))[0],g=g[1],m=(p=ei(d))[0],p=p[1],y=new tt(19),I=0;I<v.length;++I)y[31&v[I]]++;for(I=0;I<m.length;++I)y[31&m[I]]++;for(var C=(b=ti(y,7))[0],b=b[1],w=19;4<w&&!C[Ue[w-1]];--w);var A=l+5<<3,S=ii(r,D)+ii(s,ze)+o,r=ii(r,h)+ii(s,d)+o+14+3*w+ii(y,C)+(2*y[16]+3*y[17]+7*y[18]);if(A<=S&&A<=r)return ni(e,c,t.subarray(u,u+l));if(F(e,c,1+(r<S)),c+=2,r<S){var T=L(h,i,0),_=h,k=L(d,f,0),O=d,E=L(C,b,0);F(e,c,g-257),F(e,c+5,p-1),F(e,c+10,w-4),c+=14;for(I=0;I<w;++I)F(e,c+3*I,C[Ue[I]]);c+=3*w;for(var N=[v,m],x=0;x<2;++x)for(var R=N[x],I=0;I<R.length;++I){var M=31&R[I];F(e,c,E[M]),c+=C[M],15<M&&(F(e,c,R[I]>>>5&127),c+=R[I]>>>12)}}else T=si,_=D,k=ai,O=ze;for(var j,I=0;I<a;++I)255<n[I]?(M=n[I]>>>18&31,$e(e,c,T[M+257]),c+=_[M+257],7<M&&(F(e,c,n[I]>>>23&31),c+=Ve[M]),j=31&n[I],$e(e,c,k[j]),c+=O[j],3<j&&($e(e,c,n[I]>>>5&8191),c+=We[j])):($e(e,c,T[n[I]]),c+=_[n[I]]);return $e(e,c,T[256]),c+_[256]}var k,si=L(D,9,0),oi=L(D,9,1),ai=L(ze,5,0),ui=L(ze,5,1),li=function(t,e,i){(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length);var n=new(t instanceof tt?tt:t instanceof Be?Be:$)(i-e);return n.set(t.subarray(e,i)),n},ci=function(t,i,e){function n(t){var e=i.length;e<t&&((e=new $(Math.max(2*e,t))).set(i),i=e)}var r=t.length,s=!i||e,o=!e||e.i,a=(e=e||{},i=i||new $(3*r),e.f||0),u=e.p||0,l=e.b||0,c=e.l,h=e.d,d=e.m,f=e.n,v=8*r;do{if(!c){e.f=a=B(t,u,1);var g=B(t,u+1,3);if(u+=3,!g){var m=t[(T=qe(u)+4)-4]|t[T-3]<<8,p=T+m;if(r<p){if(o)throw"unexpected EOF";break}s&&n(l+m),i.set(t.subarray(T,p),l),e.b=l+=m,e.p=u=8*p;continue}if(1==g)c=oi,h=ui,d=9,f=5;else{if(2!=g)throw"invalid block type";for(var m=B(t,u,31)+257,y=B(t,u+10,15)+4,I=m+B(t,u+5,31)+1,C=(u+=14,new $(I)),b=new $(19),w=0;w<y;++w)b[Ue[w]]=B(t,u+3*w,7);u+=3*y;var p=He(b),A=(1<<p)-1;if(!o&&v<u+I*(p+7))break;for(var S=L(b,p,1),w=0;w<I;){var T,_=S[B(t,u,A)];if(u+=15&_,(T=_>>>4)<16)C[w++]=T;else{var k=0,O=0;for(16==T?(O=3+B(t,u,3),u+=2,k=C[w-1]):17==T?(O=3+B(t,u,7),u+=3):18==T&&(O=11+B(t,u,127),u+=7);O--;)C[w++]=k}}var g=C.subarray(0,m),E=C.subarray(m),d=He(g),f=He(E),c=L(g,d,1),h=L(E,f,1)}if(v<u)throw"unexpected EOF"}s&&n(l+131072);for(var N=(1<<d)-1,F=(1<<f)-1,G=d+f+18;o||u+G<v;){var x=(k=c[Xe(t,u)&N])>>>4;if(v<(u+=15&k))throw"unexpected EOF";if(!k)throw"invalid length/literal";if(x<256)i[l++]=x;else{if(256==x){c=null;break}var R=x-254,x=(264<x&&(j=Ve[w=x-257],R=B(t,u,(1<<j)-1)+Ze[w],u+=j),h[Xe(t,u)&F]),M=x>>>4;if(!x)throw"invalid distance";u+=15&x;var j,E=Pe[M];if(3<M&&(j=We[M],E+=Xe(t,u)&(1<<j)-1,u+=j),v<u)throw"unexpected EOF";s&&n(l+131072);for(var D=l+R;l<D;l+=4)i[l]=i[l-E],i[l+1]=i[l+1-E],i[l+2]=i[l+2-E],i[l+3]=i[l+3-E];l=D}}e.l=c,e.p=u,e.b=l,c&&(a=1,e.m=d,e.d=h,e.n=f)}while(!a);return l==i.length?i:li(i,0,l)},hi=function(t,e,i){return-1==t.s?Math.max(hi(t.l,e,i+1),hi(t.r,e,i+1)):e[t.s]=i},di=new Be([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),fi=new $(0),vi=function(){var o=1,a=0;return{p:function(t){for(var e=o,i=a,n=t.length,r=0;r!=n;){for(var s=Math.min(r+5552,n);r<s;++r)i+=e+=t[r];e%=65521,i%=65521}o=e,a=i},d:function(){return(o>>>8<<16|(255&a)<<8|a>>>8)+2*((255&o)<<23)}}},gi=function(t,e,i,n,F){var r=t,s=null==e.level?6:e.level,t=null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,e=i,i=n,o=!F,a=r.length,n=new $(e+a+5*(1+Math.floor(a/7e3))+i),u=n.subarray(e,n.length-i),l=0;if(!s||a<8)for(var c=0;c<=a;c+=65535)var h=c+65535,l=h<a?ni(u,l,r.subarray(c,h)):(u[c]=o,ni(u,l,r.subarray(c,a)));else{for(var s=di[s-1],G=s>>>13,L=8191&s,d=(1<<t)-1,f=new tt(32768),v=new tt(1+d),g=Math.ceil(t/3),B=2*g,m=function(t){return(r[t]^r[t+1]<<g^r[t+2]<<B)&d},p=new Be(25e3),y=new tt(288),I=new tt(32),C=0,b=0,c=0,w=0,A=0,S=0;c<a;++c){var T=m(c),_=32767&c,k=v[T];if(f[_]=k,v[T]=_,A<=c){var O=a-c;if((7e3<C||24576<w)&&423<O){l=ri(r,u,0,p,y,I,b,w,S,c-S,l);for(var w=C=b=0,S=c,E=0;E<286;++E)y[E]=0;for(E=0;E<30;++E)I[E]=0}var N=2,x=0,V=L,R=_-k&32767;if(2<O&&T==m(c-R))for(var W=Math.min(G,O)-1,U=Math.min(32767,c),Z=Math.min(258,O);R<=U&&--V&&_!=k;){if(r[c+N]==r[c+N-R]){for(var M=0;M<Z&&r[c+M]==r[c+M-R];++M);if(N<M){if(x=R,W<(N=M))break;for(var K=Math.min(R,M-2),j=0,E=0;E<K;++E){var D=c-R+E+32768&32767,P=D-f[D]+32768&32767;j<P&&(j=P,k=D)}}}R+=(_=k)-(k=f[_])+32768&32767}x?(p[w++]=268435456|Ke[N]<<18|Ye[x],T=31&Ke[N],O=31&Ye[x],b+=Ve[T]+We[O],++y[257+T],++I[O],A=c+N,++C):(p[w++]=r[c],++y[r[c]])}}l=ri(r,u,o,p,y,I,b,w,S,c-S,l),o||(l=ni(u,l,fi))}return li(n,0,e+qe(l)+i)},mi=function(t,e,i){for(;i;++e)t[e]=i,i>>>=8},pi=function(t,e){e=e.level,e=0==e?0:e<6?1:9==e?3:2;t[0]=120,t[1]=e<<6|(e?32-2*e:1)},yi=function(t){if(8!=(15&t[0])||7<t[0]>>>4||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function Ii(t,e){var i=t.length;if(!e&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t);for(var n=new $(t.length+(t.length>>>1)),r=0,s=function(t){n[r++]=t},o=0;o<i;++o){r+5>n.length&&((a=new $(r+8+(i-o<<1))).set(n),n=a);var a=t.charCodeAt(o);a<128||e?s(a):(a<2048?s(192|a>>>6):(55295<a&&a<57344?(s(240|(a=65536+(1047552&a)|1023&t.charCodeAt(++o))>>>18),s(128|a>>>12&63)):s(224|a>>>12),s(128|a>>>6&63)),s(128|63&a))}return li(n,0,r)}function Ci(t,e){var i="";if(!e&&"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var n=0;n<t.length;){var r=t[n++];r<128||e?i+=String.fromCharCode(r):r<224?i+=String.fromCharCode((31&r)<<6|63&t[n++]):r<240?i+=String.fromCharCode((15&r)<<12|(63&t[n++])<<6|63&t[n++]):(r=((15&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,i+=String.fromCharCode(55296|r>>10,56320|1023&r))}return i}const bi=t=>{var e,i,t=Object.assign(Object.assign({},t),{v:"v1"});return Ci((t=Ii(JSON.stringify(t)),void 0===e&&(e={}),(i=vi()).p(t),t=gi(t,e,2,4),pi(t,e),mi(t,t.length-4,i.d()),t),!0)},wi=t=>{if("string"!=typeof t)return t;try{var e=JSON.parse(t);if(e.timestamp)return e}catch(t){}try{var i=JSON.parse(Ci((n=Ii(t,!0),ci((yi(n),n.subarray(2,-4)),r))));if("v1"===i.v)return i;throw new Error(`These events were packed with packer ${i.v} which is incompatible with current packer v1.`)}catch(t){throw console.error(t),new Error("Unknown data format.")}var n,r};class Ai{constructor(t){this.fileName=t.fileName||"",this.functionName=t.functionName||"",this.lineNumber=t.lineNumber,this.columnNumber=t.columnNumber}toString(){var t=this.lineNumber||"",e=this.columnNumber||"";return this.functionName?`${this.functionName} (${this.fileName}:${t}:${e})`:this.fileName+`:${t}:`+e}}const Si=/(^|@)\S+:\d+/,Ti=/^\s*at .*(\S+:\d+|\(native\))/m,_i=/^(eval@)?(\[native code])?$/,ki={parse:function(t){if(!t)return[];if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(Ti))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,""));if(e)return[e[1],e[2]||void 0,e[3]||void 0];throw new Error("Cannot parse given url: "+t)},parseV8OrIE:function(t){return t.stack.split("\n").filter(function(t){return!!t.match(Ti)},this).map(function(t){let e=(t=-1<t.indexOf("(eval ")?t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):t).replace(/^\s+/,"").replace(/\(eval code/g,"(");var t=e.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(e=t?e.replace(t[0],""):e).split(/\s+/).slice(1),t=this.extractLocation(t?t[1]:i.pop()),i=i.join(" ")||void 0,n=-1<["eval","<anonymous>"].indexOf(t[0])?void 0:t[0];return new Ai({functionName:i,fileName:n,lineNumber:t[1],columnNumber:t[2]})},this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter(function(t){return!t.match(_i)},this).map(function(t){var e,i;return-1===(t=-1<t.indexOf(" > eval")?t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):t).indexOf("@")&&-1===t.indexOf(":")?new Ai({functionName:t}):(i=(i=t.match(e=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&i[1]?i[1]:void 0,t=this.extractLocation(t.replace(e,"")),new Ai({functionName:i,fileName:t[0],lineNumber:t[1],columnNumber:t[2]}))},this)},parseOpera:function(t){return!t.stacktrace||-1<t.message.indexOf("\n")&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(t){var i=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),r=[];for(let t=2,e=n.length;t<e;t+=2){var s=i.exec(n[t]);s&&r.push(new Ai({fileName:s[2],lineNumber:parseFloat(s[1])}))}return r},parseOpera10:function(t){var i=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),r=[];for(let t=0,e=n.length;t<e;t+=2){var s=i.exec(n[t]);s&&r.push(new Ai({functionName:s[3]||void 0,fileName:s[2],lineNumber:parseFloat(s[1])}))}return r},parseOpera11:function(t){return t.stack.split("\n").filter(function(t){return!!t.match(Si)&&!t.match(/^Error created at/)},this).map(function(t){var t=t.split("@"),e=this.extractLocation(t.pop()),t=(t.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new Ai({functionName:t,fileName:e[0],lineNumber:e[1],columnNumber:e[2]})},this)}};function Oi(t){return"[object Object]"===Object.prototype.toString.call(t)}function Ei(t,e){const o={numOfKeysLimit:50,depthOfLimit:4},a=(Object.assign(o,e),[]),u=[];return JSON.stringify(t,function(t,e){if(0<a.length?(~(i=a.indexOf(this))?a.splice(i+1):a.push(this),~i?u.splice(i,1/0,t):u.push(t),~a.indexOf(e)&&(e=a[0]===e?"[Circular ~]":"[Circular ~."+u.slice(0,a.indexOf(e)).join(".")+"]")):a.push(e),null===e)return e;if(void 0===e)return"undefined";if(function(t){if(Oi(t)&&Object.keys(t).length>o.numOfKeysLimit)return 1;if("function"==typeof t)return 1;if(Oi(t)&&function t(e,i){if(0===i)return 1;for(const n of Object.keys(e))if(Oi(e[n])&&t(e[n],i-1))return 1}(t,o.depthOfLimit))return 1;return}(e)){var i=e;let t=i.toString();o.stringLengthLimit&&t.length>o.stringLengthLimit&&(t=t.slice(0,o.stringLengthLimit)+"...");return t}if(e instanceof Event){var n={};for(const s in e){var r=e[s];Array.isArray(r)?n[s]=function(t){if(!t||!t.outerHTML)return"";let i="";for(;t.parentElement;){let e=t.localName;if(!e)break;e=e.toLowerCase();var n=t.parentElement,r=[];if(n.children&&0<n.children.length)for(let t=0;t<n.children.length;t++){var s=n.children[t];s.localName&&s.localName.toLowerCase&&s.localName.toLowerCase()===e&&r.push(s)}1<r.length&&(e+=`:eq(${r.indexOf(t)})`),i=e+(i?">"+i:""),t=n}return i}(r.length?r[0]:null):n[s]=r}return n}return e instanceof Node?e instanceof HTMLElement?e?e.outerHTML:"":e.nodeName:e instanceof Error?e.stack?e.stack+"\nEnd of stack for Error object":e.name+": "+e.message:e})}const Ni={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function xi(s,t,e){const o=e?Object.assign({},Ni,e):Ni;e=o.logger;if(!e)return()=>{};let i,a=(i="string"==typeof e?t[e]:e,0);const n=[];if(o.level.includes("error")&&window){const r=t=>{var e=t.message,t=t.error,t=ki.parse(t).map(t=>t.toString()),e=[Ei(e,o.stringifyOptions)];s({level:"error",trace:t,payload:e})};window.addEventListener("error",r),n.push(()=>{window&&window.removeEventListener("error",r)})}for(const u of o.level)n.push(function(t,r){return t[r]?x(t,r,n=>(...e)=>{n.apply(this,e);try{var t=ki.parse(new Error).map(t=>t.toString()).splice(1),i=e.map(t=>Ei(t,o.stringifyOptions));++a<o.lengthThreshold?s({level:r,trace:t,payload:i}):a===o.lengthThreshold&&s({level:"warn",trace:[],payload:[Ei("The number of log records reached the threshold.")]})}catch(t){n("rrweb logger error:",t,...e)}}):()=>{}}(i,u));return()=>{n.forEach(t=>t())}}const Ri="rrweb/console@1",Mi=t=>({name:Ri,observer:xi,options:t}),ji="__rrweb_original__",Di={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],replayLogger:void 0};class Fi{constructor(t){this.config=Object.assign(Di,t)}getConsoleLogger(){var t={};for(const e of this.config.level)"trace"===e?t[e]=t=>{(console.log[ji]||console.log)(...t.payload.map(t=>JSON.parse(t)),this.formatMessage(t))}:t[e]=t=>{(console[e][ji]||console[e])(...t.payload.map(t=>JSON.parse(t)),this.formatMessage(t))};return t}formatMessage(t){var e;return 0===t.trace.length?"":(e="\n\tat ")+t.trace.join(e)}}const Gi=t=>{const r=(null==t?void 0:t.replayLogger)||new Fi(t).getConsoleLogger();return{handler(t,e,i){let n=null;if(t.type===J.IncrementalSnapshot&&t.data.source===Q.Log?n=t.data:t.type===J.Plugin&&t.data.plugin===Ri&&(n=t.data.payload),n)try{"function"==typeof r[n.level]&&r[n.level](n)}catch(t){i.replayer.config.showWarning&&console.warn(t)}}}};(s=k=k||{})[s.Document=0]="Document",s[s.DocumentType=1]="DocumentType",s[s.Element=2]="Element",s[s.Text=3]="Text",s[s.CDATA=4]="CDATA",s[s.Comment=5]="Comment";o.prototype.getId=function(t){return t&&null!=(t=null==(t=this.getMeta(t))?void 0:t.id)?t:-1},o.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},o.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},o.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},o.prototype.removeNodeFromMap=function(t){var e=this,i=this.getId(t);this.idNodeMap.delete(i),t.childNodes&&t.childNodes.forEach(function(t){return e.removeNodeFromMap(t)})},o.prototype.has=function(t){return this.idNodeMap.has(t)},o.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},o.prototype.add=function(t,e){var i=e.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,e)},o.prototype.replace=function(t,e){var i=this.getNode(t);i&&(i=this.nodeMetaMap.get(i))&&this.nodeMetaMap.set(e,i),this.idNodeMap.set(t,e)},o.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap};var h,Li,s,Bi=o;function o(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}function Vi(t){var e=[];for(const r in t){var i,n=t[r];"string"==typeof n&&(i=Pi(r),e.push(i+`: ${n};`))}return e.join(" ")}const Wi=/-([a-z])/g,Ui=/^--[a-zA-Z0-9-]+$/,Zi=t=>Ui.test(t)?t:t.replace(Wi,(t,e)=>e?e.toUpperCase():""),Ki=/\B([A-Z])/g,Pi=t=>t.replace(Ki,"-$1").toLowerCase();class a{constructor(){this.childNodes=[],this.parentElement=null,this.parentNode=null,this.ELEMENT_NODE=h.ELEMENT_NODE,this.TEXT_NODE=h.TEXT_NODE}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){var t,e=this.parentNode;return e&&(t=(e=e.childNodes).indexOf(this),e[t+1])||null}contains(t){if(t===this)return!0;for(const e of this.childNodes)if(e.contains(t))return!0;return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,e){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function Yi(t){return class extends t{constructor(t,e,i){super(),this.nodeType=h.DOCUMENT_TYPE_NODE,this.RRNodeType=k.DocumentType,this.textContent=null,this.name=t,this.publicId=e,this.systemId=i,this.nodeName=t}toString(){return"RRDocumentType"}}}function Ji(t){return class extends t{constructor(t){super(),this.nodeType=h.ELEMENT_NODE,this.RRNodeType=k.Element,this.attributes={},this.shadowRoot=null,this.tagName=t.toUpperCase(),this.nodeName=t.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach(t=>e+=t.textContent),e}set textContent(t){this.childNodes=[this.ownerDocument.createTextNode(t)]}get classList(){return new Xi(this.attributes.class,t=>{this.attributes.class=t})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const n=this.attributes.style?function(t){const e={},i=/:(.+)/;return t.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach(function(t){t&&1<(t=t.split(i)).length&&(e[Zi(t[0].trim())]=t[1].trim())}),e}(this.attributes.style):{},r=/\B([A-Z])/g;return n.setProperty=(t,e,i)=>{r.test(t)||(t=Zi(t),e?n[t]=e:delete n[t],"important"===i&&(n[t]+=" !important"),this.attributes.style=Vi(n))},n.removeProperty=t=>{var e;return r.test(t)?"":(t=Zi(t),e=n[t]||"",delete n[t],this.attributes.style=Vi(n),e)},n}getAttribute(t){return this.attributes[t]||null}setAttribute(t,e){this.attributes[t]=e}setAttributeNS(t,e,i){this.setAttribute(e,i)}removeAttribute(t){delete this.attributes[t]}appendChild(t){return this.childNodes.push(t),t.parentNode=this,t.parentElement=this,t}insertBefore(t,e){if(null===e)return this.appendChild(t);e=this.childNodes.indexOf(e);if(-1==e)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(e,0,t),t.parentElement=this,t.parentNode=this,t}removeChild(t){var e=this.childNodes.indexOf(t);if(-1===e)throw new Error("Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(e,1),t.parentElement=null,t.parentNode=null,t}attachShadow(t){var e=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=e}dispatchEvent(t){return!0}toString(){let t="";for(const e in this.attributes)t+=`${e}="${this.attributes[e]}" `;return this.tagName+" "+t}}}function Qi(t){return class extends t{constructor(t){super(),this.nodeType=h.TEXT_NODE,this.nodeName="#text",this.RRNodeType=k.Text,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return"RRText text="+JSON.stringify(this.data)}}}function zi(t){return class extends t{constructor(t){super(),this.nodeType=h.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=k.Comment,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return"RRComment text="+JSON.stringify(this.data)}}}function Hi(t){return class extends t{constructor(t){super(),this.nodeName="#cdata-section",this.nodeType=h.CDATA_SECTION_NODE,this.RRNodeType=k.CDATA,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return"RRCDATASection data="+JSON.stringify(this.data)}}}class Xi{constructor(t,e){this.classes=[],this.add=(...t)=>{for(const i of t){var e=String(i);0<=this.classes.indexOf(e)||this.classes.push(e)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...e)=>{this.classes=this.classes.filter(t=>-1===e.indexOf(t)),this.onChange&&this.onChange(this.classes.join(" "))},t&&(t=t.trim().split(/\s+/),this.classes.push(...t)),this.onChange=e}}(n=h=h||{})[n.PLACEHOLDER=0]="PLACEHOLDER",n[n.ELEMENT_NODE=1]="ELEMENT_NODE",n[n.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",n[n.TEXT_NODE=3]="TEXT_NODE",n[n.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",n[n.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",n[n.ENTITY_NODE=6]="ENTITY_NODE",n[n.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",n[n.COMMENT_NODE=8]="COMMENT_NODE",n[n.DOCUMENT_NODE=9]="DOCUMENT_NODE",n[n.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",n[n.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE";const qi={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},$i={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function O(e,t,i,n){const r=e.childNodes,s=t.childNodes;n=n||t.mirror||t.ownerDocument.mirror,(0<r.length||0<s.length)&&tn(Array.from(r),s,e,i,n);let o=null,a=null;switch(t.RRNodeType){case k.Document:a=t.scrollData;break;case k.Element:{const w=e;var u,l=t,c=w,h=l,d=n,f=c.attributes,v=h.attributes;for(const A in v){var g=v[A],m=d.getMeta(h);if(m&&"isSVG"in m&&m.isSVG&&qi[A])c.setAttributeNS(qi[A],A,g);else if("CANVAS"===h.tagName&&"rr_dataURL"===A){const S=document.createElement("img");S.src=g,S.onload=()=>{var t=c.getContext("2d");t&&t.drawImage(S,0,0,S.width,S.height)}}else c.setAttribute(A,g)}for({name:u}of Array.from(f))u in v||c.removeAttribute(u);switch(h.scrollLeft&&(c.scrollLeft=h.scrollLeft),h.scrollTop&&(c.scrollTop=h.scrollTop),a=l.scrollData,o=l.inputData,l.tagName){case"AUDIO":case"VIDEO":var p=e,y=l;void 0!==y.paused&&(y.paused?p.pause():p.play()),void 0!==y.muted&&(p.muted=y.muted),void 0!==y.volume&&(p.volume=y.volume),void 0!==y.currentTime&&(p.currentTime=y.currentTime),void 0!==y.playbackRate&&(p.playbackRate=y.playbackRate);break;case"CANVAS":p=t;if(null!==p.rr_dataURL){const T=document.createElement("img");T.onload=()=>{var t=w.getContext("2d");t&&t.drawImage(T,0,0,T.width,T.height)},T.src=p.rr_dataURL}p.canvasMutations.forEach(t=>i.applyCanvas(t.event,t.mutation,e));break;case"STYLE":{const _=w.sheet;_&&t.rules.forEach(t=>i.applyStyleSheetMutation(t,_))}}if(l.shadowRoot){w.shadowRoot||w.attachShadow({mode:"open"});const r=w.shadowRoot.childNodes,s=l.shadowRoot.childNodes;(0<r.length||0<s.length)&&tn(Array.from(r),s,w.shadowRoot,i,n)}break}case k.Text:case k.Comment:case k.CDATA:e.textContent!==t.data&&(e.textContent=t.data)}var I,C,b;a&&i.applyScroll(a,!0),o&&i.applyInput(o),"IFRAME"===t.nodeName&&(C=t,I=e.contentDocument)&&((b=n.getMeta(C.contentDocument))&&i.mirror.add(I,Object.assign({},b)),O(I,C.contentDocument,i,n))}function tn(e,t,i,n,r){let s=0,o=e.length-1,a=0,u=t.length-1,l=e[s],c=e[o],h=t[a],d=t[u],f=void 0,v;for(;s<=o&&a<=u;){var g=n.mirror.getId(l),m=n.mirror.getId(c),p=r.getId(h),y=r.getId(d);if(void 0===l)l=e[++s];else if(void 0===c)c=e[--o];else if(-1!==g&&g===p)O(l,h,n,r),l=e[++s],h=t[++a];else if(-1!==m&&m===y)O(c,d,n,r),c=e[--o],d=t[--u];else if(-1!==g&&g===y)i.insertBefore(l,c.nextSibling),O(l,d,n,r),l=e[++s],d=t[--u];else{if(-1!==m&&m===p)i.insertBefore(c,l),O(c,h,n,r),c=e[--o];else{if(!f){f={};for(let t=s;t<=o;t++){var I=e[t];I&&n.mirror.hasNode(I)&&(f[n.mirror.getId(I)]=t)}}(v=f[r.getId(h)])?(g=e[v],i.insertBefore(g,l),O(g,h,n,r),e[v]=void 0):(y=en(h,n.mirror,r),"#document"===i.nodeName&&(null==(m=n.mirror.getMeta(y))?void 0:m.type)===k.Element&&i.documentElement&&(i.removeChild(i.documentElement),e[s]=void 0,l=void 0),i.insertBefore(y,l||null),O(y,h,n,r))}h=t[++a]}}if(s>o){const w=t[u+1];let e=null;for(w&&i.childNodes.forEach(t=>{n.mirror.getId(t)===r.getId(w)&&(e=t)});a<=u;++a){var C=en(t[a],n.mirror,r);i.insertBefore(C,e),O(C,t[a],n,r)}}else if(a>u)for(;s<=o;s++){var b=e[s];b&&(i.removeChild(b),n.mirror.removeNodeFromMap(b))}}function en(t,e,i){var n=i.getId(t),r=i.getMeta(t);let s=null;if(null===(s=-1<n?e.getNode(n):s)){switch(t.RRNodeType){case k.Document:s=new Document;break;case k.DocumentType:s=document.implementation.createDocumentType(t.name,t.publicId,t.systemId);break;case k.Element:var o=t.tagName.toLowerCase(),o=$i[o]||o;s=r&&"isSVG"in r&&null!=r&&r.isSVG?document.createElementNS(qi.svg,o):document.createElement(t.tagName);break;case k.Text:s=document.createTextNode(t.data);break;case k.Comment:s=document.createComment(t.data);break;case k.CDATA:s=document.createCDATASection(t.data)}r&&e.add(s,Object.assign({},r))}return s}class nn extends(t=a,class Kn extends t{constructor(){super(...arguments),this.nodeType=h.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=k.Document,this.textContent=null}get documentElement(){return this.childNodes.find(t=>t.RRNodeType===k.Element&&"HTML"===t.tagName)||null}get body(){var t;return(null==(t=this.documentElement)?void 0:t.childNodes.find(t=>t.RRNodeType===k.Element&&"BODY"===t.tagName))||null}get head(){var t;return(null==(t=this.documentElement)?void 0:t.childNodes.find(t=>t.RRNodeType===k.Element&&"HEAD"===t.tagName))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(t){const e=t.RRNodeType;if(e!==k.Element&&e!==k.DocumentType||!this.childNodes.some(t=>t.RRNodeType===e))return t.parentElement=null,(t.parentNode=this).childNodes.push(t),t;throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${e===k.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`)}insertBefore(t,e){const i=t.RRNodeType;if((i===k.Element||i===k.DocumentType)&&this.childNodes.some(t=>t.RRNodeType===i))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${i===k.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);if(null===e)return this.appendChild(t);e=this.childNodes.indexOf(e);if(-1==e)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(e,0,t),t.parentElement=null,t.parentNode=this,t}removeChild(t){var e=this.childNodes.indexOf(t);if(-1===e)throw new Error("Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(e,1),t.parentElement=null,t.parentNode=null,t}open(){this.childNodes=[]}close(){}write(t){let e;'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'===t?e="-//W3C//DTD XHTML 1.0 Transitional//EN":'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'===t&&(e="-//W3C//DTD HTML 4.0 Transitional//EN"),e&&(t=this.createDocumentType("html",e,""),this.open(),this.appendChild(t))}createDocument(t,e,i){return new Kn}createDocumentType(t,e,i){t=new(Yi(a))(t,e,i);return t.ownerDocument=this,t}createElement(t){t=new(Ji(a))(t);return t.ownerDocument=this,t}createElementNS(t,e){return this.createElement(e)}createTextNode(t){t=new(Qi(a))(t);return t.ownerDocument=this,t}createComment(t){t=new(zi(a))(t);return t.ownerDocument=this,t}createCDATASection(t){t=new(Hi(a))(t);return t.ownerDocument=this,t}toString(){return"RRDocument"}}){constructor(t){super(),this.UNSERIALIZED_STARTING_ID=-2,this.ce=this.UNSERIALIZED_STARTING_ID,this.mirror=new gn,this.scrollData=null,t&&(this.mirror=t)}get unserializedId(){return this.ce--}createDocument(t,e,i){return new nn}createDocumentType(t,e,i){t=new rn(t,e,i);return t.ownerDocument=this,t}createElement(t){var e=t.toUpperCase();let i;switch(e){case"AUDIO":case"VIDEO":i=new on(e);break;case"IFRAME":i=new ln(e,this.mirror);break;case"CANVAS":i=new an(e);break;case"STYLE":i=new un(e);break;default:i=new sn(e)}return i.ownerDocument=this,i}createComment(t){t=new hn(t);return t.ownerDocument=this,t}createCDATASection(t){t=new dn(t);return t.ownerDocument=this,t}createTextNode(t){t=new cn(t);return t.ownerDocument=this,t}destroyTree(){this.childNodes=[],this.mirror.reset()}open(){super.open(),this.ce=this.UNSERIALIZED_STARTING_ID}}const rn=Yi(a);class sn extends Ji(a){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class on extends(e=sn,class extends e{attachShadow(t){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}){}class an extends sn{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class un extends sn{constructor(){super(...arguments),this.rules=[]}}class ln extends sn{constructor(t,e){super(t),this.contentDocument=new nn,this.contentDocument.mirror=e}}const cn=Qi(a),hn=zi(a),dn=Hi(a);function fn(t,e,i,n){let r;switch(t.nodeType){case h.DOCUMENT_NODE:n&&"IFRAME"===n.nodeName?r=n.contentDocument:(r=e).compatMode=t.compatMode;break;case h.DOCUMENT_TYPE_NODE:r=e.createDocumentType(t.name,t.publicId,t.systemId);break;case h.ELEMENT_NODE:var s,o,a=t,u=(u=a)instanceof HTMLFormElement?"FORM":u.tagName.toUpperCase(),l=r=e.createElement(u);for({name:s,value:o}of Array.from(a.attributes))l.attributes[s]=o;a.scrollLeft&&(l.scrollLeft=a.scrollLeft),a.scrollTop&&(l.scrollTop=a.scrollTop);break;case h.TEXT_NODE:r=e.createTextNode(t.textContent||"");break;case h.CDATA_SECTION_NODE:r=e.createCDATASection(t.data);break;case h.COMMENT_NODE:r=e.createComment(t.textContent||"");break;case h.DOCUMENT_FRAGMENT_NODE:r=n.attachShadow({mode:"open"});break;default:return null}var u;let c=i.getMeta(t);return e instanceof nn&&(c||(c=mn(r,e.unserializedId),i.add(t,c)),e.mirror.add(r,Object.assign({},c))),r}function vn(t,r=new Bi,s=new nn){!function e(t,i){const n=fn(t,s,r,i);null!==n&&("IFRAME"!==(null==i?void 0:i.nodeName)&&t.nodeType!==h.DOCUMENT_FRAGMENT_NODE&&(null!=i&&i.appendChild(n),n.parentNode=i,n.parentElement=i),"IFRAME"===t.nodeName?(i=t.contentDocument)&&e(i,n):t.nodeType!==h.DOCUMENT_NODE&&t.nodeType!==h.ELEMENT_NODE&&t.nodeType!==h.DOCUMENT_FRAGMENT_NODE||(t.nodeType===h.ELEMENT_NODE&&t.shadowRoot&&e(t.shadowRoot,n),t.childNodes.forEach(t=>e(t,n))))}(t,null)}class gn{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){return t&&null!=(t=null==(t=this.getMeta(t))?void 0:t.id)?t:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){var e=this.getId(t);this.idNodeMap.delete(e),t.childNodes&&t.childNodes.forEach(t=>this.removeNodeFromMap(t))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,e){var i=e.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,e)}replace(t,e){var i=this.getNode(t);i&&(i=this.nodeMetaMap.get(i))&&this.nodeMetaMap.set(e,i),this.idNodeMap.set(t,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function mn(t,e){switch(t.RRNodeType){case k.Document:return{id:e,type:t.RRNodeType,childNodes:[]};case k.DocumentType:return{id:e,type:t.RRNodeType,name:t.name,publicId:t.publicId,systemId:t.systemId};case k.Element:return{id:e,type:t.RRNodeType,tagName:t.tagName.toLowerCase(),attributes:{},childNodes:[]};case k.Text:case k.Comment:return{id:e,type:t.RRNodeType,textContent:t.textContent||""};case k.CDATA:return{id:e,type:t.RRNodeType,textContent:""}}}function pn(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(e,i){var t=n.get(e);t&&t.slice().map(function(t){t(i)}),(t=n.get("*"))&&t.slice().map(function(t){t(e,i)})}}}function yn(u=window,l=document){if(!("scrollBehavior"in l.documentElement.style&&!0!==u.__forceSmoothScrollPolyfill__)){var t,e=u.HTMLElement||u.Element;const d=468,f={scroll:u.scroll||u.scrollTo,scrollBy:u.scrollBy,elementScroll:e.prototype.scroll||c,scrollIntoView:e.prototype.scrollIntoView},v=u.performance&&u.performance.now?u.performance.now.bind(u.performance):Date.now,i=(t=u.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(t)?1:0);function c(t,e){this.scrollLeft=t,this.scrollTop=e}function n(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function r(t,e){return"Y"===e?t.clientHeight+i<t.scrollHeight:"X"===e?t.clientWidth+i<t.scrollWidth:void 0}function s(t,e){t=u.getComputedStyle(t,null)["overflow"+e];return"auto"===t||"scroll"===t}function o(t){for(;t!==l.body&&!1===(i=void 0,i=r(e=t,"Y")&&s(e,"Y"),e=r(e,"X")&&s(e,"X"),i||e);)t=t.parentNode||t.host;var e,i;return t}function h(t){var e=v(),e=1<(e=(e-t.startTime)/d)?1:e,e=.5*(1-Math.cos(Math.PI*e)),i=t.startX+(t.x-t.startX)*e,e=t.startY+(t.y-t.startY)*e;t.method.call(t.scrollable,i,e),i===t.x&&e===t.y||u.requestAnimationFrame(h.bind(u,t))}function a(t,e,i){let n,r,s,o;var a=v();o=t===l.body?(n=u,r=u.scrollX||u.pageXOffset,s=u.scrollY||u.pageYOffset,f.scroll):(n=t,r=t.scrollLeft,s=t.scrollTop,c),h({scrollable:n,method:o,startTime:a,startX:r,startY:s,x:e,y:i})}u.scroll=u.scrollTo=function(){void 0!==arguments[0]&&(!0===n(arguments[0])?f.scroll.call(u,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:u.scrollX||u.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:u.scrollY||u.pageYOffset):a.call(u,l.body,void 0!==arguments[0].left?~~arguments[0].left:u.scrollX||u.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:u.scrollY||u.pageYOffset))},u.scrollBy=function(){void 0!==arguments[0]&&(n(arguments[0])?f.scrollBy.call(u,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):a.call(u,l.body,~~arguments[0].left+(u.scrollX||u.pageXOffset),~~arguments[0].top+(u.scrollY||u.pageYOffset)))},e.prototype.scroll=e.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0===n(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");f.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}else{var t=arguments[0].left,e=arguments[0].top;a.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}},e.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0===n(arguments[0])?f.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop):this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}))},e.prototype.scrollIntoView=function(){var t,e,i;!0===n(arguments[0])?f.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]):(e=(t=o(this)).getBoundingClientRect(),i=this.getBoundingClientRect(),t!==l.body?(a.call(this,t,t.scrollLeft+i.left-e.left,t.scrollTop+i.top-e.top),"fixed"!==u.getComputedStyle(t).position&&u.scrollBy({left:e.left,top:e.top,behavior:"smooth"})):u.scrollBy({left:i.left,top:i.top,behavior:"smooth"}))}}}class In{constructor(t=[],e){this.timeOffset=0,this.raf=null,this.actions=t,this.speed=e.speed,this.liveMode=e.liveMode}addAction(t){var e;!this.actions.length||this.actions[this.actions.length-1].delay<=t.delay?this.actions.push(t):(e=this.findActionIndex(t),this.actions.splice(e,0,t))}start(){this.timeOffset=0;let i=performance.now();const n=()=>{var t=performance.now();for(this.timeOffset+=(t-i)*this.speed,i=t;this.actions.length;){var e=this.actions[0];if(!(this.timeOffset>=e.delay))break;this.actions.shift(),e.doAction()}(0<this.actions.length||this.liveMode)&&(this.raf=requestAnimationFrame(n))};this.raf=requestAnimationFrame(n)}clear(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(t){this.speed=t}toggleLiveMode(t){this.liveMode=t}isActive(){return null!==this.raf}findActionIndex(t){let e=0,i=this.actions.length-1;for(;e<=i;){var n=Math.floor((e+i)/2);if(this.actions[n].delay<t.delay)e=n+1;else{if(!(this.actions[n].delay>t.delay))return n+1;i=n-1}}return e}}function Cn(t,e){var i;t.type===J.IncrementalSnapshot&&t.data.source===Q.MouseMove&&t.data.positions&&t.data.positions.length?(i=t.data.positions[0].timeOffset,i=t.timestamp+i,t.delay=i-e):(t.delay=t.timestamp-e,t.delay)}function bn(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,s=i.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(n=s.next()).done;)o.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o}(s=Li=Li||{})[s.NotStarted=0]="NotStarted",s[s.Running=1]="Running",s[s.Stopped=2]="Stopped";var wn={type:"xstate.init"};function An(t){return void 0===t?[]:[].concat(t)}function Sn(t){return{type:"xstate.assign",assignment:t}}function Tn(t,e){return"string"==typeof(t="string"==typeof t&&e&&e[t]?e[t]:t)?{type:t}:"function"==typeof t?{type:t.name,exec:t}:t}function _n(e){return function(t){return e===t}}function kn(t){return"string"==typeof t?{type:t}:t}function On(t,e){return{value:t,context:e,actions:[],changed:!1,matches:_n(t)}}function En(t,e,n){var r=e,s=!1;return[t.filter(function(e){var i;return"xstate.assign"!==e.type||(s=!0,i=Object.assign({},r),"function"==typeof e.assignment?i=e.assignment(r,n):Object.keys(e.assignment).forEach(function(t){i[t]="function"==typeof e.assignment[t]?e.assignment[t](r,n):e.assignment[t]}),r=i,!1)}),r,s]}function Nn(T,e){void 0===e&&(e={});var t=bn(En(An(T.states[T.initial].entry).map(function(t){return Tn(t,e.actions)}),T.context,wn),2),i=t[0],t=t[1],_={config:T,P:e,initialState:{value:T.initial,actions:i,context:t,matches:_n(T.initial)},transition:function(t,e){var i,n,t="string"==typeof t?{value:t,context:T.context}:t,r=t.value,s=t.context,o=kn(e),a=T.states[r];if(a.on){t=An(a.on[o.type]);try{for(var u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),l=u.next();!l.done;l=u.next()){var c=l.value;if(void 0===c)return On(r,s);var h,d,f,v,g,m="string"==typeof c?{target:c}:c,p=m.target,y=m.actions,I=void 0===y?[]:y,C=m.cond,b=void 0===C?function(){return!0}:C,w=void 0===p,A=null!=p?p:r,S=T.states[A];if(b(s,o))return d=(h=bn(En((w?An(I):[].concat(a.exit,I,S.entry).filter(function(t){return t})).map(function(t){return Tn(t,_.P.actions)}),s,o),3))[0],f=h[1],v=h[2],{value:g=null!=p?p:r,context:f,actions:d,changed:p!==r||0<d.length||v,matches:_n(g)}}}catch(t){i={error:t}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(i)throw i.error}}}return On(r,s)}};return _}var xn=function(e,i){return e.actions.forEach(function(t){t=t.exec;return t&&t(e.context,i)})};function Rn(e){var i=e.initialState,n=Li.NotStarted,r=new Set,s={he:e,send:function(t){n===Li.Running&&(i=e.transition(i,t),xn(i,kn(t)),r.forEach(function(t){return t(i)}))},subscribe:function(t){return r.add(t),t(i),{unsubscribe:function(){return r.delete(t)}}},start:function(t){return t&&(t="object"==typeof t?t:{context:e.config.context,value:t},i={value:t.value,actions:[],context:t.context,matches:_n(t.value)}),n=Li.Running,xn(i,wn),s},stop:function(){return n=Li.Stopped,r.clear(),s},get state(){return i},get status(){return n}};return s}function Mn(t,{getCastFn:c,applyEventsSynchronously:h,emitter:d}){return Rn(Nn({id:"player",context:t,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Sn({lastPlayedEvent:(t,e)=>"CAST_EVENT"===e.type?e.payload.event:t.lastPlayedEvent}),recordTimeOffset:Sn((t,e)=>{let i=t.timeOffset;return"payload"in e&&"timeOffset"in e.payload&&(i=e.payload.timeOffset),Object.assign(Object.assign({},t),{timeOffset:i,baselineTime:t.events[0].timestamp+i})}),play(t){var e,{timer:i,events:t,baselineTime:n,lastPlayedEvent:r}=t;i.clear();for(const a of t)Cn(a,n);t=function(e,i){for(let t=e.length-1;0<=t;t--){var n=e[t];if(n.type===J.Meta&&n.timestamp<=i)return e.slice(t)}return e}(t,n);let s=null==r?void 0:r.timestamp;n<((s=(null==r?void 0:r.type)===J.IncrementalSnapshot&&r.data.source===Q.MouseMove?r.timestamp+(null==(e=r.data.positions[0])?void 0:e.timeOffset):s)||0)&&d.emit(v.PlayBack);var o=new Array;for(const u of t)if(!(s&&s<n&&(u.timestamp<=s||u===r)))if(u.timestamp<n)o.push(u);else{const l=c(u,!1);i.addAction({doAction:()=>{l()},delay:u.delay})}h(o),d.emit(v.Flush),i.start()},pause(t){t.timer.clear()},resetLastPlayedEvent:Sn(t=>Object.assign(Object.assign({},t),{lastPlayedEvent:null})),startLive:Sn({baselineTime:(t,e)=>(t.timer.toggleLiveMode(!0),t.timer.start(),"TO_LIVE"===e.type&&e.payload.baselineTime?e.payload.baselineTime:Date.now())}),addEvent:Sn((t,e)=>{var{baselineTime:n,timer:r,events:s}=t;if("ADD_EVENT"===e.type){var o=e.payload["event"];Cn(o,n);let i=s.length-1;if(!s[i]||s[i].timestamp<=o.timestamp)s.push(o);else{let t=-1,e=0;for(;e<=i;){var a=Math.floor((e+i)/2);s[a].timestamp<=o.timestamp?e=a+1:i=a-1}-1===t&&(t=e),s.splice(t,0,o)}e=o.timestamp<n;const u=c(o,e);e?u():r.isActive()&&r.addAction({doAction:()=>{u()},delay:o.delay})}return Object.assign(Object.assign({},t),{events:s})})}}))}const jn=new Map;function Dn(t,e){let i=jn.get(t);return i||(i=new Map,jn.set(t,i)),i.has(e)||i.set(e,[]),i.get(e)}function d(n,r,s){return i=>g(this,void 0,void 0,function*(){if(i&&"object"==typeof i&&"rr_type"in i){var t,e;if(s&&(s.isUnchanged=!1),"ImageBitmap"===i.rr_type&&"args"in i)return t=yield d(n,r,s)(i.args),yield createImageBitmap.apply(null,t);if("index"in i)return s||null===r?i:({rr_type:t,index:e}=i,Dn(r,t)[e]);if("args"in i)return{rr_type:t,args:e}=i,new window[t](...yield Promise.all(e.map(d(n,r,s))));if("base64"in i)return me(i.base64);if("src"in i)return n.get(i.src)||((t=new Image).src=i.src,n.set(i.src,t),t);if("data"in i&&"Blob"===i.rr_type)return e=yield Promise.all(i.data.map(d(n,r,s))),new Blob(e,{type:i.type})}else if(Array.isArray(i))return yield Promise.all(i.map(d(n,r,s)));return i})}const Fn=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function Gn({mutation:a,target:u,type:l,imageMap:c,errorHandler:h}){return g(this,void 0,void 0,function*(){try{var t,e,i,n=function(t,e){try{return e===f.WebGL?t.getContext("webgl")||t.getContext("experimental-webgl"):t.getContext("webgl2")}catch(t){return null}}(u,l);n&&(a.setter?n[a.property]=a.args[0]:(t=n[a.property],e=yield Promise.all(a.args.map(d(c,n))),i=t.apply(n,e),r=n,null!=(s=i)&&s.constructor&&(o=s.constructor.name,Fn.includes(o))&&!(r=Dn(r,o)).includes(s)&&r.push(s),0))}catch(t){h(a,t)}var r,s,o})}function Ln({event:n,mutation:r,target:s,imageMap:o,canvasEventMap:a,errorHandler:u}){return g(this,void 0,void 0,function*(){try{var t=a.get(n)||r,e="commands"in t?t.commands:[t];if([f.WebGL,f.WebGL2].includes(r.type))for(let t=0;t<e.length;t++)yield Gn({mutation:e[t],type:r.type,target:s,imageMap:o,errorHandler:u});else for(let t=0;t<e.length;t++){var i=e[t];yield function({event:n,mutation:r,target:s,imageMap:o,errorHandler:a}){return g(this,void 0,void 0,function*(){try{var t,e,i=s.getContext("2d");r.setter?i[r.property]=r.args[0]:(t=i[r.property],"drawImage"===r.property&&"string"==typeof r.args[0]?(o.get(n),t.apply(i,r.args)):(e=yield Promise.all(r.args.map(d(o,i))),t.apply(i,e)))}catch(t){a(r,t)}})}({event:n,mutation:i,target:s,imageMap:o,errorHandler:u})}}catch(t){u(r,t)}})}const Bn=pn,Vn="[replayer]",Wn={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function Un(t){return t.type==J.IncrementalSnapshot&&(t.data.source==Q.TouchMove||t.data.source==Q.MouseInteraction&&t.data.type==l.TouchStart)}class Zn{constructor(t,e){if(this.usingVirtualDom=!1,this.virtualDom=new nn,this.mouseTail=null,this.tailPositions=[],this.emitter=Bn(),this.legacy_missingNodeRetryMap={},this.cache=yt(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=p(),this.styleMirror=new Ut,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=t=>{this.iframe.style.display="inherit";for(const e of[this.mouseTail,this.iframe])e&&(e.setAttribute("width",String(t.width)),e.setAttribute("height",String(t.height)))},this.applyEventsSynchronously=t=>{for(const e of t){switch(e.type){case J.DomContentLoaded:case J.Load:case J.Custom:continue;case J.FullSnapshot:case J.Meta:case J.Plugin:case J.IncrementalSnapshot:}this.getCastFn(e,!0)()}!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null},this.getCastFn=(n,r=!1)=>{let s;switch(n.type){case J.DomContentLoaded:case J.Load:break;case J.Custom:s=()=>{this.emitter.emit(v.CustomEvent,n)};break;case J.Meta:s=()=>this.emitter.emit(v.Resize,{width:n.data.width,height:n.data.height});break;case J.FullSnapshot:s=()=>{var t;if(this.firstFullSnapshot){if(this.firstFullSnapshot===n)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(n,r),null!=(t=this.iframe.contentWindow)&&t.scrollTo(n.data.initialOffset),this.styleMirror.reset()};break;case J.IncrementalSnapshot:s=()=>{if(this.applyIncremental(n,r),!r&&(n===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive)&&!this.nextUserInteractionEvent){for(const e of this.service.state.context.events)if(!(e.timestamp<=n.timestamp)&&this.isUserInteraction(e)){e.delay-n.delay>1e4*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=e);break}var t;this.nextUserInteractionEvent&&(t=this.nextUserInteractionEvent.delay-n.delay,t={speed:Math.min(Math.round(t/5e3),this.config.maxSpeed)},this.speedService.send({type:"FAST_FORWARD",payload:t}),this.emitter.emit(v.SkipStart,t))}}}return()=>{s&&s();for(const e of this.config.plugins||[])e.handler&&e.handler(n,r,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:n}});const t=this.service.state.context.events.length-1;if(n===this.service.state.context.events[t]){const i=()=>{t<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(v.Finish))};n.type===J.IncrementalSnapshot&&n.data.source===Q.MouseMove&&n.data.positions.length?setTimeout(()=>{i()},Math.max(0,50-n.data.positions[0].timeOffset)):i()}this.emitter.emit(v.EventCast,n)}},(null==e||!e.liveMode)&&t.length<2)throw new Error("Replayer need at least 2 events.");var i={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:Wn,useVirtualDom:!0};this.config=Object.assign({},i,e),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(v.Resize,this.handleResize),this.setupDom();for(const r of this.config.plugins||[])r.getMirror&&r.getMirror({nodeMirror:this.mirror});this.emitter.on(v.Flush,()=>{if(this.usingVirtualDom){var t={mirror:this.mirror,applyCanvas:(t,e,i)=>{Ln({event:t,mutation:e,target:i,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(t,e)=>{t.source===Q.StyleSheetRule?this.applyStyleSheetRule(t,e):t.source===Q.StyleDeclaration&&this.applyStyleDeclaration(t,e)}};if(this.iframe.contentDocument&&O(this.iframe.contentDocument,this.virtualDom,t,this.virtualDom.mirror),this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const n in this.legacy_missingNodeRetryMap)try{var e=this.legacy_missingNodeRetryMap[n],i=en(e.node,this.mirror,this.virtualDom.mirror);O(i,e.node,t,this.virtualDom.mirror),e.node=i}catch(t){this.config.showWarning&&console.warn(t)}this.constructedStyleMutations.forEach(t=>{this.applyStyleSheetMutation(t)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(t=>{this.applyAdoptedStyleSheet(t)}),this.adoptedStyleSheets=[]}this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(v.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset()});i=new In([],{speed:this.config.speed,liveMode:this.config.liveMode}),this.service=Mn({events:t.map(t=>e&&e.unpackFn?e.unpackFn(t):t).sort((t,e)=>t.timestamp-e.timestamp),timer:i,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(t=>{this.emitter.emit(v.StateChange,{player:t})}),this.speedService=Rn(Nn({id:"speed",context:{normalSpeed:-1,timer:i},initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(t,e)=>{"payload"in e&&t.timer.setSpeed(e.payload.speed)},recordSpeed:Sn({normalSpeed:t=>t.timer.speed}),restoreSpeed:t=>{t.timer.setSpeed(t.normalSpeed)}}})),this.speedService.start(),this.speedService.subscribe(t=>{this.emitter.emit(v.StateChange,{speed:t})}),t=this.service.state.context.events.find(t=>t.type===J.Meta);const n=this.service.state.context.events.find(t=>t.type===J.FullSnapshot);if(t){const{width:s,height:o}=t.data;setTimeout(()=>{this.emitter.emit(v.Resize,{width:s,height:o})},0)}n&&setTimeout(()=>{var t;this.firstFullSnapshot||(this.firstFullSnapshot=n,this.rebuildFullSnapshot(n),null!=(t=this.iframe.contentWindow)&&t.scrollTo(n.data.initialOffset))},1),this.service.state.context.events.find(Un)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(t,e){return this.emitter.on(t,e),this}off(t,e){return this.emitter.off(t,e),this}setConfig(e){Object.keys(e).forEach(t=>{e[t],this.config[t]=e[t]}),this.config.skipInactive||this.backToNormal(),void 0!==e.speed&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),void 0!==e.mouseTail&&(!1===e.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){var t=this.service.state.context.events[0],e=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:t.timestamp,endTime:e.timestamp,totalTime:e.timestamp-t.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){var{baselineTime:t,events:e}=this.service.state.context;return t-e[0].timestamp}getMirror(){return this.mirror}play(t=0){this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:t}}),null!=(t=null==(t=this.iframe.contentDocument)?void 0:t.getElementsByTagName("html")[0])&&t.classList.remove("rrweb-paused"),this.emitter.emit(v.Start)}pause(t){void 0===t&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof t&&(this.play(t),this.service.send({type:"PAUSE"})),null!=(t=null==(t=this.iframe.contentDocument)?void 0:t.getElementsByTagName("html")[0])&&t.classList.add("rrweb-paused"),this.emitter.emit(v.Pause)}resume(t=0){console.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(t),this.emitter.emit(v.Resume)}destroy(){this.pause(),this.config.root.removeChild(this.wrapper),this.emitter.emit(v.Destroy)}startLive(t){this.service.send({type:"TO_LIVE",payload:{baselineTime:t}})}addEvent(t){const e=this.config.unpackFn?this.config.unpackFn(t):t;Un(e)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:e}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=yt()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");var t=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&t.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",t.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(yn(this.iframe.contentWindow,this.iframe.contentDocument),Mt(this.iframe.contentWindow))}rebuildFullSnapshot(t,e=!1){if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const n=[];var i=(t,e)=>{this.collectIframeAndAttachDocument(n,t);for(const i of this.config.plugins||[])i.onBuild&&i.onBuild(t,{id:e,replayer:this})};wt(t.data.node,{doc:this.iframe.contentDocument,afterAppend:i,cache:this.cache,mirror:this.mirror}),i(this.iframe.contentDocument,t.data.node.id);for(const{mutationInQueue:s,builtNode:o}of n)this.attachDocumentToIframe(s,o),this.newDocumentQueue=this.newDocumentQueue.filter(t=>t!==s);var{documentElement:i,head:r}=this.iframe.contentDocument;this.insertStyleRules(i,r),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(v.FullsnapshotRebuilded,t),e||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(t,e){var i,n=[`.${this.config.blockClass} { background: currentColor }`,"noscript { display: none !important; }"].concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&n.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){var r=this.virtualDom.createElement("style");this.virtualDom.mirror.add(r,mn(r,this.virtualDom.unserializedId)),t.insertBefore(r,e),r.rules.push({source:Q.StyleSheetRule,adds:n.map((t,e)=>({rule:t,index:e}))})}else{var s=document.createElement("style");t.insertBefore(s,e);for(let t=0;t<n.length;t++)null!=(i=s.sheet)&&i.insertRule(n[t],t)}}attachDocumentToIframe(t,s){const o=(this.usingVirtualDom?this.virtualDom:this).mirror,a=[];var e=(t,e)=>{this.collectIframeAndAttachDocument(a,t);var i,n=o.getMeta(t);(null==n?void 0:n.type)===W.Element&&"HTML"===(null==n?void 0:n.tagName.toUpperCase())&&({documentElement:n,head:i}=s.contentDocument,this.insertStyleRules(n,i));for(const r of this.config.plugins||[])r.onBuild&&r.onBuild(t,{id:e,replayer:this})};Ct(t.node,{doc:s.contentDocument,mirror:o,hackCss:!0,skipChild:!1,afterAppend:e,cache:this.cache}),e(s.contentDocument,t.node.id);for(const{mutationInQueue:i,builtNode:n}of a)this.attachDocumentToIframe(i,n),this.newDocumentQueue=this.newDocumentQueue.filter(t=>t!==i)}collectIframeAndAttachDocument(t,e){var i;Ft(e,this.mirror)&&(i=this.newDocumentQueue.find(t=>t.parentId===this.mirror.getId(e)))&&t.push({mutationInQueue:i,builtNode:e})}waitForStylesheetLoad(){var t=null==(t=this.iframe.contentDocument)?void 0:t.head;if(t){const n=new Set;let e,i=this.service.state;const r=()=>{i=this.service.state},s=(this.emitter.on(v.Start,r),this.emitter.on(v.Pause,r),()=>{this.emitter.off(v.Start,r),this.emitter.off(v.Pause,r)});t.querySelectorAll('link[rel="stylesheet"]').forEach(t=>{t.sheet||(n.add(t),t.addEventListener("load",()=>{n.delete(t),0===n.size&&-1!==e&&(i.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(v.LoadStylesheetEnd),e&&clearTimeout(e),s())}))}),0<n.size&&(this.service.send({type:"PAUSE"}),this.emitter.emit(v.LoadStylesheetStart),e=setTimeout(()=>{i.matches("playing")&&this.play(this.getCurrentTime()),e=-1,s()},this.config.loadTimeout))}}preloadAllImages(){return g(this,void 0,void 0,function*(){this.service.state;var t=()=>{this.service.state},e=(this.emitter.on(v.Start,t),this.emitter.on(v.Pause,t),[]);for(const i of this.service.state.context.events)i.type===J.IncrementalSnapshot&&i.data.source===Q.CanvasMutation&&(e.push(this.deserializeAndPreloadCanvasEvents(i.data,i)),("commands"in i.data?i.data.commands:[i.data]).forEach(t=>{this.preloadImages(t,i)}));return Promise.all(e)})}preloadImages(t,e){var i;"drawImage"!==t.property||"string"!=typeof t.args[0]||this.imageMap.has(e)||(null!=(e=null==(i=(e=document.createElement("canvas")).getContext("2d"))?void 0:i.createImageData(e.width,e.height))&&e.data,JSON.parse(t.args[0]),null!=i&&i.putImageData(e,0,0))}deserializeAndPreloadCanvasEvents(e,n){return g(this,void 0,void 0,function*(){if(!this.canvasEventMap.has(n)){const i={isUnchanged:!0};var t;"commands"in e?(t=yield Promise.all(e.commands.map(e=>g(this,void 0,void 0,function*(){var t=yield Promise.all(e.args.map(d(this.imageMap,null,i)));return Object.assign(Object.assign({},e),{args:t})}))),!1===i.isUnchanged&&this.canvasEventMap.set(n,Object.assign(Object.assign({},e),{commands:t}))):(t=yield Promise.all(e.args.map(d(this.imageMap,null,i))),!1===i.isUnchanged&&this.canvasEventMap.set(n,Object.assign(Object.assign({},e),{args:t})))}})}applyIncremental(i,n){var t;const r=i["data"];switch(r.source){case Q.Mutation:try{this.applyMutation(r,n)}catch(t){this.warn("Exception in mutation "+(t.message||t),r)}break;case Q.Drag:case Q.TouchMove:case Q.MouseMove:n?(a=r.positions[r.positions.length-1],this.mousePos={x:a.x,y:a.y,id:a.id,debugData:r}):(r.positions.forEach(t=>{var e={doAction:()=>{this.moveAndHover(t.x,t.y,t.id,n,r)},delay:t.timeOffset+i.timestamp-this.service.state.context.baselineTime};this.timer.addAction(e)}),this.timer.addAction({doAction(){},delay:i.delay-(null==(a=r.positions[0])?void 0:a.timeOffset)}));break;case Q.MouseInteraction:if(-1!==r.id&&!n){var e=new Event(l[r.type].toLowerCase()),s=this.mirror.getNode(r.id);if(!s)return this.debugNodeNotFound(r,r.id);this.emitter.emit(v.MouseInteraction,{type:r.type,target:s});var o=this.config["triggerFocus"];switch(r.type){case l.Blur:"blur"in s&&s.blur();break;case l.Focus:o&&s.focus&&s.focus({preventScroll:!0});break;case l.Click:case l.TouchStart:case l.TouchEnd:n?(r.type===l.TouchStart?this.touchActive=!0:r.type===l.TouchEnd&&(this.touchActive=!1),this.mousePos={x:r.x,y:r.y,id:r.id,debugData:r}):(r.type===l.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(r.x,r.y,r.id,n,r),r.type===l.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):r.type===l.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):r.type===l.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case l.TouchCancel:n?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:s.dispatchEvent(e)}}break;case Q.Scroll:if(-1!==r.id)if(this.usingVirtualDom){var a=this.virtualDom.mirror.getNode(r.id);if(!a)return this.debugNodeNotFound(r,r.id);a.scrollData=r}else this.applyScroll(r,n);break;case Q.ViewportResize:this.emitter.emit(v.Resize,{width:r.width,height:r.height});break;case Q.Input:if(-1!==r.id)if(this.usingVirtualDom){var a=this.virtualDom.mirror.getNode(r.id);if(!a)return this.debugNodeNotFound(r,r.id);a.inputData=r}else this.applyInput(r);break;case Q.MediaInteraction:a=(this.usingVirtualDom?this.virtualDom:this).mirror.getNode(r.id);if(!a)return this.debugNodeNotFound(r,r.id);try{r.currentTime&&(a.currentTime=r.currentTime),r.volume&&(a.volume=r.volume),r.muted&&(a.muted=r.muted),1===r.type&&a.pause(),0===r.type&&a.play(),4===r.type&&(a.playbackRate=r.playbackRate)}catch(t){this.config.showWarning&&console.warn("Failed to replay media interactions: "+(t.message||t))}break;case Q.StyleSheetRule:case Q.StyleDeclaration:this.usingVirtualDom?r.styleId?this.constructedStyleMutations.push(r):r.id&&null!=(a=this.virtualDom.mirror.getNode(r.id))&&a.rules.push(r):this.applyStyleSheetMutation(r);break;case Q.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){a=this.virtualDom.mirror.getNode(r.id);if(!a)return this.debugNodeNotFound(r,r.id);a.canvasMutations.push({event:i,mutation:r})}else{a=this.mirror.getNode(r.id);if(!a)return this.debugNodeNotFound(r,r.id);Ln({event:i,mutation:r,target:a,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case Q.Font:try{var u=new FontFace(r.family,r.buffer?new Uint8Array(JSON.parse(r.fontSource)):r.fontSource,r.descriptors);null!=(t=this.iframe.contentDocument)&&t.fonts.add(u)}catch(t){this.config.showWarning&&console.warn(t)}break;case Q.Selection:n?this.lastSelectionData=r:this.applySelection(r);break;case Q.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(r):this.applyAdoptedStyleSheet(r)}}applyMutation(d,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,vn(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const o in this.legacy_missingNodeRetryMap)try{var e=this.legacy_missingNodeRetryMap[o],i=fn(e.node,this.virtualDom,this.mirror);i&&(e.node=i)}catch(t){this.config.showWarning&&console.warn(t)}const f=(this.usingVirtualDom?this.virtualDom:this).mirror,h=(d.removes.forEach(e=>{var t,i=f.getNode(e.id);if(!i)return d.removes.find(t=>t.id===e.parentId)?void 0:this.warnNodeNotFound(d,e.id);let n=f.getNode(e.parentId);if(!n)return this.warnNodeNotFound(d,e.parentId);if(e.isShadow&&Y(n)&&(n=n.shadowRoot),f.removeNodeFromMap(i),n)try{n.removeChild(i),this.usingVirtualDom&&"#text"===i.nodeName&&"STYLE"===n.nodeName&&0<(null==(t=n.rules)?void 0:t.length)&&(n.rules=[])}catch(t){if(!(t instanceof DOMException))throw t;this.warn("parent could not remove child in mutation",n,i,d)}}),Object.assign({},this.legacy_missingNodeRetryMap)),v=[],g=t=>{let e=null;return t.nextId&&(e=f.getNode(t.nextId)),null!==t.nextId&&void 0!==t.nextId&&-1!==t.nextId&&!e},n=t=>{if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");let e=f.getNode(t.parentId);if(!e)return(t.node.type===W.Document?this.newDocumentQueue:v).push(t);t.node.isShadow&&(e=(Y(e)||e.attachShadow({mode:"open"}),e.shadowRoot));let i=null,n=null;if(t.previousId&&(i=f.getNode(t.previousId)),t.nextId&&(n=f.getNode(t.nextId)),g(t))return v.push(t);if(!t.node.rootId||f.getNode(t.node.rootId)){var r=t.node.rootId?f.getNode(t.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Ft(e,f))this.attachDocumentToIframe(t,e);else{var s=(t,e)=>{for(const i of this.config.plugins||[])i.onBuild&&i.onBuild(t,{id:e,replayer:this})},o=Ct(t.node,{doc:r,mirror:f,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:s});if(-1===t.previousId||-1===t.nextId)h[t.node.id]={node:o,mutation:t};else{var a=f.getMeta(e);if(a&&a.type===W.Element&&"textarea"===a.tagName&&t.node.type===W.Text)for(const u of Array.isArray(e.childNodes)?e.childNodes:Array.from(e.childNodes))u.nodeType===e.TEXT_NODE&&e.removeChild(u);if(i&&i.nextSibling&&i.nextSibling.parentNode)e.insertBefore(o,i.nextSibling);else if(n&&n.parentNode)e.contains(n)?e.insertBefore(o,n):e.insertBefore(o,null);else{if(e===r)for(;r.firstChild;)r.removeChild(r.firstChild);e.appendChild(o)}if(s(o,t.node.id),this.usingVirtualDom&&"#text"===o.nodeName&&"STYLE"===e.nodeName&&0<(null==(a=e.rules)?void 0:a.length)&&(e.rules=[]),Ft(o,this.mirror)){const l=this.mirror.getId(o),c=this.newDocumentQueue.find(t=>t.parentId===l);c&&(this.attachDocumentToIframe(c,o),this.newDocumentQueue=this.newDocumentQueue.filter(t=>t!==c))}(t.previousId||t.nextId)&&this.legacy_resolveMissingNode(h,e,o,t)}}}};d.adds.forEach(t=>{n(t)});for(var r=Date.now();v.length;){var s=jt(v);if(v.length=0,500<Date.now()-r){this.warn("Timeout in the loop, please check the resolve tree data:",s);break}for(const a of s)f.getNode(a.value.parentId)?Dt(a,t=>{n(t)}):this.debug("Drop resolve tree since there is no parent for the root node.",a)}Object.keys(h).length&&Object.assign(this.legacy_missingNodeRetryMap,h),Wt(d.texts).forEach(e=>{var t,i=f.getNode(e.id);if(!i)return d.removes.find(t=>t.id===e.id)?void 0:this.warnNodeNotFound(d,e.id);i.textContent=e.value,this.usingVirtualDom&&0<(null==(t=null==(i=i.parentNode)?void 0:i.rules)?void 0:t.length)&&(i.rules=[])}),d.attributes.forEach(e=>{var t=f.getNode(e.id);if(!t)return d.removes.find(t=>t.id===e.id)?void 0:this.warnNodeNotFound(d,e.id);for(const c in e.attributes)if("string"==typeof c){var i=e.attributes[c];if(null===i)t.removeAttribute(c);else if("string"==typeof i)try{if("_cssText"===c&&("LINK"===t.nodeName||"STYLE"===t.nodeName))try{var n=f.getMeta(t),r=(Object.assign(n.attributes,e.attributes),Ct(n,{doc:t.ownerDocument,mirror:f,skipChild:!0,hackCss:!0,cache:this.cache})),s=t.nextSibling,o=t.parentNode;if(r&&o){o.removeChild(t),o.insertBefore(r,s),f.replace(e.id,r);break}}catch(t){}t.setAttribute(c,i)}catch(t){this.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",t)}else if("style"===c){var a,u=i,l=t;for(const h in u)!1===u[h]?l.style.removeProperty(h):u[h]instanceof Array?(a=u[h],l.style.setProperty(h,a[0],a[1])):(a=u[h],l.style.setProperty(h,a))}}})}applyScroll(t,e){var i,n=this.mirror.getNode(t.id);if(!n)return this.debugNodeNotFound(t,t.id);var r=this.mirror.getMeta(n);if(n===this.iframe.contentDocument)null!=(i=this.iframe.contentWindow)&&i.scrollTo({top:t.y,left:t.x,behavior:e?"auto":"smooth"});else if((null==r?void 0:r.type)===W.Document)null!=(i=n.defaultView)&&i.scrollTo({top:t.y,left:t.x,behavior:e?"auto":"smooth"});else try{n.scrollTo({top:t.y,left:t.x,behavior:e?"auto":"smooth"})}catch(t){}}applyInput(t){var e=this.mirror.getNode(t.id);if(!e)return this.debugNodeNotFound(t,t.id);try{e.checked=t.isChecked,e.value=t.text}catch(t){}}applySelection(t){try{const s=new Set;var e=t.ranges.map(({start:t,startOffset:e,end:i,endOffset:n})=>{var r,t=this.mirror.getNode(t),i=this.mirror.getNode(i);if(t&&i)return(r=new Range).setStart(t,e),r.setEnd(i,n),(i=null==(e=t.ownerDocument)?void 0:e.getSelection())&&s.add(i),{range:r,selection:i}});s.forEach(t=>t.removeAllRanges()),e.forEach(t=>{var e;return t&&(null==(e=t.selection)?void 0:e.addRange(t.range))})}catch(t){}}applyStyleSheetMutation(t){var e;let i=null;t.styleId?i=this.styleMirror.getStyle(t.styleId):t.id&&(i=(null==(e=this.mirror.getNode(t.id))?void 0:e.sheet)||null),i&&(t.source===Q.StyleSheetRule?this.applyStyleSheetRule(t,i):t.source===Q.StyleDeclaration&&this.applyStyleDeclaration(t,i))}applyStyleSheetRule(t,s){var e,i,n;if(null!=(e=t.adds)&&e.forEach(({rule:t,index:e})=>{try{var i,n,r;Array.isArray(e)?({positions:i,index:n}=Vt(e),Bt(s.cssRules,i).insertRule(t,n)):(r=void 0===e?void 0:Math.min(e,s.cssRules.length),null!=s&&s.insertRule(t,r))}catch(t){}}),null!=(e=t.removes)&&e.forEach(({index:t})=>{try{var e,i;Array.isArray(t)?({positions:e,index:i}=Vt(t),Bt(s.cssRules,e).deleteRule(i||0)):null!=s&&s.deleteRule(t)}catch(t){}}),t.replace)try{null!=(i=s.replace)&&i.call(s,t.replace)}catch(t){}if(t.replaceSync)try{null!=(n=s.replaceSync)&&n.call(s,t.replaceSync)}catch(t){}}applyStyleDeclaration(t,e){t.set&&Bt(e.rules,t.index).style.setProperty(t.set.property,t.set.value,t.set.priority),t.remove&&Bt(e.rules,t.index).style.removeProperty(t.remove.property)}applyAdoptedStyleSheet(t){var e;const r=this.mirror.getNode(t.id);if(r){null!=(e=t.styles)&&e.forEach(t=>{var e,i;let n=null;if(Y(r)?n=(null==(e=r.ownerDocument)?void 0:e.defaultView)||null:"#document"===r.nodeName&&(n=r.defaultView),n)try{i=new n.CSSStyleSheet,this.styleMirror.add(i,t.styleId),this.applyStyleSheetRule({source:Q.StyleSheetRule,adds:t.rules},i)}catch(t){}});const s=10;let n=0;const o=(t,e)=>{var i=e.map(t=>this.styleMirror.getStyle(t)).filter(t=>null!==t);Y(t)?t.shadowRoot.adoptedStyleSheets=i:"#document"===t.nodeName&&(t.adoptedStyleSheets=i),i.length!==e.length&&n<s&&(setTimeout(()=>o(t,e),0+100*n),n++)};o(r,t.styleIds)}}legacy_resolveMissingNode(t,e,i,n){var r,{previousId:n,nextId:s}=n,n=n&&t[n],s=s&&t[s];n&&({node:n,mutation:r}=n,e.insertBefore(n,i),delete t[r.node.id],delete this.legacy_missingNodeRetryMap[r.node.id],r.previousId||r.nextId)&&this.legacy_resolveMissingNode(t,e,n,r),s&&({node:n,mutation:r}=s,e.insertBefore(n,i.nextSibling),delete t[r.node.id],delete this.legacy_missingNodeRetryMap[r.node.id],r.previousId||r.nextId)&&this.legacy_resolveMissingNode(t,e,n,r)}moveAndHover(t,e,i,n,r){var s=this.mirror.getNode(i);if(!s)return this.debugNodeNotFound(r,i);r=Lt(s,this.iframe),i=t*r.absoluteScale+r.x,t=e*r.absoluteScale+r.y;this.mouse.style.left=i+"px",this.mouse.style.top=t+"px",n||this.drawMouseTail({x:i,y:t}),this.hoverElements(s)}drawMouseTail(e){if(this.mouseTail){const{lineCap:t,lineWidth:i,strokeStyle:n,duration:r}=!0===this.config.mouseTail?Wn:Object.assign({},Wn,this.config.mouseTail),s=()=>{if(this.mouseTail){const e=this.mouseTail.getContext("2d");e&&this.tailPositions.length&&(e.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),e.beginPath(),e.lineWidth=i,e.lineCap=t,e.strokeStyle=n,e.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(t=>e.lineTo(t.x,t.y)),e.stroke())}};this.tailPositions.push(e),s(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(t=>t!==e),s()},r/this.speedService.state.context.timer.speed)}}hoverElements(t){var e;null!=(e=this.iframe.contentDocument)&&e.querySelectorAll(".\\:hover").forEach(t=>{t.classList.remove(":hover")});let i=t;for(;i;)i.classList&&i.classList.add(":hover"),i=i.parentElement}isUserInteraction(t){return t.type===J.IncrementalSnapshot&&t.data.source>Q.Mutation&&t.data.source<=Q.Input}backToNormal(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(v.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(t,e){this.warn(`Node with id '${e}' not found. `,t)}warnCanvasMutationFailed(t,e){this.warn("Has error on canvas update",e,"canvas mutation:",t)}debugNodeNotFound(t,e){this.debug(Vn,`Node with id '${e}' not found. `,t)}warn(...t){this.config.showWarning&&console.warn(Vn,...t)}debug(...t){this.config.showDebug&&console.log(Vn,...t)}}}},n={};function r(t){var e=n[t];return void 0!==e||(e=n[t]={exports:{}},i[t].call(e.exports,e,e.exports,r)),e.exports}r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var t={};{var e=t;const o=r(464),a=r(208),u=r(392),l=r(824);var s=r(920);e.default=__STATSIG__,s.AutoInit.attempt(({sdkKey:t})=>{var e=null==(e=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instances)?void 0:e[t];let i=null;i=(i=e instanceof a.StatsigClient?e:i)||new a.StatsigClient(t,{userID:""}),new u.SessionReplay(i),new l.AutoCapture(i),i.initializeAsync().catch(t=>{o.Log.error(t)})})}return t.default})());